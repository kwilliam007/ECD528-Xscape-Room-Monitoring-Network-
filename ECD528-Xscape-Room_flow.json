[{"id":"0e9b6e83699a936b","type":"tab","label":"Room 1 - Vally of Kings","disabled":false,"info":""},{"id":"e38da52e5679f0be","type":"group","z":"0e9b6e83699a936b","name":"System Events","style":{"label":true},"nodes":["6d8d56ec1e35e476","f41245122e6cff1d","e0138284e2c09884","37eab63bc5230576","0a310e06b4292d47","574e6736a280d598"],"x":34,"y":99,"w":472,"h":202},{"id":"f140c03cd0252bfb","type":"group","z":"0e9b6e83699a936b","name":"Configuration","style":{"label":true},"nodes":["7877610e9446b5aa","e9d7f2bb5235afb0","6dd740798336e33c"],"x":414,"y":99,"w":512,"h":162},{"id":"b3347a2580c58dea","type":"group","z":"0e9b6e83699a936b","name":"Game State","style":{"label":true},"nodes":["418d947d92d5c979","7d5b08fa137d79b3","1185277447cbe044","9551d5269e5df73d","f11001833c75f582","c94cba2ac4521bb0","139166a6297ed2e3","a92dc4ae64fd20fc","bee0b6fbe7d58380","1009ecbecdde0354","42549cd797aeedc9","9238ddca0e1a3d85","2e9397b8414319d9","3d988688d528b497"],"x":34,"y":319,"w":672,"h":162},{"id":"7dae6bb0080ed610","type":"group","z":"0e9b6e83699a936b","name":"Timer","style":{"label":true},"nodes":["85c6af671bb6d06d","4e8e208e95aff9af","bf0e90488198976d","d129991d9a5ab333","d37f5d54578b73b3","4502951251b4bd6c","b604b62acb653363","4990cf4d3d5c7aeb","693af0266a738886","12db1fbec89853d6","71d6d0a04de13655","35ea6c311b392cb9","c4e0449933c6455f","b84b0cb48b4d37a4","c66067452355c582","f760cc5a8ffaba23"],"x":34,"y":499,"w":822,"h":322},{"id":"5131f7b8cd68af74","type":"group","z":"0e9b6e83699a936b","name":"Dashboad Config","style":{"label":true},"nodes":["9719c523f57b592a"],"x":734,"y":139,"w":252,"h":82},{"id":"9e71dc19fa77530c","type":"group","z":"0e9b6e83699a936b","name":"Messages and video","style":{"label":true},"nodes":["342c417930fa3a87","cadfbc1d3c74210e","9f757de4a3ca83ce","7f1994e87bcac0bb","7759256a4c9d44f4","a36b2c6b938fbcbc","f1bef0cf92d05f42","9548a047e1818705","bc51c6e16f490cec"],"x":34,"y":1159,"w":792,"h":242},{"id":"2a923135113b296e","type":"comment","z":"0e9b6e83699a936b","name":"Main Flow","info":"This flow contains nodes that define the overall configuration and monitor state of the system.\n","x":100,"y":40,"wires":[]},{"id":"5ac1f4e237f3aa75","type":"comment","z":"0e9b6e83699a936b","name":"This flow requires the node-red-dashboard module, which can be installed from the Pallete Manager","info":"This flow contains nodes that define the overall configuration and monitor state of the system.\n","x":390,"y":80,"wires":[]},{"id":"6d8d56ec1e35e476","type":"inject","z":"0e9b6e83699a936b","g":"e38da52e5679f0be","name":"Every second","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"1","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":160,"y":220,"wires":[["37eab63bc5230576"]]},{"id":"f41245122e6cff1d","type":"inject","z":"0e9b6e83699a936b","g":"e38da52e5679f0be","name":"On Initialisation","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"Initialise","payload":"","payloadType":"date","x":160,"y":180,"wires":[["e0138284e2c09884"]]},{"id":"e0138284e2c09884","type":"link out","z":"0e9b6e83699a936b","g":"e38da52e5679f0be","name":"On System Start","links":["e9d7f2bb5235afb0"],"x":340,"y":140,"wires":[],"l":true},{"id":"37eab63bc5230576","type":"link out","z":"0e9b6e83699a936b","g":"e38da52e5679f0be","name":"On Tick","links":["d129991d9a5ab333"],"x":320,"y":180,"wires":[],"l":true},{"id":"0a310e06b4292d47","type":"ui_ui_control","z":"0e9b6e83699a936b","g":"e38da52e5679f0be","name":"On Browser Refresh","events":"all","x":160,"y":260,"wires":[["574e6736a280d598"]]},{"id":"574e6736a280d598","type":"link out","z":"0e9b6e83699a936b","g":"e38da52e5679f0be","name":"On Browser Refresh","links":[],"x":380,"y":260,"wires":[],"l":true},{"id":"7877610e9446b5aa","type":"function","z":"0e9b6e83699a936b","g":"f140c03cd0252bfb","name":"Initialise Global Vars","func":"global.set(\"gameState\", \"stopped\");\nglobal.set(\"gameDuration\", 3600000);\nglobal.set(\"elapsedTimeDelta\", 0);\nglobal.set(\"timeElapsed\", 0);\nglobal.set(\"timeRemaining\", 3600000);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":540,"y":180,"wires":[["6dd740798336e33c"]]},{"id":"e9d7f2bb5235afb0","type":"link in","z":"0e9b6e83699a936b","g":"f140c03cd0252bfb","name":"Initialise Variables","links":["e0138284e2c09884"],"x":610,"y":140,"wires":[["7877610e9446b5aa"]],"l":true},{"id":"6dd740798336e33c","type":"link out","z":"0e9b6e83699a936b","g":"f140c03cd0252bfb","name":"On System Start","links":["d129991d9a5ab333"],"x":820,"y":220,"wires":[],"l":true},{"id":"418d947d92d5c979","type":"ui_button","z":"0e9b6e83699a936b","g":"b3347a2580c58dea","name":"","group":"2167d545401575ce","order":13,"width":2,"height":1,"passthru":true,"label":"Stop","tooltip":"","color":"","bgcolor":"red","className":"","icon":"fa-stop","payload":"{     \"payload\": \"cancel\" }","payloadType":"json","topic":"/game","topicType":"str","x":110,"y":400,"wires":[["c94cba2ac4521bb0"]]},{"id":"7d5b08fa137d79b3","type":"ui_button","z":"0e9b6e83699a936b","g":"b3347a2580c58dea","name":"","group":"2167d545401575ce","order":15,"width":2,"height":1,"passthru":true,"label":"Reset","tooltip":"","color":"","bgcolor":"orange","className":"","icon":"fa-fast-backward","payload":"{\"timeout\": 600 }","payloadType":"json","topic":"/game","topicType":"str","x":110,"y":440,"wires":[["139166a6297ed2e3"]]},{"id":"1185277447cbe044","type":"change","z":"0e9b6e83699a936b","g":"b3347a2580c58dea","name":"","rules":[{"t":"set","p":"gameState","pt":"global","to":"playing","tot":"str"},{"t":"set","p":"startTime","pt":"flow","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":360,"wires":[["a92dc4ae64fd20fc"]]},{"id":"9551d5269e5df73d","type":"change","z":"0e9b6e83699a936b","g":"b3347a2580c58dea","name":"","rules":[{"t":"set","p":"gameState","pt":"global","to":"stopped","tot":"str"},{"t":"set","p":"elapsedTimeDelta","pt":"global","to":"$globalContext('elapsedTimeDelta') + $millis() - $flowContext('startTime')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":400,"wires":[["1009ecbecdde0354"]]},{"id":"f11001833c75f582","type":"switch","z":"0e9b6e83699a936b","g":"b3347a2580c58dea","name":"","property":"gameState","propertyType":"global","rules":[{"t":"neq","v":"playing","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":230,"y":360,"wires":[["1185277447cbe044"]]},{"id":"c94cba2ac4521bb0","type":"switch","z":"0e9b6e83699a936b","g":"b3347a2580c58dea","name":"","property":"gameState","propertyType":"global","rules":[{"t":"neq","v":"stopped","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":230,"y":400,"wires":[["9551d5269e5df73d"]]},{"id":"139166a6297ed2e3","type":"change","z":"0e9b6e83699a936b","g":"b3347a2580c58dea","name":"","rules":[{"t":"set","p":"elapsedTimeDelta","pt":"global","to":"0","tot":"num"},{"t":"set","p":"timeRemaining","pt":"global","to":"gameDuration","tot":"global"},{"t":"set","p":"startTime","pt":"flow","to":"","tot":"date"},{"t":"set","p":"timeElapsed","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":440,"wires":[["9238ddca0e1a3d85"]]},{"id":"a92dc4ae64fd20fc","type":"link out","z":"0e9b6e83699a936b","g":"b3347a2580c58dea","name":"On Game Start","links":["d129991d9a5ab333"],"x":560,"y":360,"wires":[],"l":true},{"id":"bee0b6fbe7d58380","type":"comment","z":"0e9b6e83699a936b","g":"b3347a2580c58dea","name":"On Game Start","info":"","x":600,"y":360,"wires":[]},{"id":"1009ecbecdde0354","type":"link out","z":"0e9b6e83699a936b","g":"b3347a2580c58dea","name":"On Game Stop","links":["d129991d9a5ab333"],"x":560,"y":400,"wires":[],"l":true},{"id":"42549cd797aeedc9","type":"comment","z":"0e9b6e83699a936b","g":"b3347a2580c58dea","name":"On Game Stop","info":"","x":600,"y":400,"wires":[]},{"id":"9238ddca0e1a3d85","type":"link out","z":"0e9b6e83699a936b","g":"b3347a2580c58dea","name":"On Game Reset","links":["d129991d9a5ab333"],"x":560,"y":440,"wires":[],"l":true},{"id":"2e9397b8414319d9","type":"comment","z":"0e9b6e83699a936b","g":"b3347a2580c58dea","name":"On Game Reset","info":"","x":600,"y":440,"wires":[]},{"id":"3d988688d528b497","type":"ui_button","z":"0e9b6e83699a936b","g":"b3347a2580c58dea","name":"","group":"2167d545401575ce","order":11,"width":2,"height":1,"passthru":true,"label":"Start","tooltip":"","color":"","bgcolor":"green","className":"","icon":"fa-play","payload":"{\"msg\":{\"payload\":\"gamestart\",\"timeout\":600,\"warning\":30}}","payloadType":"json","topic":"/game","topicType":"str","x":110,"y":360,"wires":[["f11001833c75f582"]]},{"id":"85c6af671bb6d06d","type":"function","z":"0e9b6e83699a936b","g":"7dae6bb0080ed610","name":"Update Timer","func":"// Retrieve current state of global timer variables\nvar gameState = global.get(\"gameState\") || 'playing';\nvar gameDuration = global.get(\"gameDuration\") || 0;\nvar elapsedTimeDelta = global.get(\"elapsedTimeDelta\") || 0;\n// Total time elapsed is duration since the start button was last pressed, + any adjustments\nvar timeElapsed = 0;\nvar startTime = flow.get(\"startTime\") || 0;\n\n// If the game is in progress, update the time passed since start button was last pressed\nif(gameState == \"playing\") {\n    timeElapsed = (Date.now() - startTime);\n}\n\n// We update these even if gameState is not playing, to allow for\n// adjustments to gameDuration or timeElapsed made while game is stopped\nvar timeElapsedAfterAdjustments = timeElapsed + elapsedTimeDelta;\nvar timeRemaining = gameDuration - timeElapsedAfterAdjustments;\n\n// Update the global variable so that it is available to other nodes if required\nglobal.set(\"timeRemaining\", timeRemaining);\n\n// Update the msg to carry string\nmsg.timeElapsed = timeElapsedAfterAdjustments;        \nmsg.timeRemaining = timeRemaining;\n\n// Display status nof this node in the flow\nnode.status({ fill: \"green\", shape: \"dot\", text: timeRemaining });\n\n// Only need to update UI if timeRemaining has changed\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":200,"y":540,"wires":[["bf0e90488198976d"]]},{"id":"4e8e208e95aff9af","type":"ui_template","z":"0e9b6e83699a936b","g":"7dae6bb0080ed610","group":"2167d545401575ce","name":"Time Remaining","order":1,"width":10,"height":3,"format":"<md-card-title>\n    <md-card-title-text>\n        <p class=\"md-headline\">Time Remaining</p>\n    </md-card-title-text>\n    <span ng-class=\"'fa fa-clock-o fa-2x'\"></span>\n</md-card-title>\n<md-card-content>\n    <div style=\"text-align:center\">\n        <span class=\"value\" style=\"color:{{msg.timeColour}}; font-size:3em;\">\n            {{msg.formattedTimeRemaining}}\n        </span>\n    </div>\n</md-card-content>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":false,"templateScope":"local","className":"","x":750,"y":540,"wires":[[]]},{"id":"bf0e90488198976d","type":"function","z":"0e9b6e83699a936b","g":"7dae6bb0080ed610","name":"Format Time for Dashboard Display","func":"// Create formattedTime in hh:mm:ss\nvar t = msg.timeElapsed / 1000; //ms\nvar h = Math.floor(t / 3600);\nvar m = Math.floor(t % 3600 / 60);\nvar s = Math.floor(t % 3600 % 60);\nmsg.formattedTimeElapsed = (\"0\" + h).slice(-2) + \":\" + (\"0\" + m).slice(-2) + \":\" + (\"0\" + s).slice(-2);\n\nvar t2 = msg.timeRemaining / 1000; //ms\nvar h2 = Math.floor(t2 / 3600);\nvar m2 = Math.floor(t2 % 3600 / 60);\nvar s2 = Math.floor(t2 % 3600 % 60);\nmsg.formattedTimeRemaining = (\"0\" + h2).slice(-2) + \":\" + (\"0\" + m2).slice(-2) + \":\" + (\"0\" + s2).slice(-2);\n\nvar t3 = global.get(\"gameDuration\") / 1000; //ms\nvar h3 = Math.floor(t3 / 3600);\nvar m3 = Math.floor(t3 % 3600 / 60);\nvar s3 = Math.floor(t3 % 3600 % 60);\nmsg.formattedGameDuration = (\"0\" + h3).slice(-2) + \":\" + (\"0\" + m3).slice(-2) + \":\" + (\"0\" + s3).slice(-2);\n\n// Set timeColour depending on current gamestate and time remaining\nvar gameState = global.get(\"gameState\");\nif (gameState == \"playing\") {\n    if (msg.timeRemaining < 60000) { msg.timeColour = \"red\"; }\n    else { msg.timeColour = \"green\"; }\n}\nelse { msg.timeColour = \"gray\"; }\n\n// Update the editor node\nnode.status({ fill: msg.timeColour, shape:\"dot\", text:msg.formattedTimeRemaining});\n\n// Forward the message along the flow\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":450,"y":540,"wires":[["4e8e208e95aff9af","12db1fbec89853d6","c66067452355c582"]]},{"id":"d129991d9a5ab333","type":"link in","z":"0e9b6e83699a936b","g":"7dae6bb0080ed610","name":"Update Timer","links":["1009ecbecdde0354","37eab63bc5230576","693af0266a738886","6dd740798336e33c","9238ddca0e1a3d85","a92dc4ae64fd20fc"],"x":140,"y":540,"wires":[["85c6af671bb6d06d"]],"l":true},{"id":"d37f5d54578b73b3","type":"ui_button","z":"0e9b6e83699a936b","g":"7dae6bb0080ed610","name":"","group":"2167d545401575ce","order":8,"width":0,"height":0,"passthru":true,"label":"1min","tooltip":"","color":"","bgcolor":"grey","className":"","icon":"fa-plus","payload":"{\"msg\":{\"payload\":\"add5\",\"timeout\":600,\"warning\":30}}","payloadType":"json","topic":"/game","topicType":"str","x":110,"y":660,"wires":[["b604b62acb653363"]]},{"id":"4502951251b4bd6c","type":"ui_button","z":"0e9b6e83699a936b","g":"7dae6bb0080ed610","name":"","group":"2167d545401575ce","order":9,"width":0,"height":0,"passthru":true,"label":"1min","tooltip":"","color":"","bgcolor":"gray","className":"","icon":"fa-minus","payload":"{\"msg\":{\"payload\":\"deduct5\",\"timeout\":600,\"warning\":30}}","payloadType":"json","topic":"/game","topicType":"str","x":110,"y":700,"wires":[["4990cf4d3d5c7aeb"]]},{"id":"b604b62acb653363","type":"change","z":"0e9b6e83699a936b","g":"7dae6bb0080ed610","name":"","rules":[{"t":"set","p":"gameDuration","pt":"global","to":"$globalContext('gameDuration') + (1000 * 60)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":310,"y":660,"wires":[["693af0266a738886"]]},{"id":"4990cf4d3d5c7aeb","type":"change","z":"0e9b6e83699a936b","g":"7dae6bb0080ed610","name":"","rules":[{"t":"set","p":"gameDuration","pt":"global","to":"$globalContext('gameDuration') - (1000 * 60)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":310,"y":700,"wires":[["693af0266a738886"]]},{"id":"693af0266a738886","type":"link out","z":"0e9b6e83699a936b","g":"7dae6bb0080ed610","name":"On Time Adjust","mode":"link","links":["d129991d9a5ab333"],"x":560,"y":720,"wires":[],"l":true},{"id":"12db1fbec89853d6","type":"ui_text","z":"0e9b6e83699a936b","g":"7dae6bb0080ed610","group":"2167d545401575ce","order":3,"width":2,"height":1,"name":"Game Duration","label":"Duration","format":"{{msg.formattedGameDuration}}","layout":"col-center","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":740,"y":620,"wires":[]},{"id":"71d6d0a04de13655","type":"change","z":"0e9b6e83699a936b","d":true,"g":"7dae6bb0080ed610","name":"","rules":[{"t":"set","p":"elapsedTimeDelta","pt":"global","to":"$globalContext('elapsedTimeDelta') + (5000 * 60)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":300,"y":740,"wires":[["693af0266a738886"]]},{"id":"35ea6c311b392cb9","type":"ui_button","z":"0e9b6e83699a936b","d":true,"g":"7dae6bb0080ed610","name":"","group":"2167d545401575ce","order":45,"width":0,"height":0,"passthru":true,"label":"+5min","tooltip":"","color":"","bgcolor":"#999999","className":"","icon":"fa-plus","payload":"{\"msg\":{\"payload\":\"add5\",\"timeout\":600,\"warning\":30}}","payloadType":"json","topic":"/game","topicType":"str","x":110,"y":740,"wires":[["71d6d0a04de13655"]]},{"id":"c4e0449933c6455f","type":"change","z":"0e9b6e83699a936b","d":true,"g":"7dae6bb0080ed610","name":"","rules":[{"t":"set","p":"elapsedTimeDelta","pt":"global","to":"$globalContext('elapsedTimeDelta') - (5000 * 60)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":300,"y":780,"wires":[["693af0266a738886"]]},{"id":"b84b0cb48b4d37a4","type":"ui_button","z":"0e9b6e83699a936b","d":true,"g":"7dae6bb0080ed610","name":"","group":"2167d545401575ce","order":46,"width":0,"height":0,"passthru":true,"label":"-5min","tooltip":"","color":"","bgcolor":"#999999","className":"","icon":"fa-minus","payload":"{\"msg\":{\"payload\":\"deduct5\",\"timeout\":600,\"warning\":30}}","payloadType":"json","topic":"/game","topicType":"str","x":110,"y":780,"wires":[["c4e0449933c6455f"]]},{"id":"c66067452355c582","type":"ui_text","z":"0e9b6e83699a936b","g":"7dae6bb0080ed610","group":"2167d545401575ce","order":5,"width":2,"height":1,"name":"Time Elapsed","label":"Elapsed","format":"{{msg.formattedTimeElapsed}}","layout":"col-center","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":740,"y":580,"wires":[]},{"id":"f760cc5a8ffaba23","type":"comment","z":"0e9b6e83699a936b","g":"7dae6bb0080ed610","name":"Adjustments to game duration or time taken","info":"","x":230,"y":620,"wires":[]},{"id":"9719c523f57b592a","type":"ui_template","z":"0e9b6e83699a936b","g":"5131f7b8cd68af74","group":"2167d545401575ce","name":"CSS-style overrides","order":7,"width":0,"height":0,"format":"<style>\n    /* Style ON status as green */\n    .sensor-status[data-status=\"ON\"] {\n    color: green !important;\n    font-weight: bold;\n    }\n    \n    /* Style OFF status as red */\n    .sensor-status[data-status=\"OFF\"] {\n    color: red !important;\n    font-weight: bold;\n    }\n\n    /* Don't let title expand */\n    md-card md-card-title {\n        flex: 0 0 auto !important;\n    }\n\n    /* Don't show scrollbars */\n    .nr-dashboard-template {\n        overflow-y: hidden !important;\n    }\n\n    /* Set the background color to black */\n    body,\n    md-content {\n        background-color: black !important;\n        color: white !important;\n        /* Ensures text remains visible */\n    }\n</style>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":false,"templateScope":"global","className":"","x":860,"y":180,"wires":[[]],"info":"CSS Style overrides to the Node-RED Dark theme.\n\nFrom the Dashboard node information panel (View->Dashboard), select\n - Site: Options -> Node-RED theme everywhere\n - Theme: Style -> Dark"},{"id":"1d36062d78e22e93","type":"ui_template","z":"0e9b6e83699a936b","d":true,"group":"45bd6a9b5a81525a","name":"","order":0,"width":0,"height":0,"format":"<div>\n    <span class=\"sensor-number\">Sensor {{msg.sensorNumber}}:</span>\n    <span class=\"sensor-status\" data-status=\"{{msg.payload}}\">\n        {{msg.payload}}\n    </span>\n</div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":820,"y":340,"wires":[[]]},{"id":"6864c85a31d0ce10","type":"ui_button","z":"0e9b6e83699a936b","d":true,"name":"","group":"2167d545401575ce","order":22,"width":0,"height":0,"passthru":false,"label":"Door Hint","tooltip":"","color":"","bgcolor":"red","className":"","icon":"","payload":"show_door","payloadType":"str","topic":"topic","topicType":"msg","x":100,"y":880,"wires":[["84634227f2d33a30"]]},{"id":"84634227f2d33a30","type":"function","z":"0e9b6e83699a936b","d":true,"name":"function 8","func":"let messages = [];\n\nif (msg.payload === 'show_door') {\n    messages.push({ topic: \"hint\", payload: \"door\" });\n} \nelse if (msg.payload === 'show_empty') {\n    messages.push({ topic: \"hint\", payload: \"empty\" });\n}\n\n// Ensure the buttons update properly\nmessages.push({ topic: \"door_button\", payload: (msg.payload === 'show_door') ? 'green' : 'red' });\nmessages.push({ topic: \"empty_button\", payload: (msg.payload === 'show_empty') ? 'green' : 'red' });\n\nreturn messages;\n","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":820,"y":1060,"wires":[["e64aceb01b23ec85"]]},{"id":"e64aceb01b23ec85","type":"ui_template","z":"0e9b6e83699a936b","d":true,"group":"51f4a9454e215443","name":"","order":6,"width":"0","height":"0","format":"<style>\n    /* Full-page styling */\n    body {\n        background-color: black;\n        color: white;\n        text-align: center;\n        font-family: 'Courier New', monospace;\n    }\n\n    /* Digital clock styling */\n    #clock {\n        font-size: 3em;\n        font-weight: bold;\n        letter-spacing: 5px;\n        text-shadow: 2px 2px 5px rgba(255, 255, 255, 0.5);\n        margin-top: 50px;\n    }\n\n    /* Container to center content */\n    .hintContainer {\n        display: none;\n        margin-top: 20px;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n    }\n\n    /* Larger images */\n    .hintImage {\n        width: 85%;\n        max-width: 950px;\n        /* Ensures it doesnâ€™t get too large on big screens */\n        border: 5px solid white;\n        border-radius: 10px;\n        box-shadow: 0px 0px 20px rgba(255, 255, 255, 0.5);\n        cursor: pointer;\n    }\n\n    /* Hint text styling */\n    .hintText {\n        font-size: 2em;\n        font-weight: bold;\n        margin-top: 10px;\n        text-shadow: 2px 2px 5px rgba(255, 255, 255, 0.5);\n    }\n\n    /* Empty display styling */\n    #emptyDisplayContainer {\n        display: none;\n        justify-content: center;\n        align-items: center;\n        margin-top: 0px;\n    }\n\n    #emptyDisplay {\n        width: 110%;\n        max-width: 1300px;\n    }\n</style>\n\n<div>\n    <!-- Always visible clock -->\n    <h2 id=\"clock\"></h2>\n\n    <!-- Door Hint Section -->\n    <div id=\"doorContainer\" class=\"hintContainer\">\n        <img id=\"doorImage\" src=\"/door.png\" class=\"hintImage\" onclick=\"showHint('doorText')\">\n        <p id=\"doorText\" class=\"hintText\" style=\"display: none;\">Open the door</p>\n    </div>\n\n    <!-- Empty Display Section -->\n    <div id=\"emptyDisplayContainer\">\n        <img id=\"emptyDisplay\" src=\"/larger-white-background.png\">\n    </div>\n\n    <script>\n        // Clock display logic\n        function updateClock() {\n            let now = new Date();\n            document.getElementById('clock').innerText = now.toLocaleTimeString();\n        }\n        setInterval(updateClock, 1000);\n        updateClock();\n\n        // Node-RED event listener to show images when messages are received\n        (function(scope) {\n            scope.$watch('msg.payload', function(newVal) {\n                console.log(\"New Payload Received: \", newVal); // Debugging log\n\n                // Reset all displays first\n                document.getElementById('doorContainer').style.display = 'none';\n                document.getElementById('emptyDisplayContainer').style.display = 'none';\n\n                // Show the selected hint\n                if (newVal === \"door\") {\n                    document.getElementById('doorContainer').style.display = 'flex';\n                } else if (newVal === \"empty\") {\n                    document.getElementById('emptyDisplayContainer').style.display = 'flex';\n                }\n            });\n        })(scope);\n\n        // Function to show hint text when images are clicked\n        function showHint(hintId) {\n            document.getElementById(hintId).style.display = 'block';\n        }\n    </script>\n</div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":1140,"y":1060,"wires":[[]]},{"id":"ed3977edad9ec858","type":"ui_button","z":"0e9b6e83699a936b","d":true,"name":"","group":"2167d545401575ce","order":23,"width":0,"height":0,"passthru":false,"label":"Map Hint","tooltip":"","color":"","bgcolor":"red","className":"","icon":"","payload":"show_map","payloadType":"str","topic":"topic","topicType":"msg","x":260,"y":880,"wires":[["84634227f2d33a30"]]},{"id":"d3517995e39889d0","type":"ui_button","z":"0e9b6e83699a936b","d":true,"name":"","group":"2167d545401575ce","order":25,"width":0,"height":0,"passthru":false,"label":"Empty Display","tooltip":"","color":"","bgcolor":"red","className":"","icon":"","payload":"show_empty","payloadType":"str","topic":"topic","topicType":"msg","x":460,"y":880,"wires":[["84634227f2d33a30"]]},{"id":"9558f5bf9dc95a9e","type":"ui_dropdown","z":"0e9b6e83699a936b","d":true,"name":"","label":"Hint [Room 1]","tooltip":"","place":"Select option","group":"2167d545401575ce","order":20,"width":10,"height":1,"passthru":true,"multiple":false,"options":[{"label":"show door","value":"show_door","type":"str"},{"label":"empty display","value":"show_empty","type":"str"}],"payload":"","topic":"topic","topicType":"msg","className":"","x":140,"y":1060,"wires":[["c3ede81cceea28fe"]]},{"id":"c3ede81cceea28fe","type":"change","z":"0e9b6e83699a936b","d":true,"name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"topic","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":1060,"wires":[["84634227f2d33a30"]]},{"id":"342c417930fa3a87","type":"comment","z":"0e9b6e83699a936b","g":"9e71dc19fa77530c","name":"Duration before clearing","info":"","x":400,"y":1200,"wires":[]},{"id":"cadfbc1d3c74210e","type":"comment","z":"0e9b6e83699a936b","g":"9e71dc19fa77530c","name":"Set msg variable from payload","info":"","x":670,"y":1200,"wires":[]},{"id":"9f757de4a3ca83ce","type":"link out","z":"0e9b6e83699a936b","d":true,"g":"9e71dc19fa77530c","name":"In-Game Text Display Out","mode":"link","links":[],"x":785,"y":1240,"wires":[]},{"id":"7f1994e87bcac0bb","type":"comment","z":"0e9b6e83699a936b","g":"9e71dc19fa77530c","name":"Predefined Messages","info":"","x":160,"y":1200,"wires":[]},{"id":"7759256a4c9d44f4","type":"comment","z":"0e9b6e83699a936b","g":"9e71dc19fa77530c","name":"Free Text Messages","info":"","x":150,"y":1300,"wires":[]},{"id":"a36b2c6b938fbcbc","type":"function","z":"0e9b6e83699a936b","g":"9e71dc19fa77530c","name":"Format Message","func":"var message = msg.payload;\n\nmsg.payload = message;\n\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":390,"y":1240,"wires":[["f1bef0cf92d05f42"]]},{"id":"f1bef0cf92d05f42","type":"ui_text","z":"0e9b6e83699a936b","g":"9e71dc19fa77530c","group":"51f4a9454e215443","order":3,"width":20,"height":3,"name":"","label":"","format":"{{msg.payload}}","layout":"col-center","className":"","style":true,"font":"Times New Roman,Times,serif","fontSize":"60","color":"#ff0000","x":610,"y":1240,"wires":[]},{"id":"9548a047e1818705","type":"ui_text_input","z":"0e9b6e83699a936b","g":"9e71dc19fa77530c","name":"","label":"Type custom hint:","tooltip":"","group":"2167d545401575ce","order":18,"width":10,"height":1,"passthru":true,"mode":"text","delay":"0","topic":"","sendOnBlur":true,"className":"","topicType":"str","x":150,"y":1360,"wires":[["a36b2c6b938fbcbc"]]},{"id":"bc51c6e16f490cec","type":"ui_dropdown","z":"0e9b6e83699a936b","g":"9e71dc19fa77530c","name":"Select Hint","label":"Select Hint(text)","tooltip":"","place":"","group":"2167d545401575ce","order":44,"width":0,"height":0,"passthru":true,"multiple":false,"options":[{"label":"Cat Hint","value":"the cat","type":"str"},{"label":"Dog Hint","value":"dog","type":"str"},{"label":"Reset","value":"   ","type":"str"}],"payload":"","topic":"","topicType":"str","className":"","x":170,"y":1240,"wires":[["a36b2c6b938fbcbc"]]},{"id":"c2bbeb03b3db1ece","type":"ui_dropdown","z":"0e9b6e83699a936b","name":"","label":"Select Hint","tooltip":"","place":"Select option","group":"2167d545401575ce","order":21,"width":10,"height":1,"passthru":true,"multiple":false,"options":[{"label":"Door Image","value":"show_door","type":"str"},{"label":"Empty Image","value":"show_empty","type":"str"}],"payload":"","topic":"topic","topicType":"msg","className":"","x":130,"y":1460,"wires":[["0a91b237a17435a3"]]},{"id":"0a91b237a17435a3","type":"function","z":"0e9b6e83699a936b","name":"Set Image","func":"if (msg.payload === 'show_door') {\n    return [{ topic: \"image\", payload: '/door.png' }, { topic: \"image_hint\", payload: 'Open the door' }];\n}\nif (msg.payload === 'show_empty') {\n    return [{ topic: \"image\", payload: '/empty.png' }, { topic: \"image_hint\", payload: 'Empty Display' }];\n}\nreturn [];","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":400,"y":1460,"wires":[["f7543a6f61a13f3e"]]},{"id":"f7543a6f61a13f3e","type":"ui_template","z":"0e9b6e83699a936b","group":"51f4a9454e215443","name":"Display Image","order":6,"width":"15","height":"15","format":"<style>\n    body {\n        background-color: black;\n        color: white;\n        text-align: center;\n        font-family: 'Courier New', monospace;\n    }\n    .imageContainer {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n    }\n    .image {\n        width: 80%;\n        max-width: 800px;\n        border: 5px solid white;\n        border-radius: 10px;\n        box-shadow: 0px 0px 15px rgba(255, 255, 255, 0.5);\n    }\n    .hintText {\n        font-size: 1.5em;\n        font-weight: bold;\n        margin-top: 10px;\n        text-shadow: 2px 2px 5px rgba(255, 255, 255, 0.5);\n    }\n</style>\n\n<div>\n    <div id=\"imageContainer\" class=\"imageContainer\">\n        <img id=\"imageHint\" class=\"image\" ng-src=\"{{msg.payload}}\" />\n        <p id=\"hintText\" class=\"hintText\">{{msg.image_hint}}</p>\n    </div>\n</div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":1130,"y":1460,"wires":[[]]},{"id":"d0d1f08b.852d6","type":"tab","label":"room2","disabled":false,"info":""},{"id":"3538d2e3bbef41f7","type":"group","z":"d0d1f08b.852d6","name":"System Events","style":{"label":true},"nodes":["4f1eefd9b79dc759","0e682073b5c6c2c9","044667738c3d0fa0","70e48462392b85de","05b97854a6694587","7797b60aff429396"],"x":94,"y":319,"w":472,"h":202},{"id":"9d3fc42c89f370b6","type":"group","z":"d0d1f08b.852d6","name":"Configuration","style":{"label":true},"nodes":["f66b1e8dd96b39ea","f81b5e83cd9afe9e","199f47632ae769ef"],"x":474,"y":319,"w":512,"h":162},{"id":"cea8f3435c3645ab","type":"group","z":"d0d1f08b.852d6","name":"Game State","style":{"label":true},"nodes":["8c810ffdf4cd4ade","c4eff85fc0165267","c1356926517582a4","e660a7ebba2c66fc","459866cfcd5c221c","ae0e47ab97117b76","17d2fa69aa623b66","0f79db62292ae708","62238c614bee0aa4","a46d74339bbce0f0","2f55873da42260b0","7b76d260b7f9a3b5","b7f8becc4dace19a","8e760882d7a30677"],"x":94,"y":539,"w":672,"h":162},{"id":"270d93035d70dfb4","type":"group","z":"d0d1f08b.852d6","name":"Timer","style":{"label":true},"nodes":["5295ce3f99c68af3","d9e00a34cf617e57","a519f568a2c0e653","0ab6be49bb2fe4f0","519eb0c6384cf8b8","94aa1a83548682f3","961f83f8bf9700a8","4898182651f5e575","cd16fc65a29dd5df","fd949f6d8b7f9d45","40bd9b60297be2df","b1c2bf165c352f70","913a942b4ab05f35","38973c3b3b6dd2a3","e093af3928e7721c","2f2b823079377403"],"x":94,"y":719,"w":822,"h":322},{"id":"00cdff5efba53c36","type":"group","z":"d0d1f08b.852d6","name":"Dashboad Config","style":{"label":true},"nodes":["8226d97f4f9c01d8"],"x":794,"y":359,"w":252,"h":82},{"id":"bd0e386cdb796eca","type":"group","z":"d0d1f08b.852d6","name":"Messages and video","style":{"label":true},"nodes":["bc891028730e186d","0add662071fa1eca","d8b11a85b0347666","344220d20aeeafa1","23b9a38b46b547f0","f5e22882a8289493","891471cc064166ab","a31091c872606750","45b43830d7870532"],"x":74,"y":1339,"w":792,"h":242},{"id":"598d20c40bdfe6a6","type":"comment","z":"d0d1f08b.852d6","name":"Main Flow","info":"This flow contains nodes that define the overall configuration and monitor state of the system.\n","x":160,"y":260,"wires":[]},{"id":"a21f8b73f7a264ed","type":"comment","z":"d0d1f08b.852d6","name":"This flow requires the node-red-dashboard module, which can be installed from the Pallete Manager","info":"This flow contains nodes that define the overall configuration and monitor state of the system.\n","x":450,"y":300,"wires":[]},{"id":"4f1eefd9b79dc759","type":"inject","z":"d0d1f08b.852d6","g":"3538d2e3bbef41f7","name":"Every second","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"1","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":220,"y":440,"wires":[["70e48462392b85de"]]},{"id":"0e682073b5c6c2c9","type":"inject","z":"d0d1f08b.852d6","g":"3538d2e3bbef41f7","name":"On Initialisation","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"Initialise","payload":"","payloadType":"date","x":220,"y":400,"wires":[["044667738c3d0fa0"]]},{"id":"044667738c3d0fa0","type":"link out","z":"d0d1f08b.852d6","g":"3538d2e3bbef41f7","name":"On System Start","links":["f81b5e83cd9afe9e"],"x":400,"y":360,"wires":[],"l":true},{"id":"70e48462392b85de","type":"link out","z":"d0d1f08b.852d6","g":"3538d2e3bbef41f7","name":"On Tick","links":["0ab6be49bb2fe4f0","8a6c51377608f8d6","c98f1c8e80835659","06f202fa8c77cc09"],"x":380,"y":400,"wires":[],"l":true},{"id":"05b97854a6694587","type":"ui_ui_control","z":"d0d1f08b.852d6","g":"3538d2e3bbef41f7","name":"On Browser Refresh","events":"all","x":220,"y":480,"wires":[["7797b60aff429396"]]},{"id":"7797b60aff429396","type":"link out","z":"d0d1f08b.852d6","g":"3538d2e3bbef41f7","name":"On Browser Refresh","links":[],"x":440,"y":480,"wires":[],"l":true},{"id":"f66b1e8dd96b39ea","type":"function","z":"d0d1f08b.852d6","g":"9d3fc42c89f370b6","name":"Initialise Global Vars","func":"global.set(\"gameState\", \"stopped\");\nglobal.set(\"gameDuration\", 3600000);\nglobal.set(\"elapsedTimeDelta\", 0);\nglobal.set(\"timeElapsed\", 0);\nglobal.set(\"timeRemaining\", 3600000);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":600,"y":400,"wires":[["199f47632ae769ef"]]},{"id":"f81b5e83cd9afe9e","type":"link in","z":"d0d1f08b.852d6","g":"9d3fc42c89f370b6","name":"Initialise Variables","links":["044667738c3d0fa0"],"x":670,"y":360,"wires":[["f66b1e8dd96b39ea"]],"l":true},{"id":"199f47632ae769ef","type":"link out","z":"d0d1f08b.852d6","g":"9d3fc42c89f370b6","name":"On System Start","links":["0ab6be49bb2fe4f0","8a6c51377608f8d6","c98f1c8e80835659","06f202fa8c77cc09"],"x":880,"y":440,"wires":[],"l":true},{"id":"8c810ffdf4cd4ade","type":"ui_button","z":"d0d1f08b.852d6","g":"cea8f3435c3645ab","name":"","group":"aee1e653a92d1fd1","order":5,"width":2,"height":1,"passthru":true,"label":"Stop","tooltip":"","color":"","bgcolor":"red","className":"","icon":"fa-stop","payload":"{     \"payload\": \"cancel\" }","payloadType":"json","topic":"/game","topicType":"str","x":170,"y":620,"wires":[["ae0e47ab97117b76"]]},{"id":"c4eff85fc0165267","type":"ui_button","z":"d0d1f08b.852d6","g":"cea8f3435c3645ab","name":"","group":"aee1e653a92d1fd1","order":7,"width":2,"height":1,"passthru":true,"label":"Reset","tooltip":"","color":"","bgcolor":"orange","className":"","icon":"fa-fast-backward","payload":"{\"timeout\": 600 }","payloadType":"json","topic":"/game","topicType":"str","x":170,"y":660,"wires":[["17d2fa69aa623b66"]]},{"id":"c1356926517582a4","type":"change","z":"d0d1f08b.852d6","g":"cea8f3435c3645ab","name":"","rules":[{"t":"set","p":"gameState","pt":"global","to":"playing","tot":"str"},{"t":"set","p":"startTime","pt":"flow","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":580,"wires":[["0f79db62292ae708"]]},{"id":"e660a7ebba2c66fc","type":"change","z":"d0d1f08b.852d6","g":"cea8f3435c3645ab","name":"","rules":[{"t":"set","p":"gameState","pt":"global","to":"stopped","tot":"str"},{"t":"set","p":"elapsedTimeDelta","pt":"global","to":"$globalContext('elapsedTimeDelta') + $millis() - $flowContext('startTime')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":620,"wires":[["a46d74339bbce0f0"]]},{"id":"459866cfcd5c221c","type":"switch","z":"d0d1f08b.852d6","g":"cea8f3435c3645ab","name":"","property":"gameState","propertyType":"global","rules":[{"t":"neq","v":"playing","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":290,"y":580,"wires":[["c1356926517582a4"]]},{"id":"ae0e47ab97117b76","type":"switch","z":"d0d1f08b.852d6","g":"cea8f3435c3645ab","name":"","property":"gameState","propertyType":"global","rules":[{"t":"neq","v":"stopped","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":290,"y":620,"wires":[["e660a7ebba2c66fc"]]},{"id":"17d2fa69aa623b66","type":"change","z":"d0d1f08b.852d6","g":"cea8f3435c3645ab","name":"","rules":[{"t":"set","p":"elapsedTimeDelta","pt":"global","to":"0","tot":"num"},{"t":"set","p":"timeRemaining","pt":"global","to":"gameDuration","tot":"global"},{"t":"set","p":"startTime","pt":"flow","to":"","tot":"date"},{"t":"set","p":"timeElapsed","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":660,"wires":[["7b76d260b7f9a3b5"]]},{"id":"0f79db62292ae708","type":"link out","z":"d0d1f08b.852d6","g":"cea8f3435c3645ab","name":"On Game Start","links":["0ab6be49bb2fe4f0","8a6c51377608f8d6","c98f1c8e80835659","06f202fa8c77cc09"],"x":620,"y":580,"wires":[],"l":true},{"id":"62238c614bee0aa4","type":"comment","z":"d0d1f08b.852d6","g":"cea8f3435c3645ab","name":"On Game Start","info":"","x":660,"y":580,"wires":[]},{"id":"a46d74339bbce0f0","type":"link out","z":"d0d1f08b.852d6","g":"cea8f3435c3645ab","name":"On Game Stop","links":["0ab6be49bb2fe4f0","8a6c51377608f8d6","c98f1c8e80835659","06f202fa8c77cc09"],"x":620,"y":620,"wires":[],"l":true},{"id":"2f55873da42260b0","type":"comment","z":"d0d1f08b.852d6","g":"cea8f3435c3645ab","name":"On Game Stop","info":"","x":660,"y":620,"wires":[]},{"id":"7b76d260b7f9a3b5","type":"link out","z":"d0d1f08b.852d6","g":"cea8f3435c3645ab","name":"On Game Reset","links":["0ab6be49bb2fe4f0","8a6c51377608f8d6","c98f1c8e80835659","06f202fa8c77cc09"],"x":620,"y":660,"wires":[],"l":true},{"id":"b7f8becc4dace19a","type":"comment","z":"d0d1f08b.852d6","g":"cea8f3435c3645ab","name":"On Game Reset","info":"","x":660,"y":660,"wires":[]},{"id":"8e760882d7a30677","type":"ui_button","z":"d0d1f08b.852d6","g":"cea8f3435c3645ab","name":"","group":"aee1e653a92d1fd1","order":3,"width":2,"height":1,"passthru":true,"label":"Start","tooltip":"","color":"","bgcolor":"green","className":"","icon":"fa-play","payload":"{\"msg\":{\"payload\":\"gamestart\",\"timeout\":600,\"warning\":30}}","payloadType":"json","topic":"/game","topicType":"str","x":170,"y":580,"wires":[["459866cfcd5c221c"]]},{"id":"5295ce3f99c68af3","type":"function","z":"d0d1f08b.852d6","g":"270d93035d70dfb4","name":"Update Timer","func":"// Retrieve current state of global timer variables\nvar gameState = global.get(\"gameState\") || 'playing';\nvar gameDuration = global.get(\"gameDuration\") || 0;\nvar elapsedTimeDelta = global.get(\"elapsedTimeDelta\") || 0;\n// Total time elapsed is duration since the start button was last pressed, + any adjustments\nvar timeElapsed = 0;\nvar startTime = flow.get(\"startTime\") || 0;\n\n// If the game is in progress, update the time passed since start button was last pressed\nif(gameState == \"playing\") {\n    timeElapsed = (Date.now() - startTime);\n}\n\n// We update these even if gameState is not playing, to allow for\n// adjustments to gameDuration or timeElapsed made while game is stopped\nvar timeElapsedAfterAdjustments = timeElapsed + elapsedTimeDelta;\nvar timeRemaining = gameDuration - timeElapsedAfterAdjustments;\n\n// Update the global variable so that it is available to other nodes if required\nglobal.set(\"timeRemaining\", timeRemaining);\n\n// Update the msg to carry string\nmsg.timeElapsed = timeElapsedAfterAdjustments;        \nmsg.timeRemaining = timeRemaining;\n\n// Display status nof this node in the flow\nnode.status({ fill: \"green\", shape: \"dot\", text: timeRemaining });\n\n// Only need to update UI if timeRemaining has changed\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":760,"wires":[["a519f568a2c0e653"]]},{"id":"d9e00a34cf617e57","type":"ui_template","z":"d0d1f08b.852d6","g":"270d93035d70dfb4","group":"aee1e653a92d1fd1","name":"Time Remaining","order":1,"width":10,"height":3,"format":"<md-card-title>\n    <md-card-title-text>\n        <p class=\"md-headline\">Time Remaining</p>\n    </md-card-title-text>\n    <span ng-class=\"'fa fa-clock-o fa-2x'\"></span>\n</md-card-title>\n<md-card-content>\n    <div style=\"text-align:center\">\n        <span class=\"value\" style=\"color:{{msg.timeColour}}; font-size:3em;\">\n            {{msg.formattedTimeRemaining}}\n        </span>\n    </div>\n</md-card-content>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":false,"templateScope":"local","className":"","x":810,"y":760,"wires":[[]]},{"id":"a519f568a2c0e653","type":"function","z":"d0d1f08b.852d6","g":"270d93035d70dfb4","name":"Format Time for Dashboard Display","func":"// Create formattedTime in hh:mm:ss\nvar t = msg.timeElapsed / 1000; //ms\nvar h = Math.floor(t / 3600);\nvar m = Math.floor(t % 3600 / 60);\nvar s = Math.floor(t % 3600 % 60);\nmsg.formattedTimeElapsed = (\"0\" + h).slice(-2) + \":\" + (\"0\" + m).slice(-2) + \":\" + (\"0\" + s).slice(-2);\n\nvar t2 = msg.timeRemaining / 1000; //ms\nvar h2 = Math.floor(t2 / 3600);\nvar m2 = Math.floor(t2 % 3600 / 60);\nvar s2 = Math.floor(t2 % 3600 % 60);\nmsg.formattedTimeRemaining = (\"0\" + h2).slice(-2) + \":\" + (\"0\" + m2).slice(-2) + \":\" + (\"0\" + s2).slice(-2);\n\nvar t3 = global.get(\"gameDuration\") / 1000; //ms\nvar h3 = Math.floor(t3 / 3600);\nvar m3 = Math.floor(t3 % 3600 / 60);\nvar s3 = Math.floor(t3 % 3600 % 60);\nmsg.formattedGameDuration = (\"0\" + h3).slice(-2) + \":\" + (\"0\" + m3).slice(-2) + \":\" + (\"0\" + s3).slice(-2);\n\n// Set timeColour depending on current gamestate and time remaining\nvar gameState = global.get(\"gameState\");\nif (gameState == \"playing\") {\n    if (msg.timeRemaining < 60000) { msg.timeColour = \"red\"; }\n    else { msg.timeColour = \"green\"; }\n}\nelse { msg.timeColour = \"gray\"; }\n\n// Update the editor node\nnode.status({ fill: msg.timeColour, shape:\"dot\", text:msg.formattedTimeRemaining});\n\n// Forward the message along the flow\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":510,"y":760,"wires":[["d9e00a34cf617e57","fd949f6d8b7f9d45","e093af3928e7721c"]]},{"id":"0ab6be49bb2fe4f0","type":"link in","z":"d0d1f08b.852d6","g":"270d93035d70dfb4","name":"Update Timer","links":["0f79db62292ae708","199f47632ae769ef","70e48462392b85de","79a1d1ba4ba18fd9","7b76d260b7f9a3b5","87c90e2eca491353","9accb42fabe46185","9ebcecc36f259624","a46d74339bbce0f0","abac51d8cb2e8e3f","cd16fc65a29dd5df","ee9b22434b631897","bf88fca95a6fa119","89d262742b166217","8d145ec3c697d961","dc0109a5c42e460c","c51aabc55b3481cf","6652aad9241d8ef1","893b67ca973ca0b7","b8a7e97e03b17b07","ae6b6c92c0197dd5"],"x":200,"y":760,"wires":[["5295ce3f99c68af3"]],"l":true},{"id":"519eb0c6384cf8b8","type":"ui_button","z":"d0d1f08b.852d6","g":"270d93035d70dfb4","name":"","group":"aee1e653a92d1fd1","order":12,"width":0,"height":0,"passthru":true,"label":"1min","tooltip":"","color":"","bgcolor":"grey","className":"","icon":"fa-plus","payload":"{\"msg\":{\"payload\":\"add1\",\"timeout\":60,\"warning\":30}}","payloadType":"json","topic":"/game","topicType":"str","x":170,"y":880,"wires":[["961f83f8bf9700a8"]]},{"id":"94aa1a83548682f3","type":"ui_button","z":"d0d1f08b.852d6","g":"270d93035d70dfb4","name":"","group":"aee1e653a92d1fd1","order":13,"width":0,"height":0,"passthru":true,"label":"1min","tooltip":"","color":"","bgcolor":"gray","className":"","icon":"fa-minus","payload":"{\"msg\":{\"payload\":\"deduct1\",\"timeout\":60,\"warning\":30}}","payloadType":"json","topic":"/game","topicType":"str","x":170,"y":920,"wires":[["4898182651f5e575"]]},{"id":"961f83f8bf9700a8","type":"change","z":"d0d1f08b.852d6","g":"270d93035d70dfb4","name":"","rules":[{"t":"set","p":"gameDuration","pt":"global","to":"$globalContext('gameDuration') + (1000 * 60)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":880,"wires":[["cd16fc65a29dd5df"]]},{"id":"4898182651f5e575","type":"change","z":"d0d1f08b.852d6","g":"270d93035d70dfb4","name":"","rules":[{"t":"set","p":"gameDuration","pt":"global","to":"$globalContext('gameDuration') - (1000 * 60)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":920,"wires":[["cd16fc65a29dd5df"]]},{"id":"cd16fc65a29dd5df","type":"link out","z":"d0d1f08b.852d6","g":"270d93035d70dfb4","name":"On Time Adjust","mode":"link","links":["0ab6be49bb2fe4f0"],"x":620,"y":940,"wires":[],"l":true},{"id":"fd949f6d8b7f9d45","type":"ui_text","z":"d0d1f08b.852d6","g":"270d93035d70dfb4","group":"aee1e653a92d1fd1","order":10,"width":2,"height":1,"name":"Game Duration","label":"Duration","format":"{{msg.formattedGameDuration}}","layout":"col-center","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":800,"y":840,"wires":[]},{"id":"40bd9b60297be2df","type":"change","z":"d0d1f08b.852d6","d":true,"g":"270d93035d70dfb4","name":"","rules":[{"t":"set","p":"elapsedTimeDelta","pt":"global","to":"$globalContext('elapsedTimeDelta') + (5000 * 60)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":960,"wires":[["cd16fc65a29dd5df"]]},{"id":"b1c2bf165c352f70","type":"ui_button","z":"d0d1f08b.852d6","d":true,"g":"270d93035d70dfb4","name":"","group":"aee1e653a92d1fd1","order":14,"width":0,"height":0,"passthru":true,"label":"+5min","tooltip":"","color":"","bgcolor":"#999999","className":"","icon":"fa-plus","payload":"{\"msg\":{\"payload\":\"add5\",\"timeout\":600,\"warning\":30}}","payloadType":"json","topic":"/game","topicType":"str","x":170,"y":960,"wires":[["40bd9b60297be2df"]]},{"id":"913a942b4ab05f35","type":"change","z":"d0d1f08b.852d6","d":true,"g":"270d93035d70dfb4","name":"","rules":[{"t":"set","p":"elapsedTimeDelta","pt":"global","to":"$globalContext('elapsedTimeDelta') - (5000 * 60)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":1000,"wires":[["cd16fc65a29dd5df"]]},{"id":"38973c3b3b6dd2a3","type":"ui_button","z":"d0d1f08b.852d6","d":true,"g":"270d93035d70dfb4","name":"","group":"aee1e653a92d1fd1","order":15,"width":0,"height":0,"passthru":true,"label":"-5min","tooltip":"","color":"","bgcolor":"#999999","className":"","icon":"fa-minus","payload":"{\"msg\":{\"payload\":\"deduct5\",\"timeout\":600,\"warning\":30}}","payloadType":"json","topic":"/game","topicType":"str","x":170,"y":1000,"wires":[["913a942b4ab05f35"]]},{"id":"e093af3928e7721c","type":"ui_text","z":"d0d1f08b.852d6","g":"270d93035d70dfb4","group":"aee1e653a92d1fd1","order":9,"width":2,"height":1,"name":"Time Elapsed","label":"Elapsed","format":"{{msg.formattedTimeElapsed}}","layout":"col-center","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":800,"y":800,"wires":[]},{"id":"2f2b823079377403","type":"comment","z":"d0d1f08b.852d6","g":"270d93035d70dfb4","name":"Adjustments to game duration or time taken","info":"","x":290,"y":840,"wires":[]},{"id":"8226d97f4f9c01d8","type":"ui_template","z":"d0d1f08b.852d6","g":"00cdff5efba53c36","group":"2167d545401575ce","name":"CSS-style overrides","order":10,"width":0,"height":0,"format":"<style>\n    /* Don't let title expand */\n    md-card md-card-title {\n        flex: 0 0 auto !important;\n    }\n\n    /* Don't show scrollbars */\n    .nr-dashboard-template {\n        overflow-y: hidden !important;\n    }\n\n    /* Set the background color to black */\n    body,\n    md-content {\n        background-color: black !important;\n        color: white !important;\n        /* Ensures text remains visible */\n    }\n</style>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":false,"templateScope":"global","className":"","x":920,"y":400,"wires":[[]],"info":"CSS Style overrides to the Node-RED Dark theme.\n\nFrom the Dashboard node information panel (View->Dashboard), select\n - Site: Options -> Node-RED theme everywhere\n - Theme: Style -> Dark"},{"id":"e79245e48c3e36b9","type":"ui_button","z":"d0d1f08b.852d6","d":true,"name":"","group":"aee1e653a92d1fd1","order":21,"width":0,"height":0,"passthru":false,"label":"Door Hint","tooltip":"","color":"","bgcolor":"red","className":"","icon":"","payload":"show_door","payloadType":"str","topic":"topic","topicType":"msg","x":160,"y":1080,"wires":[["44e526358f6ecbbe"]]},{"id":"44e526358f6ecbbe","type":"function","z":"d0d1f08b.852d6","d":true,"name":"function 6","func":"let messages = [];\n\nif (msg.payload === 'show_door') {\n    messages.push({ topic: \"hint\", payload: \"door\" });\n}\nelse if (msg.payload === 'show_empty') {\n    messages.push({ topic: \"hint\", payload: \"empty\" });\n}\n\n// Ensure the buttons update properly\nmessages.push({ topic: \"door_button\", payload: (msg.payload === 'show_door') ? 'green' : 'red' });\nmessages.push({ topic: \"empty_button\", payload: (msg.payload === 'show_empty') ? 'green' : 'red' });\n\nreturn messages;\n","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":880,"y":1260,"wires":[["efad2e9433da1dd4"]]},{"id":"efad2e9433da1dd4","type":"ui_template","z":"d0d1f08b.852d6","d":true,"group":"f01094a877433a7e","name":"","order":6,"width":"0","height":"0","format":"<style>\n    /* Full-page styling */\n    body {\n        background-color: black;\n        color: white;\n        text-align: center;\n        font-family: 'Courier New', monospace;\n    }\n\n    /* Digital clock styling */\n    #clock {\n        font-size: 3em;\n        font-weight: bold;\n        letter-spacing: 5px;\n        text-shadow: 2px 2px 5px rgba(255, 255, 255, 0.5);\n        margin-top: 50px;\n    }\n\n    /* Container to center content */\n    .hintContainer {\n        display: none;\n        margin-top: 20px;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n    }\n\n    /* Larger images */\n    .hintImage {\n        width: 85%;\n        max-width: 950px;\n        /* Ensures it doesnâ€™t get too large on big screens */\n        border: 5px solid white;\n        border-radius: 10px;\n        box-shadow: 0px 0px 20px rgba(255, 255, 255, 0.5);\n        cursor: pointer;\n    }\n\n    /* Hint text styling */\n    .hintText {\n        font-size: 2em;\n        font-weight: bold;\n        margin-top: 10px;\n        text-shadow: 2px 2px 5px rgba(255, 255, 255, 0.5);\n    }\n\n    /* Empty display styling */\n    #emptyDisplayContainer {\n        display: none;\n        justify-content: center;\n        align-items: center;\n        margin-top: 0px;\n    }\n\n    #emptyDisplay {\n        width: 110%;\n        max-width: 1300px;\n    }\n</style>\n\n<div>\n    <!-- Always visible clock -->\n    <h2 id=\"clock\"></h2>\n\n    <!-- Door Hint Section -->\n    <div id=\"doorContainer\" class=\"hintContainer\">\n        <img id=\"doorImage\" src=\"/door.png\" class=\"hintImage\" onclick=\"showHint('doorText')\">\n        <p id=\"doorText\" class=\"hintText\" style=\"display: none;\">Open the door</p>\n    </div>\n\n    <!-- Empty Display Section -->\n    <div id=\"emptyDisplayContainer\">\n        <img id=\"emptyDisplay\" src=\"/larger-white-background.png\">\n    </div>\n\n    <script>\n        // Clock display logic\n        function updateClock() {\n            let now = new Date();\n            document.getElementById('clock').innerText = now.toLocaleTimeString();\n        }\n        setInterval(updateClock, 1000);\n        updateClock();\n\n        // Node-RED event listener to show images when messages are received\n        (function(scope) {\n            scope.$watch('msg.payload', function(newVal) {\n                console.log(\"New Payload Received: \", newVal); // Debugging log\n\n                // Reset all displays first\n                document.getElementById('doorContainer').style.display = 'none';\n                document.getElementById('emptyDisplayContainer').style.display = 'none';\n\n                // Show the selected hint\n                if (newVal === \"door\") {\n                    document.getElementById('doorContainer').style.display = 'flex';\n                } else if (newVal === \"empty\") {\n                    document.getElementById('emptyDisplayContainer').style.display = 'flex';\n                }\n            });\n        })(scope);\n\n        // Function to show hint text when images are clicked\n        function showHint(hintId) {\n            document.getElementById(hintId).style.display = 'block';\n        }\n    </script>\n</div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":1200,"y":1260,"wires":[[]]},{"id":"4e863b4eb3f6ef32","type":"ui_button","z":"d0d1f08b.852d6","d":true,"name":"","group":"2167d545401575ce","order":24,"width":0,"height":0,"passthru":false,"label":"Map Hint","tooltip":"","color":"","bgcolor":"red","className":"","icon":"","payload":"show_map","payloadType":"str","topic":"topic","topicType":"msg","x":320,"y":1080,"wires":[["44e526358f6ecbbe"]]},{"id":"a9019638bd9ec6a1","type":"ui_button","z":"d0d1f08b.852d6","d":true,"name":"","group":"aee1e653a92d1fd1","order":20,"width":0,"height":0,"passthru":false,"label":"Empty Display","tooltip":"","color":"","bgcolor":"red","className":"","icon":"","payload":"show_empty","payloadType":"str","topic":"topic","topicType":"msg","x":520,"y":1080,"wires":[["44e526358f6ecbbe"]]},{"id":"654dcb13ee175179","type":"ui_dropdown","z":"d0d1f08b.852d6","d":true,"name":"","label":"Hint [Room 3]","tooltip":"","place":"Select option","group":"aee1e653a92d1fd1","order":17,"width":10,"height":1,"passthru":true,"multiple":false,"options":[{"label":"show door","value":"show_door","type":"str"},{"label":"empty display","value":"show_empty","type":"str"}],"payload":"","topic":"topic","topicType":"msg","className":"","x":200,"y":1260,"wires":[["650e8d44d5f68048"]]},{"id":"650e8d44d5f68048","type":"change","z":"d0d1f08b.852d6","d":true,"name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"topic","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":1260,"wires":[["44e526358f6ecbbe"]]},{"id":"bc891028730e186d","type":"comment","z":"d0d1f08b.852d6","g":"bd0e386cdb796eca","name":"Duration before clearing","info":"","x":440,"y":1380,"wires":[]},{"id":"0add662071fa1eca","type":"comment","z":"d0d1f08b.852d6","g":"bd0e386cdb796eca","name":"Set msg variable from payload","info":"","x":710,"y":1380,"wires":[]},{"id":"d8b11a85b0347666","type":"link out","z":"d0d1f08b.852d6","d":true,"g":"bd0e386cdb796eca","name":"In-Game Text Display Out","mode":"link","links":[],"x":825,"y":1420,"wires":[]},{"id":"344220d20aeeafa1","type":"comment","z":"d0d1f08b.852d6","g":"bd0e386cdb796eca","name":"Predefined Messages","info":"","x":200,"y":1380,"wires":[]},{"id":"23b9a38b46b547f0","type":"comment","z":"d0d1f08b.852d6","g":"bd0e386cdb796eca","name":"Free Text Messages","info":"","x":190,"y":1480,"wires":[]},{"id":"f5e22882a8289493","type":"function","z":"d0d1f08b.852d6","g":"bd0e386cdb796eca","name":"Format Message","func":"var message = msg.payload;\n\nmsg.payload = message;\n\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":430,"y":1420,"wires":[["891471cc064166ab"]]},{"id":"891471cc064166ab","type":"ui_text","z":"d0d1f08b.852d6","g":"bd0e386cdb796eca","group":"caf9164635a35065","order":3,"width":"0","height":"0","name":"","label":"","format":"{{msg.payload}}","layout":"col-center","className":"","style":true,"font":"Times New Roman,Times,serif","fontSize":"60","color":"#ff0000","x":650,"y":1420,"wires":[]},{"id":"a31091c872606750","type":"ui_text_input","z":"d0d1f08b.852d6","g":"bd0e386cdb796eca","name":"","label":"Type custom hint:","tooltip":"","group":"aee1e653a92d1fd1","order":18,"width":10,"height":1,"passthru":true,"mode":"text","delay":"0","topic":"","sendOnBlur":true,"className":"","topicType":"str","x":190,"y":1540,"wires":[["f5e22882a8289493"]]},{"id":"45b43830d7870532","type":"ui_dropdown","z":"d0d1f08b.852d6","g":"bd0e386cdb796eca","name":"Select Hint","label":"Select Hint(text)","tooltip":"","place":"","group":"aee1e653a92d1fd1","order":19,"width":0,"height":0,"passthru":true,"multiple":false,"options":[{"label":"Cat Hint","value":"the cat","type":"str"},{"label":"Dog Hint","value":"dog","type":"str"},{"label":"Reset","value":"   ","type":"str"}],"payload":"","topic":"","topicType":"str","className":"","x":210,"y":1420,"wires":[["f5e22882a8289493"]]},{"id":"d5ce428c87489686","type":"ui_dropdown","z":"d0d1f08b.852d6","name":"","label":"Select Hint","tooltip":"","place":"Select option","group":"aee1e653a92d1fd1","order":16,"width":10,"height":1,"passthru":true,"multiple":false,"options":[{"label":"Door Image","value":"show_door","type":"str"},{"label":"Empty Image","value":"show_empty","type":"str"}],"payload":"","topic":"topic","topicType":"msg","className":"","x":130,"y":1640,"wires":[["d4d49fd7ca3c8150"]]},{"id":"d4d49fd7ca3c8150","type":"function","z":"d0d1f08b.852d6","name":"Set Image","func":"if (msg.payload === 'show_door') {\n    return [{ topic: \"image\", payload: '/door.png' }, { topic: \"image_hint\", payload: 'Open the door' }];\n}\nif (msg.payload === 'show_empty') {\n    return [{ topic: \"image\", payload: '/empty.png' }, { topic: \"image_hint\", payload: 'Empty Display' }];\n}\nreturn [];","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":400,"y":1640,"wires":[["e1a19137ee054797"]]},{"id":"e1a19137ee054797","type":"ui_template","z":"d0d1f08b.852d6","group":"caf9164635a35065","name":"Display Image","order":6,"width":"15","height":"15","format":"<style>\n    body {\n        background-color: black;\n        color: white;\n        text-align: center;\n        font-family: 'Courier New', monospace;\n    }\n    .imageContainer {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n    }\n    .image {\n        width: 80%;\n        max-width: 800px;\n        border: 5px solid white;\n        border-radius: 10px;\n        box-shadow: 0px 0px 15px rgba(255, 255, 255, 0.5);\n    }\n    .hintText {\n        font-size: 1.5em;\n        font-weight: bold;\n        margin-top: 10px;\n        text-shadow: 2px 2px 5px rgba(255, 255, 255, 0.5);\n    }\n</style>\n\n<div>\n    <div id=\"imageContainer\" class=\"imageContainer\">\n        <img id=\"imageHint\" class=\"image\" ng-src=\"{{msg.payload}}\" />\n        <p id=\"hintText\" class=\"hintText\">{{msg.image_hint}}</p>\n    </div>\n</div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":1130,"y":1640,"wires":[[]]},{"id":"9c3f3221bc50f17d","type":"tab","label":"room3","disabled":false,"info":"","env":[]},{"id":"e30b230d1a3c6393","type":"group","z":"9c3f3221bc50f17d","name":"System Events","style":{"label":true},"nodes":["58212df4a5d96e8d","04fd04e80e3ad50d","8bc71e2db3e28e73","9ebcecc36f259624","39776e6b0f8dcad4","fe2a0bee3d7cd7b0"],"x":74,"y":139,"w":472,"h":202},{"id":"99424b63d40cda9f","type":"group","z":"9c3f3221bc50f17d","name":"Configuration","style":{"label":true},"nodes":["5436be5266952fa6","5950821aac4081ce","abac51d8cb2e8e3f"],"x":454,"y":139,"w":512,"h":162},{"id":"74fc16aed33f325d","type":"group","z":"9c3f3221bc50f17d","name":"Game State","style":{"label":true},"nodes":["7f6854124362dccf","601426b973315cc8","3b5721a5d5e3c29d","6dfee6db1aece071","dfba82c6c8423b1e","8aca647570be7756","09e72802154bceae","79a1d1ba4ba18fd9","5ad702106654b882","9accb42fabe46185","d4c53bf45ae2edee","87c90e2eca491353","8a4c34703b339801","c6b211767e436b8b"],"x":74,"y":359,"w":672,"h":162},{"id":"1e09f7a962b05eef","type":"group","z":"9c3f3221bc50f17d","name":"Dashboad Config","style":{"label":true},"nodes":["3f69988dd01e0947"],"x":774,"y":179,"w":252,"h":82},{"id":"6912eb7eabc7fd3a","type":"group","z":"9c3f3221bc50f17d","name":"Timer","style":{"label":true},"nodes":["3ef3aeb0baf391a0","986315ef6fc47a07","b9ce24e14435ec2b","8a6c51377608f8d6","0ea1e59e95a7648a","aa9d81e5e6d06481","e45d62e07d230baf","0558a340bbf576b1","fae1036a56b0e1a1","d606e14433060229","442bce78c5ed83a6","dc81e938a2be4610","f4e58a0d1a95d0bb","1f8f5dd3996d3163","e82d7f2deeb9c0aa","2db2fd665c3f574a"],"x":74,"y":559,"w":822,"h":322},{"id":"070dff8a7590bd86","type":"group","z":"9c3f3221bc50f17d","name":"Messages and video","style":{"label":true},"nodes":["a4ac4d1539d10f08","6cb12db260ecca4d","2a590d1a46c40395","dc1c86f431b1219a","505e133e58fac1a9","cc3f74ec96a99327","61f4f949f4bd116e","5ace4510b5d5f613","4e0d6253385240a0"],"x":54,"y":1179,"w":792,"h":242},{"id":"7e58d8b85c2e673d","type":"group","z":"9c3f3221bc50f17d","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["123ffe18f7e1eac1"],"x":1094,"y":1059,"w":172,"h":82},{"id":"a99862d85ee8e418","type":"comment","z":"9c3f3221bc50f17d","name":"Main Flow","info":"This flow contains nodes that define the overall configuration and monitor state of the system.\n","x":140,"y":80,"wires":[]},{"id":"b699dc962ac40a34","type":"comment","z":"9c3f3221bc50f17d","name":"This flow requires the node-red-dashboard module, which can be installed from the Pallete Manager","info":"This flow contains nodes that define the overall configuration and monitor state of the system.\n","x":430,"y":120,"wires":[]},{"id":"58212df4a5d96e8d","type":"inject","z":"9c3f3221bc50f17d","g":"e30b230d1a3c6393","name":"Every second","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"1","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":260,"wires":[["9ebcecc36f259624"]]},{"id":"04fd04e80e3ad50d","type":"inject","z":"9c3f3221bc50f17d","g":"e30b230d1a3c6393","name":"On Initialisation","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"Initialise","payload":"","payloadType":"date","x":200,"y":220,"wires":[["8bc71e2db3e28e73"]]},{"id":"8bc71e2db3e28e73","type":"link out","z":"9c3f3221bc50f17d","g":"e30b230d1a3c6393","name":"On System Start","links":["5950821aac4081ce"],"x":380,"y":180,"wires":[],"l":true},{"id":"9ebcecc36f259624","type":"link out","z":"9c3f3221bc50f17d","g":"e30b230d1a3c6393","name":"On Tick","links":["0ab6be49bb2fe4f0","8a6c51377608f8d6"],"x":360,"y":220,"wires":[],"l":true},{"id":"39776e6b0f8dcad4","type":"ui_ui_control","z":"9c3f3221bc50f17d","g":"e30b230d1a3c6393","name":"On Browser Refresh","events":"all","x":200,"y":300,"wires":[["fe2a0bee3d7cd7b0"]]},{"id":"fe2a0bee3d7cd7b0","type":"link out","z":"9c3f3221bc50f17d","g":"e30b230d1a3c6393","name":"On Browser Refresh","links":[],"x":420,"y":300,"wires":[],"l":true},{"id":"5436be5266952fa6","type":"function","z":"9c3f3221bc50f17d","g":"99424b63d40cda9f","name":"Initialise Global Vars","func":"global.set(\"gameState\", \"stopped\");\nglobal.set(\"gameDuration\", 3600000);\nglobal.set(\"elapsedTimeDelta\", 0);\nglobal.set(\"timeElapsed\", 0);\nglobal.set(\"timeRemaining\", 3600000);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":220,"wires":[["abac51d8cb2e8e3f"]]},{"id":"5950821aac4081ce","type":"link in","z":"9c3f3221bc50f17d","g":"99424b63d40cda9f","name":"Initialise Variables","links":["8bc71e2db3e28e73"],"x":650,"y":180,"wires":[["5436be5266952fa6"]],"l":true},{"id":"abac51d8cb2e8e3f","type":"link out","z":"9c3f3221bc50f17d","g":"99424b63d40cda9f","name":"On System Start","links":["0ab6be49bb2fe4f0","8a6c51377608f8d6"],"x":860,"y":260,"wires":[],"l":true},{"id":"7f6854124362dccf","type":"ui_button","z":"9c3f3221bc50f17d","g":"74fc16aed33f325d","name":"","group":"f01a3882fd199f61","order":5,"width":2,"height":1,"passthru":true,"label":"Stop","tooltip":"","color":"","bgcolor":"red","className":"","icon":"fa-stop","payload":"{     \"payload\": \"cancel\" }","payloadType":"json","topic":"/game","topicType":"str","x":150,"y":440,"wires":[["8aca647570be7756"]]},{"id":"601426b973315cc8","type":"ui_button","z":"9c3f3221bc50f17d","g":"74fc16aed33f325d","name":"","group":"f01a3882fd199f61","order":7,"width":2,"height":1,"passthru":true,"label":"Reset","tooltip":"","color":"","bgcolor":"orange","className":"","icon":"fa-fast-backward","payload":"{\"timeout\": 600 }","payloadType":"json","topic":"/game","topicType":"str","x":150,"y":480,"wires":[["09e72802154bceae"]]},{"id":"3b5721a5d5e3c29d","type":"change","z":"9c3f3221bc50f17d","g":"74fc16aed33f325d","name":"","rules":[{"t":"set","p":"gameState","pt":"global","to":"playing","tot":"str"},{"t":"set","p":"startTime","pt":"flow","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":400,"wires":[["79a1d1ba4ba18fd9"]]},{"id":"6dfee6db1aece071","type":"change","z":"9c3f3221bc50f17d","g":"74fc16aed33f325d","name":"","rules":[{"t":"set","p":"gameState","pt":"global","to":"stopped","tot":"str"},{"t":"set","p":"elapsedTimeDelta","pt":"global","to":"$globalContext('elapsedTimeDelta') + $millis() - $flowContext('startTime')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":440,"wires":[["9accb42fabe46185"]]},{"id":"dfba82c6c8423b1e","type":"switch","z":"9c3f3221bc50f17d","g":"74fc16aed33f325d","name":"","property":"gameState","propertyType":"global","rules":[{"t":"neq","v":"playing","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":270,"y":400,"wires":[["3b5721a5d5e3c29d"]]},{"id":"8aca647570be7756","type":"switch","z":"9c3f3221bc50f17d","g":"74fc16aed33f325d","name":"","property":"gameState","propertyType":"global","rules":[{"t":"neq","v":"stopped","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":270,"y":440,"wires":[["6dfee6db1aece071"]]},{"id":"09e72802154bceae","type":"change","z":"9c3f3221bc50f17d","g":"74fc16aed33f325d","name":"","rules":[{"t":"set","p":"elapsedTimeDelta","pt":"global","to":"0","tot":"num"},{"t":"set","p":"timeRemaining","pt":"global","to":"gameDuration","tot":"global"},{"t":"set","p":"startTime","pt":"flow","to":"","tot":"date"},{"t":"set","p":"timeElapsed","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":480,"wires":[["87c90e2eca491353"]]},{"id":"79a1d1ba4ba18fd9","type":"link out","z":"9c3f3221bc50f17d","g":"74fc16aed33f325d","name":"On Game Start","links":["0ab6be49bb2fe4f0","8a6c51377608f8d6"],"x":600,"y":400,"wires":[],"l":true},{"id":"5ad702106654b882","type":"comment","z":"9c3f3221bc50f17d","g":"74fc16aed33f325d","name":"On Game Start","info":"","x":640,"y":400,"wires":[]},{"id":"9accb42fabe46185","type":"link out","z":"9c3f3221bc50f17d","g":"74fc16aed33f325d","name":"On Game Stop","links":["0ab6be49bb2fe4f0","8a6c51377608f8d6"],"x":600,"y":440,"wires":[],"l":true},{"id":"d4c53bf45ae2edee","type":"comment","z":"9c3f3221bc50f17d","g":"74fc16aed33f325d","name":"On Game Stop","info":"","x":640,"y":440,"wires":[]},{"id":"87c90e2eca491353","type":"link out","z":"9c3f3221bc50f17d","g":"74fc16aed33f325d","name":"On Game Reset","links":["0ab6be49bb2fe4f0","8a6c51377608f8d6"],"x":600,"y":480,"wires":[],"l":true},{"id":"8a4c34703b339801","type":"comment","z":"9c3f3221bc50f17d","g":"74fc16aed33f325d","name":"On Game Reset","info":"","x":640,"y":480,"wires":[]},{"id":"c6b211767e436b8b","type":"ui_button","z":"9c3f3221bc50f17d","g":"74fc16aed33f325d","name":"","group":"f01a3882fd199f61","order":3,"width":2,"height":1,"passthru":true,"label":"Start","tooltip":"","color":"","bgcolor":"green","className":"","icon":"fa-play","payload":"{\"msg\":{\"payload\":\"gamestart\",\"timeout\":600,\"warning\":30}}","payloadType":"json","topic":"/game","topicType":"str","x":150,"y":400,"wires":[["dfba82c6c8423b1e"]]},{"id":"3f69988dd01e0947","type":"ui_template","z":"9c3f3221bc50f17d","g":"1e09f7a962b05eef","group":"2167d545401575ce","name":"CSS-style overrides","order":16,"width":0,"height":0,"format":"<style>\n    /* Don't let title expand */\n    md-card md-card-title {\n        flex: 0 0 auto !important;\n    }\n\n    /* Don't show scrollbars */\n    .nr-dashboard-template {\n        overflow-y: hidden !important;\n    }\n\n    /* Set the background color to black */\n    body,\n    md-content {\n        background-color: black !important;\n        color: white !important;\n        /* Ensures text remains visible */\n    }\n</style>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":false,"templateScope":"global","className":"","x":900,"y":220,"wires":[[]],"info":"CSS Style overrides to the Node-RED Dark theme.\n\nFrom the Dashboard node information panel (View->Dashboard), select\n - Site: Options -> Node-RED theme everywhere\n - Theme: Style -> Dark"},{"id":"8c14ac89a36e8e0b","type":"ui_button","z":"9c3f3221bc50f17d","d":true,"name":"","group":"f01a3882fd199f61","order":22,"width":0,"height":0,"passthru":false,"label":"Door Hint","tooltip":"","color":"","bgcolor":"red","className":"","icon":"","payload":"show_door","payloadType":"str","topic":"topic","topicType":"msg","x":140,"y":920,"wires":[["5f6f1a890daa1f34"]]},{"id":"5f6f1a890daa1f34","type":"function","z":"9c3f3221bc50f17d","d":true,"name":"function 7","func":"let messages = [];\n\nif (msg.payload === 'show_door') {\n    messages.push({ topic: \"hint\", payload: \"door\" });\n} \nelse if (msg.payload === 'show_empty') {\n    messages.push({ topic: \"hint\", payload: \"empty\" });\n}\n\n// Ensure the buttons update properly\nmessages.push({ topic: \"door_button\", payload: (msg.payload === 'show_door') ? 'green' : 'red' });\nmessages.push({ topic: \"empty_button\", payload: (msg.payload === 'show_empty') ? 'green' : 'red' });\n\nreturn messages;\n","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":860,"y":1100,"wires":[["123ffe18f7e1eac1"]]},{"id":"123ffe18f7e1eac1","type":"ui_template","z":"9c3f3221bc50f17d","d":true,"g":"7e58d8b85c2e673d","group":"caf9164635a35065","name":"","order":6,"width":"0","height":"0","format":"<style>\n    /* Full-page styling */\n    body {\n        background-color: black;\n        color: white;\n        text-align: center;\n        font-family: 'Courier New', monospace;\n    }\n\n    /* Digital clock styling */\n    #clock {\n        font-size: 3em;\n        font-weight: bold;\n        letter-spacing: 5px;\n        text-shadow: 2px 2px 5px rgba(255, 255, 255, 0.5);\n        margin-top: 50px;\n    }\n\n    /* Container for hints */\n    .hintContainer {\n        display: none;\n        /* Hide all hints by default */\n        margin-top: 20px;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n    }\n\n    /* Hint images */\n    .hintImage {\n        width: 85%;\n        max-width: 950px;\n        border: 5px solid white;\n        border-radius: 10px;\n        box-shadow: 0px 0px 20px rgba(255, 255, 255, 0.5);\n        cursor: pointer;\n    }\n\n    /* Hint text */\n    .hintText {\n        font-size: 2em;\n        font-weight: bold;\n        margin-top: 10px;\n        text-shadow: 2px 2px 5px rgba(255, 255, 255, 0.5);\n    }\n\n    /* Empty display styling */\n    #emptyDisplayContainer {\n        display: none;\n        justify-content: center;\n        align-items: center;\n        margin-top: 20px;\n    }\n\n    #emptyDisplay {\n        width: 110%;\n        max-width: 1300px;\n    }\n</style>\n\n<div>\n    <!-- Always visible clock -->\n    <h2 id=\"clock\"></h2>\n\n    <!-- Door Hint Section -->\n    <div id=\"doorContainer\" class=\"hintContainer\">\n        <img id=\"doorImage\" src=\"/door.png\" class=\"hintImage\" onclick=\"showHint('doorText')\">\n        <p id=\"doorText\" class=\"hintText\" style=\"display: none;\">Open the door</p>\n    </div>\n\n    <!-- Empty Display Section -->\n    <div id=\"emptyDisplayContainer\">\n        <img id=\"emptyDisplay\" src=\"/larger-white-background.png\">\n    </div>\n\n    <script>\n        // Function to update the clock\n        function updateClock() {\n            let now = new Date();\n            document.getElementById('clock').innerText = now.toLocaleTimeString();\n        }\n        setInterval(updateClock, 1000);\n        updateClock();\n\n        // Function to reset all displays before showing the new hint\n        function hideAllHints() {\n            document.getElementById('doorContainer').style.display = 'none';\n            document.getElementById('emptyDisplayContainer').style.display = 'none';\n        }\n\n        // Watch for Node-RED messages to show correct hint\n        (function(scope) {\n            scope.$watch('msg.payload', function(newVal) {\n                console.log(\"New Hint Received: \", newVal); // Debugging log\n\n                hideAllHints(); // Hide everything before updating\n\n                if (newVal === \"door\") {\n                    document.getElementById('doorContainer').style.display = 'flex';\n                } \n                else if (newVal === \"empty\") {\n                    document.getElementById('emptyDisplayContainer').style.display = 'flex';\n                }\n            });\n        })(scope);\n\n        // Function to show hint text when images are clicked\n        function showHint(hintId) {\n            document.getElementById(hintId).style.display = 'block';\n        }\n    </script>\n</div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":1180,"y":1100,"wires":[[]]},{"id":"f409e00e15c5176e","type":"ui_button","z":"9c3f3221bc50f17d","d":true,"name":"","group":"f01a3882fd199f61","order":20,"width":0,"height":0,"passthru":false,"label":"Map Hint","tooltip":"","color":"","bgcolor":"red","className":"","icon":"","payload":"show_map","payloadType":"str","topic":"topic","topicType":"msg","x":300,"y":920,"wires":[["5f6f1a890daa1f34"]]},{"id":"9629980d21ca2cf8","type":"ui_button","z":"9c3f3221bc50f17d","d":true,"name":"","group":"f01a3882fd199f61","order":21,"width":0,"height":0,"passthru":false,"label":"Empty Display","tooltip":"","color":"","bgcolor":"red","className":"","icon":"","payload":"show_empty","payloadType":"str","topic":"topic","topicType":"msg","x":500,"y":920,"wires":[["5f6f1a890daa1f34"]]},{"id":"89f9b9b14304953a","type":"ui_dropdown","z":"9c3f3221bc50f17d","d":true,"name":"","label":"Hint [Room 2]","tooltip":"","place":"Select option","group":"f01a3882fd199f61","order":17,"width":10,"height":1,"passthru":true,"multiple":false,"options":[{"label":"show door","value":"show_door","type":"str"},{"label":"empty display","value":"show_empty","type":"str"}],"payload":"","topic":"topic","topicType":"msg","className":"","x":180,"y":1100,"wires":[["a1bc6c0ab10fdfbe"]]},{"id":"a1bc6c0ab10fdfbe","type":"change","z":"9c3f3221bc50f17d","d":true,"name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"topic","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":1100,"wires":[["5f6f1a890daa1f34"]]},{"id":"3ef3aeb0baf391a0","type":"function","z":"9c3f3221bc50f17d","g":"6912eb7eabc7fd3a","name":"Update Timer","func":"// Retrieve current state of global timer variables\nvar gameState = global.get(\"gameState\") || 'playing';\nvar gameDuration = global.get(\"gameDuration\") || 0;\nvar elapsedTimeDelta = global.get(\"elapsedTimeDelta\") || 0;\n// Total time elapsed is duration since the start button was last pressed, + any adjustments\nvar timeElapsed = 0;\nvar startTime = flow.get(\"startTime\") || 0;\n\n// If the game is in progress, update the time passed since start button was last pressed\nif(gameState == \"playing\") {\n    timeElapsed = (Date.now() - startTime);\n}\n\n// We update these even if gameState is not playing, to allow for\n// adjustments to gameDuration or timeElapsed made while game is stopped\nvar timeElapsedAfterAdjustments = timeElapsed + elapsedTimeDelta;\nvar timeRemaining = gameDuration - timeElapsedAfterAdjustments;\n\n// Update the global variable so that it is available to other nodes if required\nglobal.set(\"timeRemaining\", timeRemaining);\n\n// Update the msg to carry string\nmsg.timeElapsed = timeElapsedAfterAdjustments;        \nmsg.timeRemaining = timeRemaining;\n\n// Display status nof this node in the flow\nnode.status({ fill: \"green\", shape: \"dot\", text: timeRemaining });\n\n// Only need to update UI if timeRemaining has changed\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":240,"y":600,"wires":[["b9ce24e14435ec2b"]]},{"id":"986315ef6fc47a07","type":"ui_template","z":"9c3f3221bc50f17d","g":"6912eb7eabc7fd3a","group":"f01a3882fd199f61","name":"Time Remaining","order":1,"width":10,"height":3,"format":"<md-card-title>\n    <md-card-title-text>\n        <p class=\"md-headline\">Time Remaining</p>\n    </md-card-title-text>\n    <span ng-class=\"'fa fa-clock-o fa-2x'\"></span>\n</md-card-title>\n<md-card-content>\n    <div style=\"text-align:center\">\n        <span class=\"value\" style=\"color:{{msg.timeColour}}; font-size:3em;\">\n            {{msg.formattedTimeRemaining}}\n        </span>\n    </div>\n</md-card-content>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":false,"templateScope":"local","className":"","x":790,"y":600,"wires":[[]]},{"id":"b9ce24e14435ec2b","type":"function","z":"9c3f3221bc50f17d","g":"6912eb7eabc7fd3a","name":"Format Time for Dashboard Display","func":"// Create formattedTime in hh:mm:ss\nvar t = msg.timeElapsed / 1000; //ms\nvar h = Math.floor(t / 3600);\nvar m = Math.floor(t % 3600 / 60);\nvar s = Math.floor(t % 3600 % 60);\nmsg.formattedTimeElapsed = (\"0\" + h).slice(-2) + \":\" + (\"0\" + m).slice(-2) + \":\" + (\"0\" + s).slice(-2);\n\nvar t2 = msg.timeRemaining / 1000; //ms\nvar h2 = Math.floor(t2 / 3600);\nvar m2 = Math.floor(t2 % 3600 / 60);\nvar s2 = Math.floor(t2 % 3600 % 60);\nmsg.formattedTimeRemaining = (\"0\" + h2).slice(-2) + \":\" + (\"0\" + m2).slice(-2) + \":\" + (\"0\" + s2).slice(-2);\n\nvar t3 = global.get(\"gameDuration\") / 1000; //ms\nvar h3 = Math.floor(t3 / 3600);\nvar m3 = Math.floor(t3 % 3600 / 60);\nvar s3 = Math.floor(t3 % 3600 % 60);\nmsg.formattedGameDuration = (\"0\" + h3).slice(-2) + \":\" + (\"0\" + m3).slice(-2) + \":\" + (\"0\" + s3).slice(-2);\n\n// Set timeColour depending on current gamestate and time remaining\nvar gameState = global.get(\"gameState\");\nif (gameState == \"playing\") {\n    if (msg.timeRemaining < 60000) { msg.timeColour = \"red\"; }\n    else { msg.timeColour = \"green\"; }\n}\nelse { msg.timeColour = \"gray\"; }\n\n// Update the editor node\nnode.status({ fill: msg.timeColour, shape:\"dot\", text:msg.formattedTimeRemaining});\n\n// Forward the message along the flow\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":490,"y":600,"wires":[["986315ef6fc47a07","d606e14433060229","e82d7f2deeb9c0aa"]]},{"id":"8a6c51377608f8d6","type":"link in","z":"9c3f3221bc50f17d","g":"6912eb7eabc7fd3a","name":"Update Timer","links":["a46d74339bbce0f0","70e48462392b85de","fae1036a56b0e1a1","199f47632ae769ef","7b76d260b7f9a3b5","0f79db62292ae708","9ebcecc36f259624","abac51d8cb2e8e3f","79a1d1ba4ba18fd9","9accb42fabe46185","87c90e2eca491353"],"x":180,"y":600,"wires":[["3ef3aeb0baf391a0"]],"l":true},{"id":"0ea1e59e95a7648a","type":"ui_button","z":"9c3f3221bc50f17d","g":"6912eb7eabc7fd3a","name":"","group":"f01a3882fd199f61","order":12,"width":0,"height":0,"passthru":true,"label":"5min","tooltip":"","color":"","bgcolor":"grey","className":"","icon":"fa-plus","payload":"{\"msg\":{\"payload\":\"add5\",\"timeout\":600,\"warning\":30}}","payloadType":"json","topic":"/game","topicType":"str","x":150,"y":720,"wires":[["e45d62e07d230baf"]]},{"id":"aa9d81e5e6d06481","type":"ui_button","z":"9c3f3221bc50f17d","g":"6912eb7eabc7fd3a","name":"","group":"f01a3882fd199f61","order":13,"width":0,"height":0,"passthru":true,"label":"5min","tooltip":"","color":"","bgcolor":"gray","className":"","icon":"fa-minus","payload":"{\"msg\":{\"payload\":\"deduct5\",\"timeout\":600,\"warning\":30}}","payloadType":"json","topic":"/game","topicType":"str","x":150,"y":760,"wires":[["0558a340bbf576b1"]]},{"id":"e45d62e07d230baf","type":"change","z":"9c3f3221bc50f17d","g":"6912eb7eabc7fd3a","name":"","rules":[{"t":"set","p":"gameDuration","pt":"global","to":"$globalContext('gameDuration') + (5000 * 60)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":720,"wires":[["fae1036a56b0e1a1"]]},{"id":"0558a340bbf576b1","type":"change","z":"9c3f3221bc50f17d","g":"6912eb7eabc7fd3a","name":"","rules":[{"t":"set","p":"gameDuration","pt":"global","to":"$globalContext('gameDuration') - (5000 * 60)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":760,"wires":[["fae1036a56b0e1a1"]]},{"id":"fae1036a56b0e1a1","type":"link out","z":"9c3f3221bc50f17d","g":"6912eb7eabc7fd3a","name":"On Time Adjust","mode":"link","links":["8a6c51377608f8d6"],"x":600,"y":780,"wires":[],"l":true},{"id":"d606e14433060229","type":"ui_text","z":"9c3f3221bc50f17d","g":"6912eb7eabc7fd3a","group":"f01a3882fd199f61","order":10,"width":2,"height":1,"name":"Game Duration","label":"Duration","format":"{{msg.formattedGameDuration}}","layout":"col-center","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":780,"y":680,"wires":[]},{"id":"442bce78c5ed83a6","type":"change","z":"9c3f3221bc50f17d","d":true,"g":"6912eb7eabc7fd3a","name":"","rules":[{"t":"set","p":"elapsedTimeDelta","pt":"global","to":"$globalContext('elapsedTimeDelta') + (5000 * 60)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":800,"wires":[["fae1036a56b0e1a1"]]},{"id":"dc81e938a2be4610","type":"ui_button","z":"9c3f3221bc50f17d","d":true,"g":"6912eb7eabc7fd3a","name":"","group":"f01a3882fd199f61","order":14,"width":0,"height":0,"passthru":true,"label":"+5min","tooltip":"","color":"","bgcolor":"#999999","className":"","icon":"fa-plus","payload":"{\"msg\":{\"payload\":\"add5\",\"timeout\":600,\"warning\":30}}","payloadType":"json","topic":"/game","topicType":"str","x":150,"y":800,"wires":[["442bce78c5ed83a6"]]},{"id":"f4e58a0d1a95d0bb","type":"change","z":"9c3f3221bc50f17d","d":true,"g":"6912eb7eabc7fd3a","name":"","rules":[{"t":"set","p":"elapsedTimeDelta","pt":"global","to":"$globalContext('elapsedTimeDelta') - (5000 * 60)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":840,"wires":[["fae1036a56b0e1a1"]]},{"id":"1f8f5dd3996d3163","type":"ui_button","z":"9c3f3221bc50f17d","d":true,"g":"6912eb7eabc7fd3a","name":"","group":"f01a3882fd199f61","order":15,"width":0,"height":0,"passthru":true,"label":"-5min","tooltip":"","color":"","bgcolor":"#999999","className":"","icon":"fa-minus","payload":"{\"msg\":{\"payload\":\"deduct5\",\"timeout\":600,\"warning\":30}}","payloadType":"json","topic":"/game","topicType":"str","x":150,"y":840,"wires":[["f4e58a0d1a95d0bb"]]},{"id":"e82d7f2deeb9c0aa","type":"ui_text","z":"9c3f3221bc50f17d","g":"6912eb7eabc7fd3a","group":"f01a3882fd199f61","order":9,"width":2,"height":1,"name":"Time Elapsed","label":"Elapsed","format":"{{msg.formattedTimeElapsed}}","layout":"col-center","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":780,"y":640,"wires":[]},{"id":"2db2fd665c3f574a","type":"comment","z":"9c3f3221bc50f17d","g":"6912eb7eabc7fd3a","name":"Adjustments to game duration or time taken","info":"","x":270,"y":680,"wires":[]},{"id":"a4ac4d1539d10f08","type":"comment","z":"9c3f3221bc50f17d","g":"070dff8a7590bd86","name":"Duration before clearing","info":"","x":420,"y":1220,"wires":[]},{"id":"6cb12db260ecca4d","type":"comment","z":"9c3f3221bc50f17d","g":"070dff8a7590bd86","name":"Set msg variable from payload","info":"","x":690,"y":1220,"wires":[]},{"id":"2a590d1a46c40395","type":"link out","z":"9c3f3221bc50f17d","d":true,"g":"070dff8a7590bd86","name":"In-Game Text Display Out","mode":"link","links":[],"x":805,"y":1260,"wires":[]},{"id":"dc1c86f431b1219a","type":"comment","z":"9c3f3221bc50f17d","g":"070dff8a7590bd86","name":"Predefined Messages","info":"","x":180,"y":1220,"wires":[]},{"id":"505e133e58fac1a9","type":"comment","z":"9c3f3221bc50f17d","g":"070dff8a7590bd86","name":"Free Text Messages","info":"","x":170,"y":1320,"wires":[]},{"id":"cc3f74ec96a99327","type":"function","z":"9c3f3221bc50f17d","g":"070dff8a7590bd86","name":"Format Message","func":"var message = msg.payload;\n\nmsg.payload = message;\n\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":410,"y":1260,"wires":[["61f4f949f4bd116e"]]},{"id":"61f4f949f4bd116e","type":"ui_text","z":"9c3f3221bc50f17d","g":"070dff8a7590bd86","group":"f01094a877433a7e","order":3,"width":"0","height":"0","name":"","label":"","format":"{{msg.payload}}","layout":"col-center","className":"","style":true,"font":"Times New Roman,Times,serif","fontSize":"60","color":"#ff0000","x":630,"y":1260,"wires":[]},{"id":"5ace4510b5d5f613","type":"ui_text_input","z":"9c3f3221bc50f17d","g":"070dff8a7590bd86","name":"","label":"Type custom hint:","tooltip":"","group":"f01a3882fd199f61","order":18,"width":10,"height":1,"passthru":true,"mode":"text","delay":"0","topic":"","sendOnBlur":true,"className":"","topicType":"str","x":170,"y":1380,"wires":[["cc3f74ec96a99327"]]},{"id":"4e0d6253385240a0","type":"ui_dropdown","z":"9c3f3221bc50f17d","g":"070dff8a7590bd86","name":"Select Hint","label":"Select Hint(text)","tooltip":"","place":"","group":"f01a3882fd199f61","order":19,"width":0,"height":0,"passthru":true,"multiple":false,"options":[{"label":"Cat Hint","value":"the cat","type":"str"},{"label":"Dog Hint","value":"dog","type":"str"},{"label":"Reset","value":"   ","type":"str"}],"payload":"","topic":"","topicType":"str","className":"","x":190,"y":1260,"wires":[["cc3f74ec96a99327"]]},{"id":"0324b24431a93165","type":"ui_dropdown","z":"9c3f3221bc50f17d","name":"","label":"Select Hint","tooltip":"","place":"Select option","group":"f01a3882fd199f61","order":16,"width":10,"height":1,"passthru":true,"multiple":false,"options":[{"label":"Door Image","value":"show_door","type":"str"},{"label":"Empty Image","value":"show_empty","type":"str"}],"payload":"","topic":"topic","topicType":"msg","className":"","x":190,"y":1460,"wires":[["386a84b65b11a56d"]]},{"id":"386a84b65b11a56d","type":"function","z":"9c3f3221bc50f17d","name":"Set Image","func":"if (msg.payload === 'show_door') {\n    return [{ topic: \"image\", payload: '/door.png' }, { topic: \"image_hint\", payload: 'Open the door' }];\n}\nif (msg.payload === 'show_empty') {\n    return [{ topic: \"image\", payload: '/empty.png' }, { topic: \"image_hint\", payload: 'Empty Display' }];\n}\nreturn [];","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":460,"y":1460,"wires":[["ec0458b1ddd48a04"]]},{"id":"ec0458b1ddd48a04","type":"ui_template","z":"9c3f3221bc50f17d","group":"f01094a877433a7e","name":"Display Image","order":6,"width":"15","height":"15","format":"<style>\n    body {\n        background-color: black;\n        color: white;\n        text-align: center;\n        font-family: 'Courier New', monospace;\n    }\n    .imageContainer {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n    }\n    .image {\n        width: 80%;\n        max-width: 800px;\n        border: 5px solid white;\n        border-radius: 10px;\n        box-shadow: 0px 0px 15px rgba(255, 255, 255, 0.5);\n    }\n    .hintText {\n        font-size: 1.5em;\n        font-weight: bold;\n        margin-top: 10px;\n        text-shadow: 2px 2px 5px rgba(255, 255, 255, 0.5);\n    }\n</style>\n\n<div>\n    <div id=\"imageContainer\" class=\"imageContainer\">\n        <img id=\"imageHint\" class=\"image\" ng-src=\"{{msg.payload}}\" />\n        <p id=\"hintText\" class=\"hintText\">{{msg.image_hint}}</p>\n    </div>\n</div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":1190,"y":1460,"wires":[[]]},{"id":"6afeb5384dfbb483","type":"tab","label":"room4","disabled":false,"info":"","env":[]},{"id":"161409899f710f4b","type":"group","z":"6afeb5384dfbb483","name":"System Events","style":{"label":true},"nodes":["b066b096fc3e0ea2","b7d03d5875a16247","e72e0d088c311d4c","ee9b22434b631897","94264fd7782f0f4a","a0f75a1492b46a0f"],"x":114,"y":79,"w":472,"h":202},{"id":"eb49fc43f9276b45","type":"group","z":"6afeb5384dfbb483","name":"Configuration","style":{"label":true},"nodes":["759c0ed61e3bab6c","75fe8e993494c553","bf88fca95a6fa119"],"x":494,"y":79,"w":512,"h":162},{"id":"b827ba20ced0b066","type":"group","z":"6afeb5384dfbb483","name":"Game State","style":{"label":true},"nodes":["9e161235bfe53e92","dae23fecc2185a57","3364f262e205a4af","4fe86e2d278989df","26cf6872e954c3ef","10fd07bce73d74a6","e338463dce419409","89d262742b166217","f734eddf3dabea75","8d145ec3c697d961","25a5f93270c54d1b","dc0109a5c42e460c","b5ca050ce6dc6153","2dd4943738f3983e"],"x":114,"y":299,"w":672,"h":162},{"id":"525d5289218b5ba6","type":"group","z":"6afeb5384dfbb483","name":"Dashboad Config","style":{"label":true},"nodes":["f9c76d6d370b9d25"],"x":814,"y":119,"w":252,"h":82},{"id":"b154b882de39cc9e","type":"group","z":"6afeb5384dfbb483","name":"Timer","style":{"label":true},"nodes":["8417129b3549edc6","0bebd71f84e22ca5","844273e89a42286d","c98f1c8e80835659","e0e24a2ce8089da3","4683ae88b014d479","571c51680a305680","c47f08fce903bf43","d5503d4918a6824a","cdc3fb8355b104c6","707e1398d8e0fc23","e60e92076e94da68","74ef81bce6bb4731","5f41583c30a7ca63","ccad5956bdcbe5f5","25a18986799e44cb"],"x":114,"y":499,"w":822,"h":322},{"id":"cbfff51be0935d39","type":"group","z":"6afeb5384dfbb483","name":"Messages and video","style":{"label":true},"nodes":["3b40751ae17da7d5","137abcbdfc59e7d9","f1c54ef0a69da78c","2dea9f1f31b0c7ad","a1d58c08777895f6","ae8da84f9ba7e6bf","ecc9e7b01a73f047","1a50746faeefecb0","5cf705d5d64a7a65"],"x":94,"y":1119,"w":792,"h":242},{"id":"d485b6adf9d5fd6d","type":"group","z":"6afeb5384dfbb483","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["1b053a0659fbe711"],"x":1134,"y":999,"w":172,"h":82},{"id":"4093e57afae83383","type":"ui_button","z":"6afeb5384dfbb483","d":true,"name":"","group":"f01a3882fd199f61","order":22,"width":0,"height":0,"passthru":false,"label":"Door Hint","tooltip":"","color":"","bgcolor":"red","className":"","icon":"","payload":"show_door","payloadType":"str","topic":"topic","topicType":"msg","x":180,"y":860,"wires":[["9f34e7acf74847b5"]]},{"id":"9f34e7acf74847b5","type":"function","z":"6afeb5384dfbb483","d":true,"name":"function 11","func":"let messages = [];\n\nif (msg.payload === 'show_door') {\n    messages.push({ topic: \"hint\", payload: \"door\" });\n} \nelse if (msg.payload === 'show_empty') {\n    messages.push({ topic: \"hint\", payload: \"empty\" });\n}\n\n// Ensure the buttons update properly\nmessages.push({ topic: \"door_button\", payload: (msg.payload === 'show_door') ? 'green' : 'red' });\nmessages.push({ topic: \"empty_button\", payload: (msg.payload === 'show_empty') ? 'green' : 'red' });\n\nreturn messages;\n","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":900,"y":1040,"wires":[["1b053a0659fbe711"]]},{"id":"cc24b40bb80c083d","type":"ui_button","z":"6afeb5384dfbb483","d":true,"name":"","group":"f01a3882fd199f61","order":20,"width":0,"height":0,"passthru":false,"label":"Map Hint","tooltip":"","color":"","bgcolor":"red","className":"","icon":"","payload":"show_map","payloadType":"str","topic":"topic","topicType":"msg","x":340,"y":860,"wires":[["9f34e7acf74847b5"]]},{"id":"68bccfc7ca60235c","type":"ui_button","z":"6afeb5384dfbb483","d":true,"name":"","group":"f01a3882fd199f61","order":21,"width":0,"height":0,"passthru":false,"label":"Empty Display","tooltip":"","color":"","bgcolor":"red","className":"","icon":"","payload":"show_empty","payloadType":"str","topic":"topic","topicType":"msg","x":540,"y":860,"wires":[["9f34e7acf74847b5"]]},{"id":"f58fb0d8daaf7737","type":"ui_dropdown","z":"6afeb5384dfbb483","d":true,"name":"","label":"Hint [Room 2]","tooltip":"","place":"Select option","group":"f01a3882fd199f61","order":17,"width":10,"height":1,"passthru":true,"multiple":false,"options":[{"label":"show door","value":"show_door","type":"str"},{"label":"empty display","value":"show_empty","type":"str"}],"payload":"","topic":"topic","topicType":"msg","className":"","x":220,"y":1040,"wires":[["5789753db1bd5798"]]},{"id":"5789753db1bd5798","type":"change","z":"6afeb5384dfbb483","d":true,"name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"topic","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":1040,"wires":[["9f34e7acf74847b5"]]},{"id":"7410789849d527cd","type":"ui_dropdown","z":"6afeb5384dfbb483","name":"","label":"Select Hint","tooltip":"","place":"Select option","group":"87ecd5d4865a70ce","order":1,"width":6,"height":1,"passthru":true,"multiple":false,"options":[{"label":"Door Image","value":"show_door","type":"str"},{"label":"Empty Image","value":"show_empty","type":"str"}],"payload":"","topic":"topic","topicType":"msg","className":"","x":230,"y":1400,"wires":[["a944b56ea80d8551"]]},{"id":"a944b56ea80d8551","type":"function","z":"6afeb5384dfbb483","name":"Set Image","func":"if (msg.payload === 'show_door') {\n    return [{ topic: \"image\", payload: '/door.png' }, { topic: \"image_hint\", payload: 'Open the door' }];\n}\nif (msg.payload === 'show_empty') {\n    return [{ topic: \"image\", payload: '/empty.png' }, { topic: \"image_hint\", payload: 'Empty Display' }];\n}\nreturn [];","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":500,"y":1400,"wires":[["ef22d8db6cb5f7e3"]]},{"id":"ef22d8db6cb5f7e3","type":"ui_template","z":"6afeb5384dfbb483","group":"0e382e0a91be8365","name":"Display Image","order":6,"width":"15","height":"15","format":"<style>\n    body {\n        background-color: black;\n        color: white;\n        text-align: center;\n        font-family: 'Courier New', monospace;\n    }\n    .imageContainer {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n    }\n    .image {\n        width: 80%;\n        max-width: 800px;\n        border: 5px solid white;\n        border-radius: 10px;\n        box-shadow: 0px 0px 15px rgba(255, 255, 255, 0.5);\n    }\n    .hintText {\n        font-size: 1.5em;\n        font-weight: bold;\n        margin-top: 10px;\n        text-shadow: 2px 2px 5px rgba(255, 255, 255, 0.5);\n    }\n</style>\n\n<div>\n    <div id=\"imageContainer\" class=\"imageContainer\">\n        <img id=\"imageHint\" class=\"image\" ng-src=\"{{msg.payload}}\" />\n        <p id=\"hintText\" class=\"hintText\">{{msg.image_hint}}</p>\n    </div>\n</div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":1230,"y":1400,"wires":[[]]},{"id":"b066b096fc3e0ea2","type":"inject","z":"6afeb5384dfbb483","g":"161409899f710f4b","name":"Every second","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"1","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":240,"y":200,"wires":[["ee9b22434b631897"]]},{"id":"b7d03d5875a16247","type":"inject","z":"6afeb5384dfbb483","g":"161409899f710f4b","name":"On Initialisation","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"Initialise","payload":"","payloadType":"date","x":240,"y":160,"wires":[["e72e0d088c311d4c"]]},{"id":"e72e0d088c311d4c","type":"link out","z":"6afeb5384dfbb483","g":"161409899f710f4b","name":"On System Start","links":["75fe8e993494c553"],"x":420,"y":120,"wires":[],"l":true},{"id":"ee9b22434b631897","type":"link out","z":"6afeb5384dfbb483","g":"161409899f710f4b","name":"On Tick","links":["0ab6be49bb2fe4f0","c98f1c8e80835659"],"x":400,"y":160,"wires":[],"l":true},{"id":"94264fd7782f0f4a","type":"ui_ui_control","z":"6afeb5384dfbb483","g":"161409899f710f4b","name":"On Browser Refresh","events":"all","x":240,"y":240,"wires":[["a0f75a1492b46a0f"]]},{"id":"a0f75a1492b46a0f","type":"link out","z":"6afeb5384dfbb483","g":"161409899f710f4b","name":"On Browser Refresh","links":[],"x":460,"y":240,"wires":[],"l":true},{"id":"759c0ed61e3bab6c","type":"function","z":"6afeb5384dfbb483","g":"eb49fc43f9276b45","name":"Initialise Global Vars","func":"global.set(\"gameState\", \"stopped\");\nglobal.set(\"gameDuration\", 3600000);\nglobal.set(\"elapsedTimeDelta\", 0);\nglobal.set(\"timeElapsed\", 0);\nglobal.set(\"timeRemaining\", 3600000);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":620,"y":160,"wires":[["bf88fca95a6fa119"]]},{"id":"75fe8e993494c553","type":"link in","z":"6afeb5384dfbb483","g":"eb49fc43f9276b45","name":"Initialise Variables","links":["e72e0d088c311d4c"],"x":690,"y":120,"wires":[["759c0ed61e3bab6c"]],"l":true},{"id":"bf88fca95a6fa119","type":"link out","z":"6afeb5384dfbb483","g":"eb49fc43f9276b45","name":"On System Start","links":["0ab6be49bb2fe4f0","c98f1c8e80835659"],"x":900,"y":200,"wires":[],"l":true},{"id":"9e161235bfe53e92","type":"ui_button","z":"6afeb5384dfbb483","g":"b827ba20ced0b066","name":"","group":"ff5893abbdf5e9c2","order":3,"width":2,"height":1,"passthru":true,"label":"Stop","tooltip":"","color":"","bgcolor":"red","className":"","icon":"fa-stop","payload":"{     \"payload\": \"cancel\" }","payloadType":"json","topic":"/game","topicType":"str","x":190,"y":380,"wires":[["10fd07bce73d74a6"]]},{"id":"dae23fecc2185a57","type":"ui_button","z":"6afeb5384dfbb483","g":"b827ba20ced0b066","name":"","group":"ff5893abbdf5e9c2","order":4,"width":2,"height":1,"passthru":true,"label":"Reset","tooltip":"","color":"","bgcolor":"orange","className":"","icon":"fa-fast-backward","payload":"{\"timeout\": 600 }","payloadType":"json","topic":"/game","topicType":"str","x":190,"y":420,"wires":[["e338463dce419409"]]},{"id":"3364f262e205a4af","type":"change","z":"6afeb5384dfbb483","g":"b827ba20ced0b066","name":"","rules":[{"t":"set","p":"gameState","pt":"global","to":"playing","tot":"str"},{"t":"set","p":"startTime","pt":"flow","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":460,"y":340,"wires":[["89d262742b166217"]]},{"id":"4fe86e2d278989df","type":"change","z":"6afeb5384dfbb483","g":"b827ba20ced0b066","name":"","rules":[{"t":"set","p":"gameState","pt":"global","to":"stopped","tot":"str"},{"t":"set","p":"elapsedTimeDelta","pt":"global","to":"$globalContext('elapsedTimeDelta') + $millis() - $flowContext('startTime')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":460,"y":380,"wires":[["8d145ec3c697d961"]]},{"id":"26cf6872e954c3ef","type":"switch","z":"6afeb5384dfbb483","g":"b827ba20ced0b066","name":"","property":"gameState","propertyType":"global","rules":[{"t":"neq","v":"playing","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":310,"y":340,"wires":[["3364f262e205a4af"]]},{"id":"10fd07bce73d74a6","type":"switch","z":"6afeb5384dfbb483","g":"b827ba20ced0b066","name":"","property":"gameState","propertyType":"global","rules":[{"t":"neq","v":"stopped","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":310,"y":380,"wires":[["4fe86e2d278989df"]]},{"id":"e338463dce419409","type":"change","z":"6afeb5384dfbb483","g":"b827ba20ced0b066","name":"","rules":[{"t":"set","p":"elapsedTimeDelta","pt":"global","to":"0","tot":"num"},{"t":"set","p":"timeRemaining","pt":"global","to":"gameDuration","tot":"global"},{"t":"set","p":"startTime","pt":"flow","to":"","tot":"date"},{"t":"set","p":"timeElapsed","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":400,"y":420,"wires":[["dc0109a5c42e460c"]]},{"id":"89d262742b166217","type":"link out","z":"6afeb5384dfbb483","g":"b827ba20ced0b066","name":"On Game Start","links":["0ab6be49bb2fe4f0","c98f1c8e80835659"],"x":640,"y":340,"wires":[],"l":true},{"id":"f734eddf3dabea75","type":"comment","z":"6afeb5384dfbb483","g":"b827ba20ced0b066","name":"On Game Start","info":"","x":680,"y":340,"wires":[]},{"id":"8d145ec3c697d961","type":"link out","z":"6afeb5384dfbb483","g":"b827ba20ced0b066","name":"On Game Stop","links":["0ab6be49bb2fe4f0","c98f1c8e80835659"],"x":640,"y":380,"wires":[],"l":true},{"id":"25a5f93270c54d1b","type":"comment","z":"6afeb5384dfbb483","g":"b827ba20ced0b066","name":"On Game Stop","info":"","x":680,"y":380,"wires":[]},{"id":"dc0109a5c42e460c","type":"link out","z":"6afeb5384dfbb483","g":"b827ba20ced0b066","name":"On Game Reset","links":["0ab6be49bb2fe4f0","c98f1c8e80835659"],"x":640,"y":420,"wires":[],"l":true},{"id":"b5ca050ce6dc6153","type":"comment","z":"6afeb5384dfbb483","g":"b827ba20ced0b066","name":"On Game Reset","info":"","x":680,"y":420,"wires":[]},{"id":"2dd4943738f3983e","type":"ui_button","z":"6afeb5384dfbb483","g":"b827ba20ced0b066","name":"","group":"ff5893abbdf5e9c2","order":2,"width":2,"height":1,"passthru":true,"label":"Start","tooltip":"","color":"","bgcolor":"green","className":"","icon":"fa-play","payload":"{\"msg\":{\"payload\":\"gamestart\",\"timeout\":600,\"warning\":30}}","payloadType":"json","topic":"/game","topicType":"str","x":190,"y":340,"wires":[["26cf6872e954c3ef"]]},{"id":"f9c76d6d370b9d25","type":"ui_template","z":"6afeb5384dfbb483","g":"525d5289218b5ba6","group":"2167d545401575ce","name":"CSS-style overrides","order":16,"width":0,"height":0,"format":"<style>\n    /* Don't let title expand */\n    md-card md-card-title {\n        flex: 0 0 auto !important;\n    }\n\n    /* Don't show scrollbars */\n    .nr-dashboard-template {\n        overflow-y: hidden !important;\n    }\n\n    /* Set the background color to black */\n    body,\n    md-content {\n        background-color: black !important;\n        color: white !important;\n        /* Ensures text remains visible */\n    }\n</style>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":false,"templateScope":"global","className":"","x":940,"y":160,"wires":[[]],"info":"CSS Style overrides to the Node-RED Dark theme.\n\nFrom the Dashboard node information panel (View->Dashboard), select\n - Site: Options -> Node-RED theme everywhere\n - Theme: Style -> Dark"},{"id":"8417129b3549edc6","type":"function","z":"6afeb5384dfbb483","g":"b154b882de39cc9e","name":"Update Timer","func":"// Retrieve current state of global timer variables\nvar gameState = global.get(\"gameState\") || 'playing';\nvar gameDuration = global.get(\"gameDuration\") || 0;\nvar elapsedTimeDelta = global.get(\"elapsedTimeDelta\") || 0;\n// Total time elapsed is duration since the start button was last pressed, + any adjustments\nvar timeElapsed = 0;\nvar startTime = flow.get(\"startTime\") || 0;\n\n// If the game is in progress, update the time passed since start button was last pressed\nif(gameState == \"playing\") {\n    timeElapsed = (Date.now() - startTime);\n}\n\n// We update these even if gameState is not playing, to allow for\n// adjustments to gameDuration or timeElapsed made while game is stopped\nvar timeElapsedAfterAdjustments = timeElapsed + elapsedTimeDelta;\nvar timeRemaining = gameDuration - timeElapsedAfterAdjustments;\n\n// Update the global variable so that it is available to other nodes if required\nglobal.set(\"timeRemaining\", timeRemaining);\n\n// Update the msg to carry string\nmsg.timeElapsed = timeElapsedAfterAdjustments;        \nmsg.timeRemaining = timeRemaining;\n\n// Display status nof this node in the flow\nnode.status({ fill: \"green\", shape: \"dot\", text: timeRemaining });\n\n// Only need to update UI if timeRemaining has changed\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":540,"wires":[["844273e89a42286d"]]},{"id":"0bebd71f84e22ca5","type":"ui_template","z":"6afeb5384dfbb483","g":"b154b882de39cc9e","group":"ff5893abbdf5e9c2","name":"Time Remaining","order":1,"width":6,"height":3,"format":"<md-card-title>\n    <md-card-title-text>\n        <p class=\"md-headline\">Time Remaining</p>\n    </md-card-title-text>\n    <span ng-class=\"'fa fa-clock-o fa-2x'\"></span>\n</md-card-title>\n<md-card-content>\n    <div style=\"text-align:center\">\n        <span class=\"value\" style=\"color:{{msg.timeColour}}; font-size:3em;\">\n            {{msg.formattedTimeRemaining}}\n        </span>\n    </div>\n</md-card-content>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":false,"templateScope":"local","className":"","x":830,"y":540,"wires":[[]]},{"id":"844273e89a42286d","type":"function","z":"6afeb5384dfbb483","g":"b154b882de39cc9e","name":"Format Time for Dashboard Display","func":"// Create formattedTime in hh:mm:ss\nvar t = msg.timeElapsed / 1000; //ms\nvar h = Math.floor(t / 3600);\nvar m = Math.floor(t % 3600 / 60);\nvar s = Math.floor(t % 3600 % 60);\nmsg.formattedTimeElapsed = (\"0\" + h).slice(-2) + \":\" + (\"0\" + m).slice(-2) + \":\" + (\"0\" + s).slice(-2);\n\nvar t2 = msg.timeRemaining / 1000; //ms\nvar h2 = Math.floor(t2 / 3600);\nvar m2 = Math.floor(t2 % 3600 / 60);\nvar s2 = Math.floor(t2 % 3600 % 60);\nmsg.formattedTimeRemaining = (\"0\" + h2).slice(-2) + \":\" + (\"0\" + m2).slice(-2) + \":\" + (\"0\" + s2).slice(-2);\n\nvar t3 = global.get(\"gameDuration\") / 1000; //ms\nvar h3 = Math.floor(t3 / 3600);\nvar m3 = Math.floor(t3 % 3600 / 60);\nvar s3 = Math.floor(t3 % 3600 % 60);\nmsg.formattedGameDuration = (\"0\" + h3).slice(-2) + \":\" + (\"0\" + m3).slice(-2) + \":\" + (\"0\" + s3).slice(-2);\n\n// Set timeColour depending on current gamestate and time remaining\nvar gameState = global.get(\"gameState\");\nif (gameState == \"playing\") {\n    if (msg.timeRemaining < 60000) { msg.timeColour = \"red\"; }\n    else { msg.timeColour = \"green\"; }\n}\nelse { msg.timeColour = \"gray\"; }\n\n// Update the editor node\nnode.status({ fill: msg.timeColour, shape:\"dot\", text:msg.formattedTimeRemaining});\n\n// Forward the message along the flow\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":530,"y":540,"wires":[["0bebd71f84e22ca5","cdc3fb8355b104c6","ccad5956bdcbe5f5"]]},{"id":"c98f1c8e80835659","type":"link in","z":"6afeb5384dfbb483","g":"b154b882de39cc9e","name":"Update Timer","links":["a46d74339bbce0f0","70e48462392b85de","d5503d4918a6824a","199f47632ae769ef","7b76d260b7f9a3b5","0f79db62292ae708","ee9b22434b631897","bf88fca95a6fa119","89d262742b166217","8d145ec3c697d961","dc0109a5c42e460c"],"x":220,"y":540,"wires":[["8417129b3549edc6"]],"l":true},{"id":"e0e24a2ce8089da3","type":"ui_button","z":"6afeb5384dfbb483","g":"b154b882de39cc9e","name":"","group":"ff5893abbdf5e9c2","order":8,"width":0,"height":0,"passthru":true,"label":"5min","tooltip":"","color":"","bgcolor":"grey","className":"","icon":"fa-plus","payload":"{\"msg\":{\"payload\":\"add5\",\"timeout\":600,\"warning\":30}}","payloadType":"json","topic":"/game","topicType":"str","x":190,"y":660,"wires":[["571c51680a305680"]]},{"id":"4683ae88b014d479","type":"ui_button","z":"6afeb5384dfbb483","g":"b154b882de39cc9e","name":"","group":"ff5893abbdf5e9c2","order":9,"width":0,"height":0,"passthru":true,"label":"5min","tooltip":"","color":"","bgcolor":"gray","className":"","icon":"fa-minus","payload":"{\"msg\":{\"payload\":\"deduct5\",\"timeout\":600,\"warning\":30}}","payloadType":"json","topic":"/game","topicType":"str","x":190,"y":700,"wires":[["c47f08fce903bf43"]]},{"id":"571c51680a305680","type":"change","z":"6afeb5384dfbb483","g":"b154b882de39cc9e","name":"","rules":[{"t":"set","p":"gameDuration","pt":"global","to":"$globalContext('gameDuration') + (5000 * 60)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":390,"y":660,"wires":[["d5503d4918a6824a"]]},{"id":"c47f08fce903bf43","type":"change","z":"6afeb5384dfbb483","g":"b154b882de39cc9e","name":"","rules":[{"t":"set","p":"gameDuration","pt":"global","to":"$globalContext('gameDuration') - (5000 * 60)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":390,"y":700,"wires":[["d5503d4918a6824a"]]},{"id":"d5503d4918a6824a","type":"link out","z":"6afeb5384dfbb483","g":"b154b882de39cc9e","name":"On Time Adjust","mode":"link","links":["c98f1c8e80835659"],"x":640,"y":720,"wires":[],"l":true},{"id":"cdc3fb8355b104c6","type":"ui_text","z":"6afeb5384dfbb483","g":"b154b882de39cc9e","group":"ff5893abbdf5e9c2","order":6,"width":2,"height":1,"name":"Game Duration","label":"Duration","format":"{{msg.formattedGameDuration}}","layout":"col-center","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":820,"y":620,"wires":[]},{"id":"707e1398d8e0fc23","type":"change","z":"6afeb5384dfbb483","d":true,"g":"b154b882de39cc9e","name":"","rules":[{"t":"set","p":"elapsedTimeDelta","pt":"global","to":"$globalContext('elapsedTimeDelta') + (5000 * 60)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":740,"wires":[["d5503d4918a6824a"]]},{"id":"e60e92076e94da68","type":"ui_button","z":"6afeb5384dfbb483","d":true,"g":"b154b882de39cc9e","name":"","group":"f01a3882fd199f61","order":14,"width":0,"height":0,"passthru":true,"label":"+5min","tooltip":"","color":"","bgcolor":"#999999","className":"","icon":"fa-plus","payload":"{\"msg\":{\"payload\":\"add5\",\"timeout\":600,\"warning\":30}}","payloadType":"json","topic":"/game","topicType":"str","x":190,"y":740,"wires":[["707e1398d8e0fc23"]]},{"id":"74ef81bce6bb4731","type":"change","z":"6afeb5384dfbb483","d":true,"g":"b154b882de39cc9e","name":"","rules":[{"t":"set","p":"elapsedTimeDelta","pt":"global","to":"$globalContext('elapsedTimeDelta') - (5000 * 60)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":780,"wires":[["d5503d4918a6824a"]]},{"id":"5f41583c30a7ca63","type":"ui_button","z":"6afeb5384dfbb483","d":true,"g":"b154b882de39cc9e","name":"","group":"f01a3882fd199f61","order":15,"width":0,"height":0,"passthru":true,"label":"-5min","tooltip":"","color":"","bgcolor":"#999999","className":"","icon":"fa-minus","payload":"{\"msg\":{\"payload\":\"deduct5\",\"timeout\":600,\"warning\":30}}","payloadType":"json","topic":"/game","topicType":"str","x":190,"y":780,"wires":[["74ef81bce6bb4731"]]},{"id":"ccad5956bdcbe5f5","type":"ui_text","z":"6afeb5384dfbb483","g":"b154b882de39cc9e","group":"ff5893abbdf5e9c2","order":5,"width":2,"height":1,"name":"Time Elapsed","label":"Elapsed","format":"{{msg.formattedTimeElapsed}}","layout":"col-center","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":820,"y":580,"wires":[]},{"id":"25a18986799e44cb","type":"comment","z":"6afeb5384dfbb483","g":"b154b882de39cc9e","name":"Adjustments to game duration or time taken","info":"","x":310,"y":620,"wires":[]},{"id":"3b40751ae17da7d5","type":"comment","z":"6afeb5384dfbb483","g":"cbfff51be0935d39","name":"Duration before clearing","info":"","x":460,"y":1160,"wires":[]},{"id":"137abcbdfc59e7d9","type":"comment","z":"6afeb5384dfbb483","g":"cbfff51be0935d39","name":"Set msg variable from payload","info":"","x":730,"y":1160,"wires":[]},{"id":"f1c54ef0a69da78c","type":"link out","z":"6afeb5384dfbb483","d":true,"g":"cbfff51be0935d39","name":"In-Game Text Display Out","mode":"link","links":[],"x":845,"y":1200,"wires":[]},{"id":"2dea9f1f31b0c7ad","type":"comment","z":"6afeb5384dfbb483","g":"cbfff51be0935d39","name":"Predefined Messages","info":"","x":220,"y":1160,"wires":[]},{"id":"a1d58c08777895f6","type":"comment","z":"6afeb5384dfbb483","g":"cbfff51be0935d39","name":"Free Text Messages","info":"","x":210,"y":1260,"wires":[]},{"id":"ae8da84f9ba7e6bf","type":"function","z":"6afeb5384dfbb483","g":"cbfff51be0935d39","name":"Format Message","func":"var message = msg.payload;\n\nmsg.payload = message;\n\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":450,"y":1200,"wires":[["ecc9e7b01a73f047"]]},{"id":"ecc9e7b01a73f047","type":"ui_text","z":"6afeb5384dfbb483","g":"cbfff51be0935d39","group":"0e382e0a91be8365","order":3,"width":"0","height":"0","name":"","label":"","format":"{{msg.payload}}","layout":"col-center","className":"","style":true,"font":"Times New Roman,Times,serif","fontSize":"60","color":"#ff0000","x":670,"y":1200,"wires":[]},{"id":"1a50746faeefecb0","type":"ui_text_input","z":"6afeb5384dfbb483","g":"cbfff51be0935d39","name":"","label":"Type custom hint:","tooltip":"","group":"87ecd5d4865a70ce","order":2,"width":6,"height":1,"passthru":true,"mode":"text","delay":"0","topic":"","sendOnBlur":true,"className":"","topicType":"str","x":210,"y":1320,"wires":[["ae8da84f9ba7e6bf"]]},{"id":"5cf705d5d64a7a65","type":"ui_dropdown","z":"6afeb5384dfbb483","g":"cbfff51be0935d39","name":"Select Hint","label":"Select Hint(text)","tooltip":"","place":"","group":"87ecd5d4865a70ce","order":3,"width":0,"height":0,"passthru":true,"multiple":false,"options":[{"label":"Cat Hint","value":"the cat","type":"str"},{"label":"Dog Hint","value":"dog","type":"str"},{"label":"Reset","value":"   ","type":"str"}],"payload":"","topic":"","topicType":"str","className":"","x":230,"y":1200,"wires":[["ae8da84f9ba7e6bf"]]},{"id":"1b053a0659fbe711","type":"ui_template","z":"6afeb5384dfbb483","d":true,"g":"d485b6adf9d5fd6d","group":"caf9164635a35065","name":"","order":6,"width":"0","height":"0","format":"<style>\n    /* Full-page styling */\n    body {\n        background-color: black;\n        color: white;\n        text-align: center;\n        font-family: 'Courier New', monospace;\n    }\n\n    /* Digital clock styling */\n    #clock {\n        font-size: 3em;\n        font-weight: bold;\n        letter-spacing: 5px;\n        text-shadow: 2px 2px 5px rgba(255, 255, 255, 0.5);\n        margin-top: 50px;\n    }\n\n    /* Container for hints */\n    .hintContainer {\n        display: none;\n        /* Hide all hints by default */\n        margin-top: 20px;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n    }\n\n    /* Hint images */\n    .hintImage {\n        width: 85%;\n        max-width: 950px;\n        border: 5px solid white;\n        border-radius: 10px;\n        box-shadow: 0px 0px 20px rgba(255, 255, 255, 0.5);\n        cursor: pointer;\n    }\n\n    /* Hint text */\n    .hintText {\n        font-size: 2em;\n        font-weight: bold;\n        margin-top: 10px;\n        text-shadow: 2px 2px 5px rgba(255, 255, 255, 0.5);\n    }\n\n    /* Empty display styling */\n    #emptyDisplayContainer {\n        display: none;\n        justify-content: center;\n        align-items: center;\n        margin-top: 20px;\n    }\n\n    #emptyDisplay {\n        width: 110%;\n        max-width: 1300px;\n    }\n</style>\n\n<div>\n    <!-- Always visible clock -->\n    <h2 id=\"clock\"></h2>\n\n    <!-- Door Hint Section -->\n    <div id=\"doorContainer\" class=\"hintContainer\">\n        <img id=\"doorImage\" src=\"/door.png\" class=\"hintImage\" onclick=\"showHint('doorText')\">\n        <p id=\"doorText\" class=\"hintText\" style=\"display: none;\">Open the door</p>\n    </div>\n\n    <!-- Empty Display Section -->\n    <div id=\"emptyDisplayContainer\">\n        <img id=\"emptyDisplay\" src=\"/larger-white-background.png\">\n    </div>\n\n    <script>\n        // Function to update the clock\n        function updateClock() {\n            let now = new Date();\n            document.getElementById('clock').innerText = now.toLocaleTimeString();\n        }\n        setInterval(updateClock, 1000);\n        updateClock();\n\n        // Function to reset all displays before showing the new hint\n        function hideAllHints() {\n            document.getElementById('doorContainer').style.display = 'none';\n            document.getElementById('emptyDisplayContainer').style.display = 'none';\n        }\n\n        // Watch for Node-RED messages to show correct hint\n        (function(scope) {\n            scope.$watch('msg.payload', function(newVal) {\n                console.log(\"New Hint Received: \", newVal); // Debugging log\n\n                hideAllHints(); // Hide everything before updating\n\n                if (newVal === \"door\") {\n                    document.getElementById('doorContainer').style.display = 'flex';\n                } \n                else if (newVal === \"empty\") {\n                    document.getElementById('emptyDisplayContainer').style.display = 'flex';\n                }\n            });\n        })(scope);\n\n        // Function to show hint text when images are clicked\n        function showHint(hintId) {\n            document.getElementById(hintId).style.display = 'block';\n        }\n    </script>\n</div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":1220,"y":1040,"wires":[[]]},{"id":"6a20247796e956f4","type":"tab","label":"room5","disabled":false,"info":"","env":[]},{"id":"749b75d795fa0b7f","type":"group","z":"6a20247796e956f4","name":"System Events","style":{"label":true},"nodes":["4d0946309b4a4800","775deaeea565a0cd","9c7f1efb63146e38","c51aabc55b3481cf","61ad9f28813da0f4","64df6fbe92bc5443"],"x":134,"y":59,"w":472,"h":202},{"id":"ac46e9b89f148e9d","type":"group","z":"6a20247796e956f4","name":"Configuration","style":{"label":true},"nodes":["7ff3447d1f0de5b6","729037f09b3b1a52","6652aad9241d8ef1"],"x":514,"y":59,"w":512,"h":162},{"id":"7ea5d93b3ea41a70","type":"group","z":"6a20247796e956f4","name":"Game State","style":{"label":true},"nodes":["791f8d7a88770af5","3c7e2cf962e60fc4","94527a776920101b","ba61e20657fa0ac7","72ecf6e6ce97e4d4","772ffb3dc1298f67","4071ed7687a0d4b7","893b67ca973ca0b7","562e3e4458aa0a4f","b8a7e97e03b17b07","412020280c6fd6d2","ae6b6c92c0197dd5","c8742a462d2fe091","25ca794e62f3d36b"],"x":134,"y":279,"w":672,"h":162},{"id":"8d8cdab176e87432","type":"group","z":"6a20247796e956f4","name":"Dashboad Config","style":{"label":true},"nodes":["56cdb91a87a55e00"],"x":834,"y":99,"w":252,"h":82},{"id":"de010eca16cc1f38","type":"group","z":"6a20247796e956f4","name":"Timer","style":{"label":true},"nodes":["7293585a0c0baef9","9f340597bb18d428","860e080a56e02dfa","06f202fa8c77cc09","981f7374a0a61156","415a24837fbf5201","7b621ea59376b5bf","9a6619e1d791cd12","3757ed6fb1a582d0","2c3693ef336191ce","0376f0d8f89c2411","222b3941ce3cd302","6f6cdb75484f7f3d","569bd2c3155828c1","fdf0d164aa86240c","dfeb688851b84722"],"x":134,"y":479,"w":822,"h":322},{"id":"11706581c6e38906","type":"group","z":"6a20247796e956f4","name":"Messages and video","style":{"label":true},"nodes":["a7f06007ccc103a9","3eb4f088b12f190e","f6752b6fe63a9e4e","d22b9a732055fdf4","2c9b7f2606e6c8e0","7828d7e27fb03837","ef14fc8a9c961bbb","515ca28959e92be9","963666b72f85dc02"],"x":114,"y":1099,"w":792,"h":242},{"id":"610bcee706d79562","type":"group","z":"6a20247796e956f4","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["95628399a8de2cec"],"x":1154,"y":979,"w":172,"h":82},{"id":"3da17a182b663345","type":"ui_button","z":"6a20247796e956f4","d":true,"name":"","group":"f01a3882fd199f61","order":22,"width":0,"height":0,"passthru":false,"label":"Door Hint","tooltip":"","color":"","bgcolor":"red","className":"","icon":"","payload":"show_door","payloadType":"str","topic":"topic","topicType":"msg","x":200,"y":840,"wires":[["1d476f5f547c3cc2"]]},{"id":"1d476f5f547c3cc2","type":"function","z":"6a20247796e956f4","d":true,"name":"function 13","func":"let messages = [];\n\nif (msg.payload === 'show_door') {\n    messages.push({ topic: \"hint\", payload: \"door\" });\n} \nelse if (msg.payload === 'show_empty') {\n    messages.push({ topic: \"hint\", payload: \"empty\" });\n}\n\n// Ensure the buttons update properly\nmessages.push({ topic: \"door_button\", payload: (msg.payload === 'show_door') ? 'green' : 'red' });\nmessages.push({ topic: \"empty_button\", payload: (msg.payload === 'show_empty') ? 'green' : 'red' });\n\nreturn messages;\n","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":920,"y":1020,"wires":[["95628399a8de2cec"]]},{"id":"fbe362e5a39e062c","type":"ui_button","z":"6a20247796e956f4","d":true,"name":"","group":"f01a3882fd199f61","order":20,"width":0,"height":0,"passthru":false,"label":"Map Hint","tooltip":"","color":"","bgcolor":"red","className":"","icon":"","payload":"show_map","payloadType":"str","topic":"topic","topicType":"msg","x":360,"y":840,"wires":[["1d476f5f547c3cc2"]]},{"id":"78d50b1f24e521b9","type":"ui_button","z":"6a20247796e956f4","d":true,"name":"","group":"f01a3882fd199f61","order":21,"width":0,"height":0,"passthru":false,"label":"Empty Display","tooltip":"","color":"","bgcolor":"red","className":"","icon":"","payload":"show_empty","payloadType":"str","topic":"topic","topicType":"msg","x":560,"y":840,"wires":[["1d476f5f547c3cc2"]]},{"id":"5e5c60a8f7f25a69","type":"ui_dropdown","z":"6a20247796e956f4","d":true,"name":"","label":"Hint [Room 2]","tooltip":"","place":"Select option","group":"f01a3882fd199f61","order":17,"width":10,"height":1,"passthru":true,"multiple":false,"options":[{"label":"show door","value":"show_door","type":"str"},{"label":"empty display","value":"show_empty","type":"str"}],"payload":"","topic":"topic","topicType":"msg","className":"","x":240,"y":1020,"wires":[["b890b922e1191eb3"]]},{"id":"b890b922e1191eb3","type":"change","z":"6a20247796e956f4","d":true,"name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"topic","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":510,"y":1020,"wires":[["1d476f5f547c3cc2"]]},{"id":"685befaf226b3846","type":"ui_dropdown","z":"6a20247796e956f4","name":"","label":"Select Hint","tooltip":"","place":"Select option","group":"d8c719d4ecb8ea30","order":1,"width":6,"height":1,"passthru":true,"multiple":false,"options":[{"label":"Door Image","value":"show_door","type":"str"},{"label":"Empty Image","value":"show_empty","type":"str"}],"payload":"","topic":"topic","topicType":"msg","className":"","x":250,"y":1380,"wires":[["60dca02b766eb0c7"]]},{"id":"60dca02b766eb0c7","type":"function","z":"6a20247796e956f4","name":"Set Image","func":"if (msg.payload === 'show_door') {\n    return [{ topic: \"image\", payload: '/door.png' }, { topic: \"image_hint\", payload: 'Open the door' }];\n}\nif (msg.payload === 'show_empty') {\n    return [{ topic: \"image\", payload: '/empty.png' }, { topic: \"image_hint\", payload: 'Empty Display' }];\n}\nreturn [];","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":520,"y":1380,"wires":[["70e14733265ee786"]]},{"id":"70e14733265ee786","type":"ui_template","z":"6a20247796e956f4","group":"b726180cdfb28bdc","name":"Display Image","order":6,"width":"15","height":"15","format":"<style>\n    body {\n        background-color: black;\n        color: white;\n        text-align: center;\n        font-family: 'Courier New', monospace;\n    }\n    .imageContainer {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n    }\n    .image {\n        width: 80%;\n        max-width: 800px;\n        border: 5px solid white;\n        border-radius: 10px;\n        box-shadow: 0px 0px 15px rgba(255, 255, 255, 0.5);\n    }\n    .hintText {\n        font-size: 1.5em;\n        font-weight: bold;\n        margin-top: 10px;\n        text-shadow: 2px 2px 5px rgba(255, 255, 255, 0.5);\n    }\n</style>\n\n<div>\n    <div id=\"imageContainer\" class=\"imageContainer\">\n        <img id=\"imageHint\" class=\"image\" ng-src=\"{{msg.payload}}\" />\n        <p id=\"hintText\" class=\"hintText\">{{msg.image_hint}}</p>\n    </div>\n</div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":1250,"y":1380,"wires":[[]]},{"id":"4d0946309b4a4800","type":"inject","z":"6a20247796e956f4","g":"749b75d795fa0b7f","name":"Every second","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"1","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":260,"y":180,"wires":[["c51aabc55b3481cf"]]},{"id":"775deaeea565a0cd","type":"inject","z":"6a20247796e956f4","g":"749b75d795fa0b7f","name":"On Initialisation","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"Initialise","payload":"","payloadType":"date","x":260,"y":140,"wires":[["9c7f1efb63146e38"]]},{"id":"9c7f1efb63146e38","type":"link out","z":"6a20247796e956f4","g":"749b75d795fa0b7f","name":"On System Start","links":["729037f09b3b1a52"],"x":440,"y":100,"wires":[],"l":true},{"id":"c51aabc55b3481cf","type":"link out","z":"6a20247796e956f4","g":"749b75d795fa0b7f","name":"On Tick","links":["0ab6be49bb2fe4f0","06f202fa8c77cc09"],"x":420,"y":140,"wires":[],"l":true},{"id":"61ad9f28813da0f4","type":"ui_ui_control","z":"6a20247796e956f4","g":"749b75d795fa0b7f","name":"On Browser Refresh","events":"all","x":260,"y":220,"wires":[["64df6fbe92bc5443"]]},{"id":"64df6fbe92bc5443","type":"link out","z":"6a20247796e956f4","g":"749b75d795fa0b7f","name":"On Browser Refresh","links":[],"x":480,"y":220,"wires":[],"l":true},{"id":"7ff3447d1f0de5b6","type":"function","z":"6a20247796e956f4","g":"ac46e9b89f148e9d","name":"Initialise Global Vars","func":"global.set(\"gameState\", \"stopped\");\nglobal.set(\"gameDuration\", 3600000);\nglobal.set(\"elapsedTimeDelta\", 0);\nglobal.set(\"timeElapsed\", 0);\nglobal.set(\"timeRemaining\", 3600000);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":640,"y":140,"wires":[["6652aad9241d8ef1"]]},{"id":"729037f09b3b1a52","type":"link in","z":"6a20247796e956f4","g":"ac46e9b89f148e9d","name":"Initialise Variables","links":["9c7f1efb63146e38"],"x":710,"y":100,"wires":[["7ff3447d1f0de5b6"]],"l":true},{"id":"6652aad9241d8ef1","type":"link out","z":"6a20247796e956f4","g":"ac46e9b89f148e9d","name":"On System Start","links":["0ab6be49bb2fe4f0","06f202fa8c77cc09"],"x":920,"y":180,"wires":[],"l":true},{"id":"791f8d7a88770af5","type":"ui_button","z":"6a20247796e956f4","g":"7ea5d93b3ea41a70","name":"","group":"9293d956ab8504b4","order":3,"width":2,"height":1,"passthru":true,"label":"Stop","tooltip":"","color":"","bgcolor":"red","className":"","icon":"fa-stop","payload":"{     \"payload\": \"cancel\" }","payloadType":"json","topic":"/game","topicType":"str","x":210,"y":360,"wires":[["772ffb3dc1298f67"]]},{"id":"3c7e2cf962e60fc4","type":"ui_button","z":"6a20247796e956f4","g":"7ea5d93b3ea41a70","name":"","group":"9293d956ab8504b4","order":4,"width":2,"height":1,"passthru":true,"label":"Reset","tooltip":"","color":"","bgcolor":"orange","className":"","icon":"fa-fast-backward","payload":"{\"timeout\": 600 }","payloadType":"json","topic":"/game","topicType":"str","x":210,"y":400,"wires":[["4071ed7687a0d4b7"]]},{"id":"94527a776920101b","type":"change","z":"6a20247796e956f4","g":"7ea5d93b3ea41a70","name":"","rules":[{"t":"set","p":"gameState","pt":"global","to":"playing","tot":"str"},{"t":"set","p":"startTime","pt":"flow","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":480,"y":320,"wires":[["893b67ca973ca0b7"]]},{"id":"ba61e20657fa0ac7","type":"change","z":"6a20247796e956f4","g":"7ea5d93b3ea41a70","name":"","rules":[{"t":"set","p":"gameState","pt":"global","to":"stopped","tot":"str"},{"t":"set","p":"elapsedTimeDelta","pt":"global","to":"$globalContext('elapsedTimeDelta') + $millis() - $flowContext('startTime')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":480,"y":360,"wires":[["b8a7e97e03b17b07"]]},{"id":"72ecf6e6ce97e4d4","type":"switch","z":"6a20247796e956f4","g":"7ea5d93b3ea41a70","name":"","property":"gameState","propertyType":"global","rules":[{"t":"neq","v":"playing","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":330,"y":320,"wires":[["94527a776920101b"]]},{"id":"772ffb3dc1298f67","type":"switch","z":"6a20247796e956f4","g":"7ea5d93b3ea41a70","name":"","property":"gameState","propertyType":"global","rules":[{"t":"neq","v":"stopped","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":330,"y":360,"wires":[["ba61e20657fa0ac7"]]},{"id":"4071ed7687a0d4b7","type":"change","z":"6a20247796e956f4","g":"7ea5d93b3ea41a70","name":"","rules":[{"t":"set","p":"elapsedTimeDelta","pt":"global","to":"0","tot":"num"},{"t":"set","p":"timeRemaining","pt":"global","to":"gameDuration","tot":"global"},{"t":"set","p":"startTime","pt":"flow","to":"","tot":"date"},{"t":"set","p":"timeElapsed","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":400,"wires":[["ae6b6c92c0197dd5"]]},{"id":"893b67ca973ca0b7","type":"link out","z":"6a20247796e956f4","g":"7ea5d93b3ea41a70","name":"On Game Start","links":["0ab6be49bb2fe4f0","06f202fa8c77cc09"],"x":660,"y":320,"wires":[],"l":true},{"id":"562e3e4458aa0a4f","type":"comment","z":"6a20247796e956f4","g":"7ea5d93b3ea41a70","name":"On Game Start","info":"","x":700,"y":320,"wires":[]},{"id":"b8a7e97e03b17b07","type":"link out","z":"6a20247796e956f4","g":"7ea5d93b3ea41a70","name":"On Game Stop","links":["0ab6be49bb2fe4f0","06f202fa8c77cc09"],"x":660,"y":360,"wires":[],"l":true},{"id":"412020280c6fd6d2","type":"comment","z":"6a20247796e956f4","g":"7ea5d93b3ea41a70","name":"On Game Stop","info":"","x":700,"y":360,"wires":[]},{"id":"ae6b6c92c0197dd5","type":"link out","z":"6a20247796e956f4","g":"7ea5d93b3ea41a70","name":"On Game Reset","links":["0ab6be49bb2fe4f0","06f202fa8c77cc09"],"x":660,"y":400,"wires":[],"l":true},{"id":"c8742a462d2fe091","type":"comment","z":"6a20247796e956f4","g":"7ea5d93b3ea41a70","name":"On Game Reset","info":"","x":700,"y":400,"wires":[]},{"id":"25ca794e62f3d36b","type":"ui_button","z":"6a20247796e956f4","g":"7ea5d93b3ea41a70","name":"","group":"9293d956ab8504b4","order":2,"width":2,"height":1,"passthru":true,"label":"Start","tooltip":"","color":"","bgcolor":"green","className":"","icon":"fa-play","payload":"{\"msg\":{\"payload\":\"gamestart\",\"timeout\":600,\"warning\":30}}","payloadType":"json","topic":"/game","topicType":"str","x":210,"y":320,"wires":[["72ecf6e6ce97e4d4"]]},{"id":"56cdb91a87a55e00","type":"ui_template","z":"6a20247796e956f4","g":"8d8cdab176e87432","group":"2167d545401575ce","name":"CSS-style overrides","order":16,"width":0,"height":0,"format":"<style>\n    /* Don't let title expand */\n    md-card md-card-title {\n        flex: 0 0 auto !important;\n    }\n\n    /* Don't show scrollbars */\n    .nr-dashboard-template {\n        overflow-y: hidden !important;\n    }\n\n    /* Set the background color to black */\n    body,\n    md-content {\n        background-color: black !important;\n        color: white !important;\n        /* Ensures text remains visible */\n    }\n</style>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":false,"templateScope":"global","className":"","x":960,"y":140,"wires":[[]],"info":"CSS Style overrides to the Node-RED Dark theme.\n\nFrom the Dashboard node information panel (View->Dashboard), select\n - Site: Options -> Node-RED theme everywhere\n - Theme: Style -> Dark"},{"id":"7293585a0c0baef9","type":"function","z":"6a20247796e956f4","g":"de010eca16cc1f38","name":"Update Timer","func":"// Retrieve current state of global timer variables\nvar gameState = global.get(\"gameState\") || 'playing';\nvar gameDuration = global.get(\"gameDuration\") || 0;\nvar elapsedTimeDelta = global.get(\"elapsedTimeDelta\") || 0;\n// Total time elapsed is duration since the start button was last pressed, + any adjustments\nvar timeElapsed = 0;\nvar startTime = flow.get(\"startTime\") || 0;\n\n// If the game is in progress, update the time passed since start button was last pressed\nif(gameState == \"playing\") {\n    timeElapsed = (Date.now() - startTime);\n}\n\n// We update these even if gameState is not playing, to allow for\n// adjustments to gameDuration or timeElapsed made while game is stopped\nvar timeElapsedAfterAdjustments = timeElapsed + elapsedTimeDelta;\nvar timeRemaining = gameDuration - timeElapsedAfterAdjustments;\n\n// Update the global variable so that it is available to other nodes if required\nglobal.set(\"timeRemaining\", timeRemaining);\n\n// Update the msg to carry string\nmsg.timeElapsed = timeElapsedAfterAdjustments;        \nmsg.timeRemaining = timeRemaining;\n\n// Display status nof this node in the flow\nnode.status({ fill: \"green\", shape: \"dot\", text: timeRemaining });\n\n// Only need to update UI if timeRemaining has changed\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":300,"y":520,"wires":[["860e080a56e02dfa"]]},{"id":"9f340597bb18d428","type":"ui_template","z":"6a20247796e956f4","g":"de010eca16cc1f38","group":"9293d956ab8504b4","name":"Time Remaining","order":1,"width":6,"height":3,"format":"<md-card-title>\n    <md-card-title-text>\n        <p class=\"md-headline\">Time Remaining</p>\n    </md-card-title-text>\n    <span ng-class=\"'fa fa-clock-o fa-2x'\"></span>\n</md-card-title>\n<md-card-content>\n    <div style=\"text-align:center\">\n        <span class=\"value\" style=\"color:{{msg.timeColour}}; font-size:3em;\">\n            {{msg.formattedTimeRemaining}}\n        </span>\n    </div>\n</md-card-content>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":false,"templateScope":"local","className":"","x":850,"y":520,"wires":[[]]},{"id":"860e080a56e02dfa","type":"function","z":"6a20247796e956f4","g":"de010eca16cc1f38","name":"Format Time for Dashboard Display","func":"// Create formattedTime in hh:mm:ss\nvar t = msg.timeElapsed / 1000; //ms\nvar h = Math.floor(t / 3600);\nvar m = Math.floor(t % 3600 / 60);\nvar s = Math.floor(t % 3600 % 60);\nmsg.formattedTimeElapsed = (\"0\" + h).slice(-2) + \":\" + (\"0\" + m).slice(-2) + \":\" + (\"0\" + s).slice(-2);\n\nvar t2 = msg.timeRemaining / 1000; //ms\nvar h2 = Math.floor(t2 / 3600);\nvar m2 = Math.floor(t2 % 3600 / 60);\nvar s2 = Math.floor(t2 % 3600 % 60);\nmsg.formattedTimeRemaining = (\"0\" + h2).slice(-2) + \":\" + (\"0\" + m2).slice(-2) + \":\" + (\"0\" + s2).slice(-2);\n\nvar t3 = global.get(\"gameDuration\") / 1000; //ms\nvar h3 = Math.floor(t3 / 3600);\nvar m3 = Math.floor(t3 % 3600 / 60);\nvar s3 = Math.floor(t3 % 3600 % 60);\nmsg.formattedGameDuration = (\"0\" + h3).slice(-2) + \":\" + (\"0\" + m3).slice(-2) + \":\" + (\"0\" + s3).slice(-2);\n\n// Set timeColour depending on current gamestate and time remaining\nvar gameState = global.get(\"gameState\");\nif (gameState == \"playing\") {\n    if (msg.timeRemaining < 60000) { msg.timeColour = \"red\"; }\n    else { msg.timeColour = \"green\"; }\n}\nelse { msg.timeColour = \"gray\"; }\n\n// Update the editor node\nnode.status({ fill: msg.timeColour, shape:\"dot\", text:msg.formattedTimeRemaining});\n\n// Forward the message along the flow\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":550,"y":520,"wires":[["9f340597bb18d428","2c3693ef336191ce","fdf0d164aa86240c"]]},{"id":"06f202fa8c77cc09","type":"link in","z":"6a20247796e956f4","g":"de010eca16cc1f38","name":"Update Timer","links":["a46d74339bbce0f0","70e48462392b85de","3757ed6fb1a582d0","199f47632ae769ef","7b76d260b7f9a3b5","0f79db62292ae708","c51aabc55b3481cf","6652aad9241d8ef1","893b67ca973ca0b7","b8a7e97e03b17b07","ae6b6c92c0197dd5"],"x":240,"y":520,"wires":[["7293585a0c0baef9"]],"l":true},{"id":"981f7374a0a61156","type":"ui_button","z":"6a20247796e956f4","g":"de010eca16cc1f38","name":"","group":"9293d956ab8504b4","order":8,"width":0,"height":0,"passthru":true,"label":"5min","tooltip":"","color":"","bgcolor":"grey","className":"","icon":"fa-plus","payload":"{\"msg\":{\"payload\":\"add5\",\"timeout\":600,\"warning\":30}}","payloadType":"json","topic":"/game","topicType":"str","x":210,"y":640,"wires":[["7b621ea59376b5bf"]]},{"id":"415a24837fbf5201","type":"ui_button","z":"6a20247796e956f4","g":"de010eca16cc1f38","name":"","group":"9293d956ab8504b4","order":9,"width":0,"height":0,"passthru":true,"label":"5min","tooltip":"","color":"","bgcolor":"gray","className":"","icon":"fa-minus","payload":"{\"msg\":{\"payload\":\"deduct5\",\"timeout\":600,\"warning\":30}}","payloadType":"json","topic":"/game","topicType":"str","x":210,"y":680,"wires":[["9a6619e1d791cd12"]]},{"id":"7b621ea59376b5bf","type":"change","z":"6a20247796e956f4","g":"de010eca16cc1f38","name":"","rules":[{"t":"set","p":"gameDuration","pt":"global","to":"$globalContext('gameDuration') + (5000 * 60)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":640,"wires":[["3757ed6fb1a582d0"]]},{"id":"9a6619e1d791cd12","type":"change","z":"6a20247796e956f4","g":"de010eca16cc1f38","name":"","rules":[{"t":"set","p":"gameDuration","pt":"global","to":"$globalContext('gameDuration') - (5000 * 60)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":680,"wires":[["3757ed6fb1a582d0"]]},{"id":"3757ed6fb1a582d0","type":"link out","z":"6a20247796e956f4","g":"de010eca16cc1f38","name":"On Time Adjust","mode":"link","links":["06f202fa8c77cc09"],"x":660,"y":700,"wires":[],"l":true},{"id":"2c3693ef336191ce","type":"ui_text","z":"6a20247796e956f4","g":"de010eca16cc1f38","group":"9293d956ab8504b4","order":6,"width":2,"height":1,"name":"Game Duration","label":"Duration","format":"{{msg.formattedGameDuration}}","layout":"col-center","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":840,"y":600,"wires":[]},{"id":"0376f0d8f89c2411","type":"change","z":"6a20247796e956f4","d":true,"g":"de010eca16cc1f38","name":"","rules":[{"t":"set","p":"elapsedTimeDelta","pt":"global","to":"$globalContext('elapsedTimeDelta') + (5000 * 60)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":400,"y":720,"wires":[["3757ed6fb1a582d0"]]},{"id":"222b3941ce3cd302","type":"ui_button","z":"6a20247796e956f4","d":true,"g":"de010eca16cc1f38","name":"","group":"f01a3882fd199f61","order":14,"width":0,"height":0,"passthru":true,"label":"+5min","tooltip":"","color":"","bgcolor":"#999999","className":"","icon":"fa-plus","payload":"{\"msg\":{\"payload\":\"add5\",\"timeout\":600,\"warning\":30}}","payloadType":"json","topic":"/game","topicType":"str","x":210,"y":720,"wires":[["0376f0d8f89c2411"]]},{"id":"6f6cdb75484f7f3d","type":"change","z":"6a20247796e956f4","d":true,"g":"de010eca16cc1f38","name":"","rules":[{"t":"set","p":"elapsedTimeDelta","pt":"global","to":"$globalContext('elapsedTimeDelta') - (5000 * 60)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":400,"y":760,"wires":[["3757ed6fb1a582d0"]]},{"id":"569bd2c3155828c1","type":"ui_button","z":"6a20247796e956f4","d":true,"g":"de010eca16cc1f38","name":"","group":"f01a3882fd199f61","order":15,"width":0,"height":0,"passthru":true,"label":"-5min","tooltip":"","color":"","bgcolor":"#999999","className":"","icon":"fa-minus","payload":"{\"msg\":{\"payload\":\"deduct5\",\"timeout\":600,\"warning\":30}}","payloadType":"json","topic":"/game","topicType":"str","x":210,"y":760,"wires":[["6f6cdb75484f7f3d"]]},{"id":"fdf0d164aa86240c","type":"ui_text","z":"6a20247796e956f4","g":"de010eca16cc1f38","group":"9293d956ab8504b4","order":5,"width":2,"height":1,"name":"Time Elapsed","label":"Elapsed","format":"{{msg.formattedTimeElapsed}}","layout":"col-center","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":840,"y":560,"wires":[]},{"id":"dfeb688851b84722","type":"comment","z":"6a20247796e956f4","g":"de010eca16cc1f38","name":"Adjustments to game duration or time taken","info":"","x":330,"y":600,"wires":[]},{"id":"a7f06007ccc103a9","type":"comment","z":"6a20247796e956f4","g":"11706581c6e38906","name":"Duration before clearing","info":"","x":480,"y":1140,"wires":[]},{"id":"3eb4f088b12f190e","type":"comment","z":"6a20247796e956f4","g":"11706581c6e38906","name":"Set msg variable from payload","info":"","x":750,"y":1140,"wires":[]},{"id":"f6752b6fe63a9e4e","type":"link out","z":"6a20247796e956f4","d":true,"g":"11706581c6e38906","name":"In-Game Text Display Out","mode":"link","links":[],"x":865,"y":1180,"wires":[]},{"id":"d22b9a732055fdf4","type":"comment","z":"6a20247796e956f4","g":"11706581c6e38906","name":"Predefined Messages","info":"","x":240,"y":1140,"wires":[]},{"id":"2c9b7f2606e6c8e0","type":"comment","z":"6a20247796e956f4","g":"11706581c6e38906","name":"Free Text Messages","info":"","x":230,"y":1240,"wires":[]},{"id":"7828d7e27fb03837","type":"function","z":"6a20247796e956f4","g":"11706581c6e38906","name":"Format Message","func":"var message = msg.payload;\n\nmsg.payload = message;\n\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":470,"y":1180,"wires":[["ef14fc8a9c961bbb"]]},{"id":"ef14fc8a9c961bbb","type":"ui_text","z":"6a20247796e956f4","g":"11706581c6e38906","group":"b726180cdfb28bdc","order":3,"width":"0","height":"0","name":"","label":"","format":"{{msg.payload}}","layout":"col-center","className":"","style":true,"font":"Times New Roman,Times,serif","fontSize":"60","color":"#ff0000","x":690,"y":1180,"wires":[]},{"id":"515ca28959e92be9","type":"ui_text_input","z":"6a20247796e956f4","g":"11706581c6e38906","name":"","label":"Type custom hint:","tooltip":"","group":"d8c719d4ecb8ea30","order":2,"width":6,"height":1,"passthru":true,"mode":"text","delay":"0","topic":"","sendOnBlur":true,"className":"","topicType":"str","x":230,"y":1300,"wires":[["7828d7e27fb03837"]]},{"id":"963666b72f85dc02","type":"ui_dropdown","z":"6a20247796e956f4","g":"11706581c6e38906","name":"Select Hint","label":"Select Hint(text)","tooltip":"","place":"","group":"d8c719d4ecb8ea30","order":3,"width":0,"height":0,"passthru":true,"multiple":false,"options":[{"label":"Cat Hint","value":"the cat","type":"str"},{"label":"Dog Hint","value":"dog","type":"str"},{"label":"Reset","value":"   ","type":"str"}],"payload":"","topic":"","topicType":"str","className":"","x":250,"y":1180,"wires":[["7828d7e27fb03837"]]},{"id":"95628399a8de2cec","type":"ui_template","z":"6a20247796e956f4","d":true,"g":"610bcee706d79562","group":"caf9164635a35065","name":"","order":6,"width":"0","height":"0","format":"<style>\n    /* Full-page styling */\n    body {\n        background-color: black;\n        color: white;\n        text-align: center;\n        font-family: 'Courier New', monospace;\n    }\n\n    /* Digital clock styling */\n    #clock {\n        font-size: 3em;\n        font-weight: bold;\n        letter-spacing: 5px;\n        text-shadow: 2px 2px 5px rgba(255, 255, 255, 0.5);\n        margin-top: 50px;\n    }\n\n    /* Container for hints */\n    .hintContainer {\n        display: none;\n        /* Hide all hints by default */\n        margin-top: 20px;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n    }\n\n    /* Hint images */\n    .hintImage {\n        width: 85%;\n        max-width: 950px;\n        border: 5px solid white;\n        border-radius: 10px;\n        box-shadow: 0px 0px 20px rgba(255, 255, 255, 0.5);\n        cursor: pointer;\n    }\n\n    /* Hint text */\n    .hintText {\n        font-size: 2em;\n        font-weight: bold;\n        margin-top: 10px;\n        text-shadow: 2px 2px 5px rgba(255, 255, 255, 0.5);\n    }\n\n    /* Empty display styling */\n    #emptyDisplayContainer {\n        display: none;\n        justify-content: center;\n        align-items: center;\n        margin-top: 20px;\n    }\n\n    #emptyDisplay {\n        width: 110%;\n        max-width: 1300px;\n    }\n</style>\n\n<div>\n    <!-- Always visible clock -->\n    <h2 id=\"clock\"></h2>\n\n    <!-- Door Hint Section -->\n    <div id=\"doorContainer\" class=\"hintContainer\">\n        <img id=\"doorImage\" src=\"/door.png\" class=\"hintImage\" onclick=\"showHint('doorText')\">\n        <p id=\"doorText\" class=\"hintText\" style=\"display: none;\">Open the door</p>\n    </div>\n\n    <!-- Empty Display Section -->\n    <div id=\"emptyDisplayContainer\">\n        <img id=\"emptyDisplay\" src=\"/larger-white-background.png\">\n    </div>\n\n    <script>\n        // Function to update the clock\n        function updateClock() {\n            let now = new Date();\n            document.getElementById('clock').innerText = now.toLocaleTimeString();\n        }\n        setInterval(updateClock, 1000);\n        updateClock();\n\n        // Function to reset all displays before showing the new hint\n        function hideAllHints() {\n            document.getElementById('doorContainer').style.display = 'none';\n            document.getElementById('emptyDisplayContainer').style.display = 'none';\n        }\n\n        // Watch for Node-RED messages to show correct hint\n        (function(scope) {\n            scope.$watch('msg.payload', function(newVal) {\n                console.log(\"New Hint Received: \", newVal); // Debugging log\n\n                hideAllHints(); // Hide everything before updating\n\n                if (newVal === \"door\") {\n                    document.getElementById('doorContainer').style.display = 'flex';\n                } \n                else if (newVal === \"empty\") {\n                    document.getElementById('emptyDisplayContainer').style.display = 'flex';\n                }\n            });\n        })(scope);\n\n        // Function to show hint text when images are clicked\n        function showHint(hintId) {\n            document.getElementById(hintId).style.display = 'block';\n        }\n    </script>\n</div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":1240,"y":1020,"wires":[[]]},{"id":"1756c1b5a2b5b615","type":"tab","label":"Flow 1","disabled":false,"info":""},{"id":"d3588780dad6e7bb","type":"group","z":"1756c1b5a2b5b615","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["a0467ab4c33e372d","9efedbef58ed04c1","ac989a6d06fdad92","e7340862b0297569","fecf615c0cc8b22d"],"x":774,"y":1059,"w":172,"h":362},{"id":"9b295d866358257c","type":"group","z":"1756c1b5a2b5b615","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["b324bafb270611d4","6cac6181700491ba","f61efa145533f705","765eb76a9301f5c3","ae55b7a9bf34edc4","acafa93cadd357b8","b78f0dec6a790333"],"x":774,"y":179,"w":212,"h":442},{"id":"b16cd8846545538a","type":"group","z":"1756c1b5a2b5b615","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["3df290a988df3c22","19821ae29b5f857f","327ce91dfae96de2","66f77b50ba5d696b","682998b80d98385d","83dcd3032c356066","9ecc7e01b175fed4"],"x":1254,"y":599,"w":212,"h":462},{"id":"fdc15826e877ec8e","type":"http in","z":"1756c1b5a2b5b615","name":"","url":"/sensor_1","method":"post","upload":false,"swaggerDoc":"","x":140,"y":220,"wires":[["ef3362fbb71432b9","a8846805c8a4d033"]]},{"id":"8027ca131e076eab","type":"http in","z":"1756c1b5a2b5b615","name":"","url":"/sensor_2","method":"post","upload":false,"swaggerDoc":"","x":140,"y":280,"wires":[["ef3362fbb71432b9","920a2c7eafb43189"]]},{"id":"bf071171acf48bb4","type":"http in","z":"1756c1b5a2b5b615","name":"","url":"/sensor_3","method":"post","upload":false,"swaggerDoc":"","x":140,"y":340,"wires":[["ef3362fbb71432b9","127e253f9a1075a7"]]},{"id":"6b4b3223c7df306e","type":"http in","z":"1756c1b5a2b5b615","name":"","url":"/sensor_4","method":"post","upload":false,"swaggerDoc":"","x":140,"y":400,"wires":[["ef3362fbb71432b9","9444a77fa890321d"]]},{"id":"ef3362fbb71432b9","type":"http response","z":"1756c1b5a2b5b615","name":"","statusCode":"","headers":{},"x":130,"y":40,"wires":[]},{"id":"920a2c7eafb43189","type":"json","z":"1756c1b5a2b5b615","name":"Parse JSON","property":"payload","action":"obj","pretty":false,"x":430,"y":280,"wires":[["aaa6b616ca99c65a"]]},{"id":"127e253f9a1075a7","type":"json","z":"1756c1b5a2b5b615","name":"Parse JSON","property":"payload","action":"obj","pretty":false,"x":430,"y":340,"wires":[["3162a29a356ba866"]]},{"id":"9444a77fa890321d","type":"json","z":"1756c1b5a2b5b615","name":"Parse JSON","property":"payload","action":"obj","pretty":false,"x":430,"y":400,"wires":[["a204ead1d0a69901"]]},{"id":"8ff58823f59a775d","type":"function","z":"1756c1b5a2b5b615","name":"Check Value Sensor 1","func":"// Check if the sensor is inactive (ping failed)\nif (msg.payload === false) {\n    msg.payload = { value: \"N/A\" };  // Set sensor status to \"OFF\"\n    return msg;\n}\n\n// If the sensor is responding, check its value\nif (msg.payload && (typeof msg.payload.value !== 'undefined' || typeof msg.payload === 'string')) {\n    return msg;  // Return valid sensor data\n}\n\n// If payload is missing, do nothing (prevents \"?\" from showing)\nreturn null;  // Dropping the message instead of sending \"?\"\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"\nif (msg.payload === undefined || msg.payload.value === null) {\n    // If no data is received or it's explicitly `null` (indicating power off/disconnection)\n    msg.payload = { value: \"N/A\" };  // Set to \"Powered Off\"\n} else {\n    msg.payload = { value: msg.payload.value };  // Keep the valid data if received\n}\nreturn msg;\n\n","libs":[],"x":660,"y":220,"wires":[["b324bafb270611d4","35932f4cc8f668bb"]]},{"id":"a8846805c8a4d033","type":"json","z":"1756c1b5a2b5b615","name":"Parse JSON","property":"payload","action":"obj","pretty":false,"x":430,"y":220,"wires":[["8ff58823f59a775d"]]},{"id":"b324bafb270611d4","type":"ui_text","z":"1756c1b5a2b5b615","g":"9b295d866358257c","group":"31dc3ebf242f4083","order":6,"width":6,"height":1,"name":"Sensor 1 Value","label":"Sensor 1","format":"{{payload.value}}","layout":"row-spread","className":"","style":false,"font":"Lucida Sans Typewriter,Lucida Console,Monaco,monospace","fontSize":"","color":"#000000","x":880,"y":220,"wires":[]},{"id":"aaa6b616ca99c65a","type":"function","z":"1756c1b5a2b5b615","name":"Check Value Sensor 2","func":"// Check if the sensor is inactive (ping failed)\nif (msg.payload === false) {\n    msg.payload = { value: \"N/A\" };  // Set sensor status to \"OFF\"\n    return msg;\n}\n\n// If the sensor is responding, check its value\nif (msg.payload && (typeof msg.payload.value !== 'undefined' || typeof msg.payload === 'string')) {\n    return msg;  // Return valid sensor data\n}\n\n// If payload is missing, do nothing (prevents \"?\" from showing)\nreturn null;  // Dropping the message instead of sending \"?\"\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":280,"wires":[["6cac6181700491ba"]]},{"id":"6cac6181700491ba","type":"ui_text","z":"1756c1b5a2b5b615","g":"9b295d866358257c","group":"31dc3ebf242f4083","order":11,"width":6,"height":1,"name":"Sensor 2 Value","label":"Sensor 2","format":"{{payload.value}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":880,"y":280,"wires":[]},{"id":"3162a29a356ba866","type":"function","z":"1756c1b5a2b5b615","name":"Check Value Sensor 3","func":"// Check if the sensor is inactive (ping failed)\nif (msg.payload === false) {\n    msg.payload = { value: \"N/A\" };  // Set sensor status to \"OFF\"\n    return msg;\n}\n\n// If the sensor is responding, check its value\nif (msg.payload && (typeof msg.payload.value !== 'undefined' || typeof msg.payload === 'string')) {\n    return msg;  // Return valid sensor data\n}\n\n// If payload is missing, do nothing (prevents \"?\" from showing)\nreturn null;  // Dropping the message instead of sending \"?\"\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":340,"wires":[["f61efa145533f705"]]},{"id":"f61efa145533f705","type":"ui_text","z":"1756c1b5a2b5b615","g":"9b295d866358257c","group":"31dc3ebf242f4083","order":12,"width":6,"height":1,"name":"Sensor 3 Value","label":"Sensor 3","format":"{{payload.value}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":880,"y":340,"wires":[]},{"id":"a204ead1d0a69901","type":"function","z":"1756c1b5a2b5b615","name":"Check Value Sensor 4","func":"// Check if the sensor is inactive (ping failed)\nif (msg.payload === false) {\n    msg.payload = { value: \"N/A\" };  // Set sensor status to \"OFF\"\n    return msg;\n}\n\n// If the sensor is responding, check its value\nif (msg.payload && (typeof msg.payload.value !== 'undefined' || typeof msg.payload === 'string')) {\n    return msg;  // Return valid sensor data\n}\n\n// If payload is missing, do nothing (prevents \"?\" from showing)\nreturn null;  // Dropping the message instead of sending \"?\"\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":400,"wires":[["765eb76a9301f5c3"]]},{"id":"765eb76a9301f5c3","type":"ui_text","z":"1756c1b5a2b5b615","g":"9b295d866358257c","group":"31dc3ebf242f4083","order":13,"width":6,"height":1,"name":"Sensor 4 Value","label":"Sensor 4","format":"{{payload.value}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":880,"y":400,"wires":[]},{"id":"32783a64f116b276","type":"http in","z":"1756c1b5a2b5b615","name":"","url":"/R1S05","method":"post","upload":false,"swaggerDoc":"","x":130,"y":460,"wires":[["081ef1e52b8b405d","ef3362fbb71432b9"]]},{"id":"081ef1e52b8b405d","type":"json","z":"1756c1b5a2b5b615","name":"Parse JSON","property":"payload","action":"obj","pretty":false,"x":430,"y":460,"wires":[["b9ee5cb81066bb8c"]]},{"id":"b9ee5cb81066bb8c","type":"function","z":"1756c1b5a2b5b615","name":"Check Value Sensor 5","func":"// Check if the sensor is inactive (ping failed)\nif (msg.payload === false) {\n    msg.payload = { value: \"N/A\" };  // Set sensor status to \"OFF\"\n    return msg;\n}\n\n// If the sensor is responding, check its value\nif (msg.payload && (typeof msg.payload.value !== 'undefined' || typeof msg.payload === 'string')) {\n    return msg;  // Return valid sensor data\n}\n\n// If payload is missing, do nothing (prevents \"?\" from showing)\nreturn null;  // Dropping the message instead of sending \"?\"\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":460,"wires":[["ae55b7a9bf34edc4"]]},{"id":"ae55b7a9bf34edc4","type":"ui_text","z":"1756c1b5a2b5b615","g":"9b295d866358257c","group":"31dc3ebf242f4083","order":14,"width":6,"height":1,"name":"Sensor 7 Value","label":"Sensor 5","format":"{{payload.value}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":880,"y":460,"wires":[]},{"id":"49445afaa904c19a","type":"http in","z":"1756c1b5a2b5b615","name":"","url":"/sensor_6","method":"post","upload":false,"swaggerDoc":"","x":140,"y":520,"wires":[["77554840f0560150","ef3362fbb71432b9"]]},{"id":"77554840f0560150","type":"json","z":"1756c1b5a2b5b615","name":"Parse JSON","property":"payload","action":"obj","pretty":false,"x":430,"y":520,"wires":[["3733510aea33f933"]]},{"id":"3733510aea33f933","type":"function","z":"1756c1b5a2b5b615","name":"Check Value Sensor 6","func":"// Check if the sensor is inactive (ping failed)\nif (msg.payload === false) {\n    msg.payload = { value: \"N/A\" };  // Set sensor status to \"OFF\"\n    return msg;\n}\n\n// If the sensor is responding, check its value\nif (msg.payload && (typeof msg.payload.value !== 'undefined' || typeof msg.payload === 'string')) {\n    return msg;  // Return valid sensor data\n}\n\n// If payload is missing, do nothing (prevents \"?\" from showing)\nreturn null;  // Dropping the message instead of sending \"?\"\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":520,"wires":[["acafa93cadd357b8","aa685330da9c0a81"]]},{"id":"acafa93cadd357b8","type":"ui_text","z":"1756c1b5a2b5b615","g":"9b295d866358257c","group":"","order":15,"width":6,"height":1,"name":"Sensor 5 Value","label":"Sensor 6","format":"{{payload.value}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":880,"y":520,"wires":[]},{"id":"12d682bf48e6f0d1","type":"http in","z":"1756c1b5a2b5b615","name":"","url":"/sensor_7","method":"post","upload":false,"swaggerDoc":"","x":140,"y":580,"wires":[["2138bb618d713988","ef3362fbb71432b9"]]},{"id":"2138bb618d713988","type":"json","z":"1756c1b5a2b5b615","name":"Parse JSON","property":"payload","action":"obj","pretty":false,"x":430,"y":580,"wires":[["c263684e1ce6a333"]]},{"id":"c263684e1ce6a333","type":"function","z":"1756c1b5a2b5b615","name":"Check Value Sensor 7","func":"// Check if the sensor is inactive (ping failed)\nif (msg.payload === false) {\n    msg.payload = { value: \"N/A\" };  // Set sensor status to \"OFF\"\n    return msg;\n}\n\n// If the sensor is responding, check its value\nif (msg.payload && (typeof msg.payload.value !== 'undefined' || typeof msg.payload === 'string')) {\n    return msg;  // Return valid sensor data\n}\n\n// If payload is missing, do nothing (prevents \"?\" from showing)\nreturn null;  // Dropping the message instead of sending \"?\"\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":580,"wires":[["b78f0dec6a790333"]]},{"id":"b78f0dec6a790333","type":"ui_text","z":"1756c1b5a2b5b615","d":true,"g":"9b295d866358257c","group":"31dc3ebf242f4083","order":16,"width":6,"height":1,"name":"Sensor 6 Value","label":"Sensor 6","format":"{{payload.value}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":880,"y":580,"wires":[]},{"id":"bfa2583049147ed1","type":"debug","z":"1756c1b5a2b5b615","name":"debug 210","active":false,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","targetType":"msg","statusVal":"payload","statusType":"auto","x":1390,"y":360,"wires":[]},{"id":"8fa78ac8987fc2c1","type":"debug","z":"1756c1b5a2b5b615","name":"debug 213","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":1390,"y":280,"wires":[]},{"id":"b5757cc2385dc164","type":"http in","z":"1756c1b5a2b5b615","name":"","url":"/sensor_201","method":"post","upload":false,"swaggerDoc":"","x":150,"y":640,"wires":[["554fe9ba7b51abcf","ef3362fbb71432b9"]]},{"id":"554fe9ba7b51abcf","type":"json","z":"1756c1b5a2b5b615","name":"Parse JSON","property":"payload","action":"obj","pretty":false,"x":430,"y":640,"wires":[["a711f013cb557939"]]},{"id":"a711f013cb557939","type":"function","z":"1756c1b5a2b5b615","name":"Check Value Sensor 8","func":"// Check if the sensor is inactive (ping failed)\nif (msg.payload === false) {\n    msg.payload = { value: \"N/A\" };  // Set sensor status to \"OFF\"\n    return msg;\n}\n\n// If the sensor is responding, check its value\nif (msg.payload && (typeof msg.payload.value !== 'undefined' || typeof msg.payload === 'string')) {\n    return msg;  // Return valid sensor data\n}\n\n// If payload is missing, do nothing (prevents \"?\" from showing)\nreturn null;  // Dropping the message instead of sending \"?\"\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":640,"wires":[["3df290a988df3c22"]]},{"id":"3df290a988df3c22","type":"ui_text","z":"1756c1b5a2b5b615","g":"b16cd8846545538a","group":"group_last_pharaoh_sensors","order":1,"width":6,"height":1,"name":"Sensor 8 Value","label":"Sensor 1","format":"{{payload.value}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":1360,"y":640,"wires":[]},{"id":"7426445869ee1ee7","type":"http in","z":"1756c1b5a2b5b615","name":"","url":"/sensor_202","method":"post","upload":false,"swaggerDoc":"","x":150,"y":700,"wires":[["d169c734dee430d7","ef3362fbb71432b9"]]},{"id":"d169c734dee430d7","type":"json","z":"1756c1b5a2b5b615","name":"Parse JSON","property":"payload","action":"obj","pretty":false,"x":430,"y":700,"wires":[["c711d219e432caf5"]]},{"id":"c711d219e432caf5","type":"function","z":"1756c1b5a2b5b615","name":"Check Value Sensor 9","func":"// Check if the sensor is inactive (ping failed)\nif (msg.payload === false) {\n    msg.payload = { value: \"N/A\" };  // Set sensor status to \"OFF\"\n    return msg;\n}\n\n// If the sensor is responding, check its value\nif (msg.payload && (typeof msg.payload.value !== 'undefined' || typeof msg.payload === 'string')) {\n    return msg;  // Return valid sensor data\n}\n\n// If payload is missing, do nothing (prevents \"?\" from showing)\nreturn null;  // Dropping the message instead of sending \"?\"\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":700,"wires":[["19821ae29b5f857f"]]},{"id":"19821ae29b5f857f","type":"ui_text","z":"1756c1b5a2b5b615","g":"b16cd8846545538a","group":"group_last_pharaoh_sensors","order":2,"width":6,"height":1,"name":"Sensor 9 Value","label":"Sensor 2","format":"{{payload.value}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":1360,"y":700,"wires":[]},{"id":"1ec41367cfefc367","type":"http in","z":"1756c1b5a2b5b615","name":"","url":"/sensor_203","method":"post","upload":false,"swaggerDoc":"","x":150,"y":760,"wires":[["0e08ec9d396ef1b2","ef3362fbb71432b9"]]},{"id":"0e08ec9d396ef1b2","type":"json","z":"1756c1b5a2b5b615","name":"Parse JSON","property":"payload","action":"obj","pretty":false,"x":430,"y":760,"wires":[["0599437f057c04e4"]]},{"id":"0599437f057c04e4","type":"function","z":"1756c1b5a2b5b615","name":"Check Value Sensor 10","func":"// Check if the sensor is inactive (ping failed)\nif (msg.payload === false) {\n    msg.payload = { value: \"N/A\" };  // Set sensor status to \"OFF\"\n    return msg;\n}\n\n// If the sensor is responding, check its value\nif (msg.payload && (typeof msg.payload.value !== 'undefined' || typeof msg.payload === 'string')) {\n    return msg;  // Return valid sensor data\n}\n\n// If payload is missing, do nothing (prevents \"?\" from showing)\nreturn null;  // Dropping the message instead of sending \"?\"\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":670,"y":760,"wires":[["327ce91dfae96de2"]]},{"id":"327ce91dfae96de2","type":"ui_text","z":"1756c1b5a2b5b615","g":"b16cd8846545538a","group":"group_last_pharaoh_sensors","order":3,"width":6,"height":1,"name":"Sensor 10 Value","label":"Sensor 3","format":"{{payload.value}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":1360,"y":760,"wires":[]},{"id":"941545a5434c41e4","type":"http in","z":"1756c1b5a2b5b615","d":true,"name":"","url":"/sensor_204","method":"post","upload":false,"swaggerDoc":"","x":150,"y":820,"wires":[["ea4f2acb58e15fde","ef3362fbb71432b9"]]},{"id":"ea4f2acb58e15fde","type":"json","z":"1756c1b5a2b5b615","d":true,"name":"Parse JSON","property":"payload","action":"obj","pretty":false,"x":430,"y":820,"wires":[["a1b30a90f150dfb2"]]},{"id":"a1b30a90f150dfb2","type":"function","z":"1756c1b5a2b5b615","d":true,"name":"Check Value Sensor 11","func":"if (msg.payload && (typeof msg.payload.value !== 'undefined' || typeof msg.payload === 'string')) {\n    return msg;\n} else {\n    msg.payload = { value: 'null' };  // Set payload to \"Not Connected\"\n    return msg;\n}\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":670,"y":820,"wires":[["66f77b50ba5d696b"]]},{"id":"66f77b50ba5d696b","type":"ui_text","z":"1756c1b5a2b5b615","d":true,"g":"b16cd8846545538a","group":"group_last_pharaoh_sensors","order":4,"width":6,"height":1,"name":"Sensor 11","label":"Sensor 4","format":"{{payload.value}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":1340,"y":820,"wires":[]},{"id":"b97fca6402978aae","type":"http in","z":"1756c1b5a2b5b615","name":"","url":"/sensor_205","method":"post","upload":false,"swaggerDoc":"","x":150,"y":880,"wires":[["b18c92cafe552cf2","ef3362fbb71432b9","5d610aa2c0d21315"]]},{"id":"b18c92cafe552cf2","type":"json","z":"1756c1b5a2b5b615","name":"Parse JSON","property":"payload","action":"obj","pretty":false,"x":430,"y":880,"wires":[["6c171123a0b79548"]]},{"id":"6c171123a0b79548","type":"function","z":"1756c1b5a2b5b615","name":"Check Value Sensor 12","func":"// Check if the sensor is inactive (ping failed)\nif (msg.payload === false) {\n    msg.payload = { value: \"N/A\" };  // Set sensor status to \"OFF\"\n    return msg;\n}\n\n// If the sensor is responding, check its value\nif (msg.payload && (typeof msg.payload.value !== 'undefined' || typeof msg.payload === 'string')) {\n    return msg;  // Return valid sensor data\n}\n\n// If payload is missing, do nothing (prevents \"?\" from showing)\nreturn null;  // Dropping the message instead of sending \"?\"\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":670,"y":880,"wires":[["682998b80d98385d"]]},{"id":"682998b80d98385d","type":"ui_text","z":"1756c1b5a2b5b615","d":true,"g":"b16cd8846545538a","group":"group_last_pharaoh_sensors","order":5,"width":6,"height":1,"name":"Sensor 12 Value","label":"Sensor 5","format":"{{payload.value}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":1360,"y":880,"wires":[]},{"id":"070b767737e57b5b","type":"http in","z":"1756c1b5a2b5b615","name":"","url":"/sensor_206","method":"post","upload":false,"swaggerDoc":"","x":150,"y":940,"wires":[["e9655db37f548015","ef3362fbb71432b9"]]},{"id":"e9655db37f548015","type":"json","z":"1756c1b5a2b5b615","name":"Parse JSON","property":"payload","action":"obj","pretty":false,"x":430,"y":940,"wires":[["06abaf4adf3356af"]]},{"id":"06abaf4adf3356af","type":"function","z":"1756c1b5a2b5b615","name":"Check Value Sensor 13","func":"// Check if the sensor is inactive (ping failed)\nif (msg.payload === false) {\n    msg.payload = { value: \"N/A\" };  // Set sensor status to \"OFF\"\n    return msg;\n}\n\n// If the sensor is responding, check its value\nif (msg.payload && (typeof msg.payload.value !== 'undefined' || typeof msg.payload === 'string')) {\n    return msg;  // Return valid sensor data\n}\n\n// If payload is missing, do nothing (prevents \"?\" from showing)\nreturn null;  // Dropping the message instead of sending \"?\"\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":670,"y":940,"wires":[["83dcd3032c356066"]]},{"id":"83dcd3032c356066","type":"ui_text","z":"1756c1b5a2b5b615","g":"b16cd8846545538a","group":"group_last_pharaoh_sensors","order":5,"width":6,"height":1,"name":"Sensor 13 Value","label":"Sensor 4","format":"{{payload.value}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":1360,"y":940,"wires":[]},{"id":"cd3819767976a5d9","type":"http in","z":"1756c1b5a2b5b615","name":"","url":"/sensor_207","method":"post","upload":false,"swaggerDoc":"","x":150,"y":1020,"wires":[["ee9f4f825cd31e2f","ef3362fbb71432b9"]]},{"id":"ee9f4f825cd31e2f","type":"json","z":"1756c1b5a2b5b615","name":"Parse JSON","property":"payload","action":"obj","pretty":false,"x":430,"y":1020,"wires":[["4c6bc8e91be269e2"]]},{"id":"4c6bc8e91be269e2","type":"function","z":"1756c1b5a2b5b615","name":"Check Value Sensor 14","func":"// Check if the sensor is inactive (ping failed)\nif (msg.payload === false) {\n    msg.payload = { value: \"N/A\" };  // Set sensor status to \"OFF\"\n    return msg;\n}\n\n// If the sensor is responding, check its value\nif (msg.payload && (typeof msg.payload.value !== 'undefined' || typeof msg.payload === 'string')) {\n    return msg;  // Return valid sensor data\n}\n\n// If payload is missing, do nothing (prevents \"?\" from showing)\nreturn null;  // Dropping the message instead of sending \"?\"\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":670,"y":1020,"wires":[["9ecc7e01b175fed4"]]},{"id":"9ecc7e01b175fed4","type":"ui_text","z":"1756c1b5a2b5b615","g":"b16cd8846545538a","group":"group_last_pharaoh_sensors","order":6,"width":6,"height":1,"name":"Sensor 14 Value","label":"Sensor 5","format":"{{payload.value}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":1360,"y":1020,"wires":[]},{"id":"75f78a5a3dad2e59","type":"http in","z":"1756c1b5a2b5b615","name":"","url":"/R3S01","method":"post","upload":false,"swaggerDoc":"","x":130,"y":1100,"wires":[["4545ac9060dcb352","ef3362fbb71432b9"]]},{"id":"4545ac9060dcb352","type":"json","z":"1756c1b5a2b5b615","name":"Parse JSON","property":"payload","action":"obj","pretty":false,"x":430,"y":1100,"wires":[["b02b52372a79f40a"]]},{"id":"b02b52372a79f40a","type":"function","z":"1756c1b5a2b5b615","name":"Check Value Sensor 15","func":"// Check if the sensor is inactive (ping failed)\nif (msg.payload === false) {\n    msg.payload = { value: \"N/A\" };  // Set sensor status to \"OFF\"\n    return msg;\n}\n\n// If the sensor is responding, check its value\nif (msg.payload && (typeof msg.payload.value !== 'undefined' || typeof msg.payload === 'string')) {\n    return msg;  // Return valid sensor data\n}\n\n// If payload is missing, do nothing (prevents \"?\" from showing)\nreturn null;  // Dropping the message instead of sending \"?\"\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":670,"y":1100,"wires":[["a0467ab4c33e372d","a3247bc3f5d439b1"]]},{"id":"a0467ab4c33e372d","type":"ui_text","z":"1756c1b5a2b5b615","g":"d3588780dad6e7bb","group":"23151d029672a754","order":7,"width":6,"height":1,"name":"Sensor 1","label":"Sensor 1","format":"{{payload.value}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":860,"y":1100,"wires":[]},{"id":"d10c804f62d71fca","type":"http in","z":"1756c1b5a2b5b615","name":"","url":"/R3S02","method":"post","upload":false,"swaggerDoc":"","x":130,"y":1160,"wires":[["987b93446e7c5817","ef3362fbb71432b9"]]},{"id":"987b93446e7c5817","type":"json","z":"1756c1b5a2b5b615","name":"Parse JSON","property":"payload","action":"obj","pretty":false,"x":430,"y":1160,"wires":[["5298eade2fa85677"]]},{"id":"5298eade2fa85677","type":"function","z":"1756c1b5a2b5b615","name":"Check Value Sensor 16","func":"// Check if the sensor is inactive (ping failed)\nif (msg.payload === false) {\n    msg.payload = { value: \"N/A\" };  // Set sensor status to \"OFF\"\n    return msg;\n}\n\n// If the sensor is responding, check its value\nif (msg.payload && (typeof msg.payload.value !== 'undefined' || typeof msg.payload === 'string')) {\n    return msg;  // Return valid sensor data\n}\n\n// If payload is missing, do nothing (prevents \"?\" from showing)\nreturn null;  // Dropping the message instead of sending \"?\"\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"\nif (msg.payload === undefined || msg.payload.value === null) {\n    // If no data is received or it's explicitly `null` (indicating power off/disconnection)\n    msg.payload = { value: \"N/A\" };  // Set to \"Powered Off\"\n} else {\n    msg.payload = { value: msg.payload.value };  // Keep the valid data if received\n}\nreturn msg;\n\n","libs":[],"x":670,"y":1160,"wires":[["9efedbef58ed04c1"]]},{"id":"9efedbef58ed04c1","type":"ui_text","z":"1756c1b5a2b5b615","g":"d3588780dad6e7bb","group":"23151d029672a754","order":8,"width":6,"height":1,"name":"Sensor 2","label":"Sensor 2","format":"{{payload.value}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":860,"y":1160,"wires":[]},{"id":"6c567c0ccc50e30c","type":"http in","z":"1756c1b5a2b5b615","name":"","url":"/R3S03","method":"post","upload":false,"swaggerDoc":"","x":130,"y":1260,"wires":[["23316111854587bf","ef3362fbb71432b9"]]},{"id":"23316111854587bf","type":"json","z":"1756c1b5a2b5b615","name":"Parse JSON","property":"payload","action":"obj","pretty":false,"x":430,"y":1260,"wires":[["b4013ab339206c55"]]},{"id":"b4013ab339206c55","type":"function","z":"1756c1b5a2b5b615","name":"Check Value Sensor 17","func":"// Check if the sensor is inactive (ping failed)\nif (msg.payload === false) {\n    msg.payload = { value: \"N/A\" };  // Set sensor status to \"OFF\"\n    return msg;\n}\n\n// If the sensor is responding, check its value\nif (msg.payload && (typeof msg.payload.value !== 'undefined' || typeof msg.payload === 'string')) {\n    return msg;  // Return valid sensor data\n}\n\n// If payload is missing, do nothing (prevents \"?\" from showing)\nreturn null;  // Dropping the message instead of sending \"?\"\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"\nif (msg.payload === undefined || msg.payload.value === null) {\n    // If no data is received or it's explicitly `null` (indicating power off/disconnection)\n    msg.payload = { value: \"N/A\" };  // Set to \"Powered Off\"\n} else {\n    msg.payload = { value: msg.payload.value };  // Keep the valid data if received\n}\nreturn msg;\n\n","libs":[],"x":670,"y":1260,"wires":[["ac989a6d06fdad92"]]},{"id":"ac989a6d06fdad92","type":"ui_text","z":"1756c1b5a2b5b615","g":"d3588780dad6e7bb","group":"23151d029672a754","order":9,"width":6,"height":1,"name":"Sensor 3","label":"Sensor 3","format":"{{payload.value}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":860,"y":1260,"wires":[]},{"id":"2274312e879cea7d","type":"http in","z":"1756c1b5a2b5b615","name":"","url":"/R3S04","method":"post","upload":false,"swaggerDoc":"","x":130,"y":1320,"wires":[["a86d8b5dc2dcb9e5","ef3362fbb71432b9"]]},{"id":"a86d8b5dc2dcb9e5","type":"json","z":"1756c1b5a2b5b615","name":"Parse JSON","property":"payload","action":"obj","pretty":false,"x":430,"y":1320,"wires":[["3a8bb0160a08947f"]]},{"id":"3a8bb0160a08947f","type":"function","z":"1756c1b5a2b5b615","name":"Check Value Sensor 18","func":"// Check if the sensor is inactive (ping failed)\nif (msg.payload === false) {\n    msg.payload = { value: \"N/A\" };  // Set sensor status to \"OFF\"\n    return msg;\n}\n\n// If the sensor is responding, check its value\nif (msg.payload && (typeof msg.payload.value !== 'undefined' || typeof msg.payload === 'string')) {\n    return msg;  // Return valid sensor data\n}\n\n// If payload is missing, do nothing (prevents \"?\" from showing)\nreturn null;  // Dropping the message instead of sending \"?\"\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":670,"y":1320,"wires":[[]]},{"id":"e7340862b0297569","type":"ui_text","z":"1756c1b5a2b5b615","d":true,"g":"d3588780dad6e7bb","group":"23151d029672a754","order":10,"width":6,"height":1,"name":"Sensor 4","label":"Sensor 4","format":"{{payload.value}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":860,"y":1320,"wires":[]},{"id":"76866c2fd105ff6e","type":"http in","z":"1756c1b5a2b5b615","name":"","url":"/R3S05","method":"post","upload":false,"swaggerDoc":"","x":130,"y":1380,"wires":[["0229d750e3eca0a1","ef3362fbb71432b9"]]},{"id":"0229d750e3eca0a1","type":"json","z":"1756c1b5a2b5b615","name":"Parse JSON","property":"payload","action":"obj","pretty":false,"x":430,"y":1380,"wires":[["20c0a4e28db2b55e"]]},{"id":"20c0a4e28db2b55e","type":"function","z":"1756c1b5a2b5b615","name":"Check Value Sensor 19","func":"// Check if the sensor is inactive (ping failed)\nif (msg.payload === false) {\n    msg.payload = { value: \"N/A\" };  // Set sensor status to \"OFF\"\n    return msg;\n}\n\n// If the sensor is responding, check its value\nif (msg.payload && (typeof msg.payload.value !== 'undefined' || typeof msg.payload === 'string')) {\n    return msg;  // Return valid sensor data\n}\n\n// If payload is missing, do nothing (prevents \"?\" from showing)\nreturn null;  // Dropping the message instead of sending \"?\"\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"\nif (msg.payload === undefined || msg.payload.value === null) {\n    // If no data is received or it's explicitly `null` (indicating power off/disconnection)\n    msg.payload = { value: \"N/A\" };  // Set to \"Powered Off\"\n} else {\n    msg.payload = { value: msg.payload.value };  // Keep the valid data if received\n}\nreturn msg;\n\n","libs":[],"x":670,"y":1380,"wires":[["fecf615c0cc8b22d","b941b1c7ed2822c8"]]},{"id":"fecf615c0cc8b22d","type":"ui_text","z":"1756c1b5a2b5b615","g":"d3588780dad6e7bb","group":"23151d029672a754","order":11,"width":6,"height":1,"name":"Sensor 5","label":"Sensor 4","format":"{{payload.value}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":860,"y":1380,"wires":[]},{"id":"a3247bc3f5d439b1","type":"debug","z":"1756c1b5a2b5b615","name":"debug 214","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1310,"y":1300,"wires":[]},{"id":"5d610aa2c0d21315","type":"debug","z":"1756c1b5a2b5b615","name":"debug 217","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":1570,"y":840,"wires":[]},{"id":"35932f4cc8f668bb","type":"debug","z":"1756c1b5a2b5b615","name":"debug 218","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":940,"y":140,"wires":[]},{"id":"46f50691e57f72e6","type":"ping","z":"1756c1b5a2b5b615","protocol":"Automatic","mode":"timed","name":"","host":"192.168.1.101","timer":"3","inputs":0,"x":1090,"y":220,"wires":[["3439de1a80830383","8ff58823f59a775d"]]},{"id":"3439de1a80830383","type":"debug","z":"1756c1b5a2b5b615","name":"debug 222","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":930,"y":80,"wires":[]},{"id":"aa685330da9c0a81","type":"debug","z":"1756c1b5a2b5b615","name":"debug 227","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1390,"y":320,"wires":[]},{"id":"e03b1501e81e8f4c","type":"ping","z":"1756c1b5a2b5b615","protocol":"Automatic","mode":"timed","name":"","host":"192.168.1.102","timer":"3","inputs":0,"x":1090,"y":280,"wires":[["aaa6b616ca99c65a"]]},{"id":"4915cd03633255eb","type":"ping","z":"1756c1b5a2b5b615","protocol":"Automatic","mode":"timed","name":"","host":"192.168.1.103","timer":"3","inputs":0,"x":1090,"y":340,"wires":[["3162a29a356ba866"]]},{"id":"3e805ffeec6a1d60","type":"ping","z":"1756c1b5a2b5b615","protocol":"Automatic","mode":"timed","name":"","host":"192.168.1.104","timer":"3","inputs":0,"x":1090,"y":400,"wires":[["a204ead1d0a69901"]]},{"id":"cacde7d5ceb40fee","type":"ping","z":"1756c1b5a2b5b615","protocol":"Automatic","mode":"timed","name":"","host":"192.168.1.105","timer":"3","inputs":0,"x":1090,"y":460,"wires":[["b9ee5cb81066bb8c"]]},{"id":"d3062e257ac52474","type":"ping","z":"1756c1b5a2b5b615","protocol":"Automatic","mode":"timed","name":"","host":"192.168.1.106","timer":"3","inputs":0,"x":1090,"y":520,"wires":[["3733510aea33f933"]]},{"id":"88173ff010dc65c2","type":"ping","z":"1756c1b5a2b5b615","protocol":"Automatic","mode":"timed","name":"","host":"192.168.1.151","timer":"3","inputs":0,"x":1090,"y":660,"wires":[[]]},{"id":"f84ec1372ad4622e","type":"ping","z":"1756c1b5a2b5b615","protocol":"Automatic","mode":"timed","name":"","host":"192.168.1.152","timer":"3","inputs":0,"x":1090,"y":720,"wires":[[]]},{"id":"b2ed5370d072dce4","type":"ping","z":"1756c1b5a2b5b615","protocol":"Automatic","mode":"timed","name":"","host":"192.168.1.153","timer":"3","inputs":0,"x":1090,"y":780,"wires":[[]]},{"id":"d142451fdfb2ea85","type":"ping","z":"1756c1b5a2b5b615","protocol":"Automatic","mode":"timed","name":"","host":"192.168.1.154","timer":"3","inputs":0,"x":1090,"y":960,"wires":[[]]},{"id":"3aab44d1d47416b6","type":"ping","z":"1756c1b5a2b5b615","protocol":"Automatic","mode":"timed","name":"","host":"192.168.1.155","timer":"3","inputs":0,"x":1090,"y":1040,"wires":[[]]},{"id":"c4259b8392013fea","type":"ping","z":"1756c1b5a2b5b615","protocol":"Automatic","mode":"timed","name":"","host":"192.168.1.201","timer":"4","inputs":0,"x":1030,"y":1100,"wires":[[]]},{"id":"274c3244e9b7e757","type":"ping","z":"1756c1b5a2b5b615","protocol":"Automatic","mode":"timed","name":"","host":"192.168.202","timer":"4","inputs":0,"x":1030,"y":1160,"wires":[[]]},{"id":"981a1f6bbc87c0d2","type":"ping","z":"1756c1b5a2b5b615","protocol":"Automatic","mode":"timed","name":"","host":"192.168.1.203","timer":"4","inputs":0,"x":1030,"y":1260,"wires":[[]]},{"id":"ea1d1fc33cbe7883","type":"ping","z":"1756c1b5a2b5b615","protocol":"Automatic","mode":"timed","name":"","host":"192.168.1.204","timer":"4","inputs":0,"x":1030,"y":1380,"wires":[[]]},{"id":"b941b1c7ed2822c8","type":"debug","z":"1756c1b5a2b5b615","name":"debug 228","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":1310,"y":1440,"wires":[]},{"id":"65ea0cb752f8234d","type":"tab","label":"python1","disabled":false,"info":"","env":[]},{"id":"318feed74f6af6f7","type":"group","z":"65ea0cb752f8234d","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["23f141b6c407eec4","3070f2597878c46f","7af636ceeb537c76","3cb23651aa4928bc","606a63613fb712e0","309953613e89bfa5","a47f65b6f9d1583a","2d9c23686be080c9","0bafa34716e6257f","1a6dc683e32d0ad0","7651d1eec8943fee","21b9d3b54979d6ea","6f5fc2b480903270","dad2a1380c2fbfec","e37e0ac877054e96","62bb5e0aa64f3edb","eabb785ce90c636c","cf3e97cc35bf5cc9","00d1cff29f6d828d","d8618a905d4b1d59","98cf771292850e2c","2df345fd52718eb9","b6d5cc8e7c49726d","39cbf05eedcb99ea","1a738d711f5bd7e0","d535425b1bf69f2f","7e3a8cfd334ef23a","d37d6a71e69a8fc5","67aa791fe807c21e","1b4f5c66bf9b4c3f","63bbf0731df027a6","08f87a245bb0e907","1a4edbe8158fc2fa","098c48b8be7dd37b","46fef80be2498255","cba5ebae69c4e8dc","0f09df4911811f76","fa61dc9084aff9cc","7d9b93957d06ebf0","7795f00cd1959470","f413c3f9c7bae100"],"x":454,"y":253,"w":958,"h":928},{"id":"7795f00cd1959470","type":"group","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["9faccf754907293c","42c40a359d5e4725","100174e6542348bb","b14c7c8f9d50f862","3a7037f07722bb51"],"x":1194,"y":279,"w":192,"h":322},{"id":"1d53c51087541de7","type":"mqtt in JSON","z":"65ea0cb752f8234d","name":"","topic":"sensor/data","qos":"2","broker":"125f6c81.60151b","ignoreempty":true,"removemqttconfig":false,"x":190,"y":180,"wires":[["ace196065a423125","430986c99747f5c7"]]},{"id":"ace196065a423125","type":"debug","z":"65ea0cb752f8234d","name":"debug 212","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":390,"y":180,"wires":[]},{"id":"23f141b6c407eec4","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":26,"width":0,"height":0,"name":"","label":"Sensor 31","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":300,"wires":[]},{"id":"430986c99747f5c7","type":"function","z":"65ea0cb752f8234d","name":"function 5","func":"let outputMsgs = [];\n\nfor (let sensor in msg.payload) {\n    let status = msg.payload[sensor];  // Directly use the \"ON\"/\"OFF\" value\n\n    outputMsgs.push({ topic: sensor, payload: status });\n}\n\nreturn [outputMsgs];\n","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":400,"y":240,"wires":[["23f141b6c407eec4","3070f2597878c46f","7af636ceeb537c76","3cb23651aa4928bc","606a63613fb712e0","309953613e89bfa5","a47f65b6f9d1583a","2d9c23686be080c9","0bafa34716e6257f","1a6dc683e32d0ad0","7651d1eec8943fee","21b9d3b54979d6ea","6f5fc2b480903270","dad2a1380c2fbfec","e37e0ac877054e96","62bb5e0aa64f3edb","eabb785ce90c636c","cf3e97cc35bf5cc9","00d1cff29f6d828d","d8618a905d4b1d59","98cf771292850e2c","2df345fd52718eb9","b6d5cc8e7c49726d","39cbf05eedcb99ea","1a738d711f5bd7e0","742057f0e69b805f","d535425b1bf69f2f","7e3a8cfd334ef23a","d37d6a71e69a8fc5","67aa791fe807c21e","1b4f5c66bf9b4c3f","63bbf0731df027a6","08f87a245bb0e907","1a4edbe8158fc2fa","098c48b8be7dd37b","46fef80be2498255","cba5ebae69c4e8dc","0f09df4911811f76","fa61dc9084aff9cc","7d9b93957d06ebf0","9faccf754907293c","42c40a359d5e4725","100174e6542348bb","b14c7c8f9d50f862","3a7037f07722bb51","f413c3f9c7bae100"]]},{"id":"3070f2597878c46f","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":2,"width":0,"height":0,"name":"","label":"Sensor 7","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":540,"y":360,"wires":[]},{"id":"7af636ceeb537c76","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":3,"width":0,"height":0,"name":"","label":"Sensor 8","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":540,"y":420,"wires":[]},{"id":"3cb23651aa4928bc","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":4,"width":0,"height":0,"name":"","label":"Sensor 9","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":540,"y":480,"wires":[]},{"id":"606a63613fb712e0","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":5,"width":0,"height":0,"name":"","label":"Sensor 10","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":550,"y":540,"wires":[]},{"id":"309953613e89bfa5","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":6,"width":0,"height":0,"name":"","label":"Sensor 11","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":729.3333129882812,"y":298.6666564941406,"wires":[]},{"id":"a47f65b6f9d1583a","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":7,"width":0,"height":0,"name":"","label":"Sensor 12","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":730,"y":360,"wires":[]},{"id":"2d9c23686be080c9","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":8,"width":0,"height":0,"name":"","label":"Sensor 13","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":730,"y":420,"wires":[]},{"id":"0bafa34716e6257f","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":9,"width":0,"height":0,"name":"","label":"Sensor 14","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":730,"y":480,"wires":[]},{"id":"1a6dc683e32d0ad0","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":10,"width":0,"height":0,"name":"","label":"Sensor 15","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":730,"y":540,"wires":[]},{"id":"7651d1eec8943fee","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":11,"width":0,"height":0,"name":"","label":"Sensor 16","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":300,"wires":[]},{"id":"21b9d3b54979d6ea","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":12,"width":0,"height":0,"name":"","label":"Sensor 17","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":360,"wires":[]},{"id":"6f5fc2b480903270","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":13,"width":0,"height":0,"name":"","label":"Sensor 18","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":420,"wires":[]},{"id":"dad2a1380c2fbfec","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":14,"width":0,"height":0,"name":"","label":"Sensor 19","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":480,"wires":[]},{"id":"e37e0ac877054e96","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":15,"width":0,"height":0,"name":"","label":"Sensor 20","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":540,"wires":[]},{"id":"62bb5e0aa64f3edb","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":16,"width":0,"height":0,"name":"","label":"Sensor 21","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":600,"wires":[]},{"id":"eabb785ce90c636c","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":17,"width":0,"height":0,"name":"","label":"Sensor 22","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":660,"wires":[]},{"id":"cf3e97cc35bf5cc9","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":18,"width":0,"height":0,"name":"","label":"Sensor 23","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":720,"wires":[]},{"id":"00d1cff29f6d828d","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":19,"width":0,"height":0,"name":"","label":"Sensor 24","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":780,"wires":[]},{"id":"d8618a905d4b1d59","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":20,"width":0,"height":0,"name":"","label":"Sensor 25","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":840,"wires":[]},{"id":"98cf771292850e2c","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":21,"width":0,"height":0,"name":"","label":"Sensor 26","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":900,"wires":[]},{"id":"2df345fd52718eb9","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":22,"width":0,"height":0,"name":"","label":"Sensor 27","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":960,"wires":[]},{"id":"b6d5cc8e7c49726d","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":23,"width":0,"height":0,"name":"","label":"Sensor 28","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":1020,"wires":[]},{"id":"39cbf05eedcb99ea","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":24,"width":0,"height":0,"name":"","label":"Sensor 29","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":1080,"wires":[]},{"id":"1a738d711f5bd7e0","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":25,"width":0,"height":0,"name":"","label":"Sensor 30","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":1140,"wires":[]},{"id":"961f3f997632507d","type":"mqtt in","z":"65ea0cb752f8234d","name":"","topic":"sensor/data","qos":"2","datatype":"auto-detect","broker":"498c39ca7003f628","nl":false,"rap":true,"rh":0,"inputs":0,"x":220,"y":340,"wires":[["ace196065a423125"]]},{"id":"742057f0e69b805f","type":"ui_template","z":"65ea0cb752f8234d","group":"fa18ce1aeaf73f7b","name":"","order":27,"width":0,"height":0,"format":"<div style=\"text-align:center; font-size:20px; font-weight:bold; color: {{msg.payload === 'ON' ? 'green' : 'red'}};\">\n    {{msg.payload}}\n</div>\n","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":310,"y":420,"wires":[[]]},{"id":"d535425b1bf69f2f","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":28,"width":0,"height":0,"name":"","label":"Sensor 32","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":360,"wires":[]},{"id":"7e3a8cfd334ef23a","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":29,"width":0,"height":0,"name":"","label":"Sensor 33","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":420,"wires":[]},{"id":"d37d6a71e69a8fc5","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":30,"width":0,"height":0,"name":"","label":"Sensor 34","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":480,"wires":[]},{"id":"67aa791fe807c21e","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":31,"width":0,"height":0,"name":"","label":"Sensor 35","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":540,"wires":[]},{"id":"1b4f5c66bf9b4c3f","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":33,"width":0,"height":0,"name":"","label":"Sensor 36","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":600,"wires":[]},{"id":"63bbf0731df027a6","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":34,"width":0,"height":0,"name":"","label":"Sensor 37","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":660,"wires":[]},{"id":"08f87a245bb0e907","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":35,"width":0,"height":0,"name":"","label":"Sensor 38","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":720,"wires":[]},{"id":"1a4edbe8158fc2fa","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":36,"width":0,"height":0,"name":"","label":"Sensor 39","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":780,"wires":[]},{"id":"098c48b8be7dd37b","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":37,"width":0,"height":0,"name":"","label":"Sensor 40","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":840,"wires":[]},{"id":"46fef80be2498255","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":38,"width":0,"height":0,"name":"","label":"Sensor 41","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":900,"wires":[]},{"id":"cba5ebae69c4e8dc","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":39,"width":0,"height":0,"name":"","label":"Sensor 42","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":960,"wires":[]},{"id":"0f09df4911811f76","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":40,"width":0,"height":0,"name":"","label":"Sensor 43","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":1020,"wires":[]},{"id":"fa61dc9084aff9cc","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":41,"width":0,"height":0,"name":"","label":"Sensor 44","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":1080,"wires":[]},{"id":"7d9b93957d06ebf0","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":42,"width":0,"height":0,"name":"","label":"Sensor 45","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":1140,"wires":[]},{"id":"9faccf754907293c","type":"ui_text","z":"65ea0cb752f8234d","g":"7795f00cd1959470","group":"fa18ce1aeaf73f7b","order":43,"width":0,"height":0,"name":"","label":"Sensor 46","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1290,"y":320,"wires":[]},{"id":"42c40a359d5e4725","type":"ui_text","z":"65ea0cb752f8234d","g":"7795f00cd1959470","group":"fa18ce1aeaf73f7b","order":44,"width":0,"height":0,"name":"","label":"Sensor 47","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1290,"y":380,"wires":[]},{"id":"100174e6542348bb","type":"ui_text","z":"65ea0cb752f8234d","g":"7795f00cd1959470","group":"fa18ce1aeaf73f7b","order":45,"width":0,"height":0,"name":"","label":"Sensor 48","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1290,"y":440,"wires":[]},{"id":"b14c7c8f9d50f862","type":"ui_text","z":"65ea0cb752f8234d","g":"7795f00cd1959470","group":"fa18ce1aeaf73f7b","order":46,"width":0,"height":0,"name":"","label":"Sensor 49","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1290,"y":500,"wires":[]},{"id":"3a7037f07722bb51","type":"ui_text","z":"65ea0cb752f8234d","g":"7795f00cd1959470","group":"fa18ce1aeaf73f7b","order":47,"width":0,"height":0,"name":"","label":"Sensor 50","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1290,"y":560,"wires":[]},{"id":"f413c3f9c7bae100","type":"ui_text","z":"65ea0cb752f8234d","g":"318feed74f6af6f7","group":"fa18ce1aeaf73f7b","order":1,"width":0,"height":0,"name":"","label":"Sensor 6","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":540,"y":300,"wires":[]},{"id":"70af50317d0bd8f4","type":"tab","label":"python 2","disabled":false,"info":"","env":[]},{"id":"5801b216178aac09","type":"group","z":"70af50317d0bd8f4","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["2301ae6603e205ca"],"x":1194,"y":239,"w":192,"h":82},{"id":"43cb2ea744ae4833","type":"mqtt in JSON","z":"70af50317d0bd8f4","name":"","topic":"sensor/data","qos":"2","broker":"125f6c81.60151b","ignoreempty":true,"removemqttconfig":false,"x":190,"y":140,"wires":[["22e66d09ab3675ce","ce93bce947b10550"]]},{"id":"22e66d09ab3675ce","type":"debug","z":"70af50317d0bd8f4","name":"debug 219","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":390,"y":140,"wires":[]},{"id":"ce93bce947b10550","type":"function","z":"70af50317d0bd8f4","name":"function 9","func":"let outputMsgs = [];\n\nfor (let sensor in msg.payload) {\n    let status = msg.payload[sensor];  // Directly use the \"ON\"/\"OFF\" value\n\n    outputMsgs.push({ topic: sensor, payload: status });\n}\n\nreturn [outputMsgs];\n","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":400,"y":200,"wires":[["d702a4e5f03c159d","39012f37055914de","407e6148e2b524d6","f4963254b35e7459","f23b8afa6b55fde8","48b6a44857279bf8","338ef7fb32c1687d","7c51c85840bc26b4","101e559af635c9f4","b4720df77541f649","e30a700266e5499b","3d4626d4c61aefbe","4106709aafa4210f","8bce52d4920dacd9","79eafd82a4360ca8","74a20b6e45500b56","71d9b9af80a8ad64","ca4bc84a141dc8a4","744393c30c55bd91","c4d80ff7db642ed7","f6a7e331b6ccc92c","ba4772860b5146fa","5bde27e6bce90a65","3aeb492dad301274","8c48def491e6c63d","1dbe9438ca336616","b24a5414e5577675","ab39f0584125bef3","af45a47f1177f72f","d739273e23960086","09c620f69e4b7ba6","8ec7295b41938406","c090b4828e36d784","14b16331b0dafea3","a491fcdf8d38f84b","97aa698ee6f24c89","0b1b483d0ee4a0ca","9a5943ac4e40d2db","586f2c20ef4fe6f9","9a78196ca6060356","2301ae6603e205ca","b5aecfd3bacf8632","4dc522e21129258b","64ea51023073ed4e","b54eeaa72d6c6a30","6baca90d9890235a"]]},{"id":"43064cfc093cc4d4","type":"mqtt in","z":"70af50317d0bd8f4","name":"","topic":"sensor/data","qos":"2","datatype":"auto-detect","broker":"498c39ca7003f628","nl":false,"rap":true,"rh":0,"inputs":0,"x":220,"y":300,"wires":[["22e66d09ab3675ce"]]},{"id":"1dbe9438ca336616","type":"ui_template","z":"70af50317d0bd8f4","group":"6f322c5b24dbb1a4","name":"","order":25,"width":0,"height":0,"format":"<div style=\"text-align:center; font-size:20px; font-weight:bold; color: {{msg.payload === 'ON' ? 'green' : 'red'}};\">\n    {{msg.payload}}\n</div>\n","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":310,"y":380,"wires":[[]]},{"id":"d702a4e5f03c159d","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":26,"width":0,"height":0,"name":"","label":"Sensor 31","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":260,"wires":[]},{"id":"39012f37055914de","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":2,"width":0,"height":0,"name":"","label":"Sensor 7","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":540,"y":320,"wires":[]},{"id":"407e6148e2b524d6","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":3,"width":0,"height":0,"name":"","label":"Sensor 8","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":540,"y":380,"wires":[]},{"id":"f4963254b35e7459","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":4,"width":0,"height":0,"name":"","label":"Sensor 9","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":540,"y":440,"wires":[]},{"id":"f23b8afa6b55fde8","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":5,"width":0,"height":0,"name":"","label":"Sensor 10","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":550,"y":500,"wires":[]},{"id":"48b6a44857279bf8","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":6,"width":0,"height":0,"name":"","label":"Sensor 11","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":729.3333129882812,"y":258.6666564941406,"wires":[]},{"id":"338ef7fb32c1687d","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":7,"width":0,"height":0,"name":"","label":"Sensor 12","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":730,"y":320,"wires":[]},{"id":"7c51c85840bc26b4","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":8,"width":0,"height":0,"name":"","label":"Sensor 13","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":730,"y":380,"wires":[]},{"id":"101e559af635c9f4","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":9,"width":0,"height":0,"name":"","label":"Sensor 14","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":730,"y":440,"wires":[]},{"id":"b4720df77541f649","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":10,"width":0,"height":0,"name":"","label":"Sensor 15","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":730,"y":500,"wires":[]},{"id":"e30a700266e5499b","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":11,"width":0,"height":0,"name":"","label":"Sensor 16","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":260,"wires":[]},{"id":"3d4626d4c61aefbe","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":12,"width":0,"height":0,"name":"","label":"Sensor 17","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":320,"wires":[]},{"id":"4106709aafa4210f","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":13,"width":0,"height":0,"name":"","label":"Sensor 18","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":380,"wires":[]},{"id":"8bce52d4920dacd9","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":14,"width":0,"height":0,"name":"","label":"Sensor 19","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":440,"wires":[]},{"id":"79eafd82a4360ca8","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":15,"width":0,"height":0,"name":"","label":"Sensor 20","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":500,"wires":[]},{"id":"74a20b6e45500b56","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":16,"width":0,"height":0,"name":"","label":"Sensor 21","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":560,"wires":[]},{"id":"71d9b9af80a8ad64","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":17,"width":0,"height":0,"name":"","label":"Sensor 22","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":620,"wires":[]},{"id":"ca4bc84a141dc8a4","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":18,"width":0,"height":0,"name":"","label":"Sensor 23","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":680,"wires":[]},{"id":"744393c30c55bd91","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":19,"width":0,"height":0,"name":"","label":"Sensor 24","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":740,"wires":[]},{"id":"c4d80ff7db642ed7","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":20,"width":0,"height":0,"name":"","label":"Sensor 25","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":800,"wires":[]},{"id":"f6a7e331b6ccc92c","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":21,"width":0,"height":0,"name":"","label":"Sensor 26","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":860,"wires":[]},{"id":"ba4772860b5146fa","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":22,"width":0,"height":0,"name":"","label":"Sensor 27","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":920,"wires":[]},{"id":"5bde27e6bce90a65","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":23,"width":0,"height":0,"name":"","label":"Sensor 28","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":980,"wires":[]},{"id":"3aeb492dad301274","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":24,"width":0,"height":0,"name":"","label":"Sensor 29","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":1040,"wires":[]},{"id":"8c48def491e6c63d","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":25,"width":0,"height":0,"name":"","label":"Sensor 30","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":1100,"wires":[]},{"id":"b24a5414e5577675","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":27,"width":0,"height":0,"name":"","label":"Sensor 32","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":320,"wires":[]},{"id":"ab39f0584125bef3","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":28,"width":0,"height":0,"name":"","label":"Sensor 33","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":380,"wires":[]},{"id":"af45a47f1177f72f","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":29,"width":0,"height":0,"name":"","label":"Sensor 34","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":440,"wires":[]},{"id":"d739273e23960086","type":"ui_text","z":"70af50317d0bd8f4","group":"fa18ce1aeaf73f7b","order":32,"width":0,"height":0,"name":"","label":"Sensor 35","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":500,"wires":[]},{"id":"09c620f69e4b7ba6","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":30,"width":0,"height":0,"name":"","label":"Sensor 36","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":560,"wires":[]},{"id":"8ec7295b41938406","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":31,"width":0,"height":0,"name":"","label":"Sensor 37","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":620,"wires":[]},{"id":"c090b4828e36d784","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":32,"width":0,"height":0,"name":"","label":"Sensor 38","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":680,"wires":[]},{"id":"14b16331b0dafea3","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":33,"width":0,"height":0,"name":"","label":"Sensor 39","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":740,"wires":[]},{"id":"a491fcdf8d38f84b","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":34,"width":0,"height":0,"name":"","label":"Sensor 40","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":800,"wires":[]},{"id":"97aa698ee6f24c89","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":35,"width":0,"height":0,"name":"","label":"Sensor 41","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":860,"wires":[]},{"id":"0b1b483d0ee4a0ca","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":36,"width":0,"height":0,"name":"","label":"Sensor 42","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":920,"wires":[]},{"id":"9a5943ac4e40d2db","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":37,"width":0,"height":0,"name":"","label":"Sensor 43","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":980,"wires":[]},{"id":"586f2c20ef4fe6f9","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":38,"width":0,"height":0,"name":"","label":"Sensor 44","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":1040,"wires":[]},{"id":"9a78196ca6060356","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":39,"width":0,"height":0,"name":"","label":"Sensor 45","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":1100,"wires":[]},{"id":"2301ae6603e205ca","type":"ui_text","z":"70af50317d0bd8f4","g":"5801b216178aac09","group":"68dd160de6ff4272","order":40,"width":0,"height":0,"name":"","label":"Sensor 46","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1290,"y":280,"wires":[]},{"id":"b5aecfd3bacf8632","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":41,"width":0,"height":0,"name":"","label":"Sensor 47","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1290,"y":340,"wires":[]},{"id":"4dc522e21129258b","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":42,"width":0,"height":0,"name":"","label":"Sensor 48","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1290,"y":400,"wires":[]},{"id":"64ea51023073ed4e","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":43,"width":0,"height":0,"name":"","label":"Sensor 49","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1290,"y":460,"wires":[]},{"id":"b54eeaa72d6c6a30","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":44,"width":0,"height":0,"name":"","label":"Sensor 50","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1290,"y":520,"wires":[]},{"id":"6baca90d9890235a","type":"ui_text","z":"70af50317d0bd8f4","group":"68dd160de6ff4272","order":1,"width":0,"height":0,"name":"Sensor 6","label":"Sensor 6","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":540,"y":260,"wires":[]},{"id":"1e627333b9eaeb10","type":"tab","label":"python 3","disabled":false,"info":"","env":[]},{"id":"9d68df11db0a9ff3","type":"group","z":"1e627333b9eaeb10","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["b326f54bdbe5f58d"],"x":1194,"y":279,"w":192,"h":82},{"id":"b7406ae911be8773","type":"group","z":"1e627333b9eaeb10","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":[],"x":454,"y":259,"w":40,"h":40},{"id":"a5e59c7a7bc97452","type":"mqtt in JSON","z":"1e627333b9eaeb10","name":"","topic":"sensor/data","qos":"2","broker":"125f6c81.60151b","ignoreempty":true,"removemqttconfig":false,"x":190,"y":180,"wires":[["e1e14b95ed4e5a13","87fa4b610a70bb5d"]]},{"id":"e1e14b95ed4e5a13","type":"debug","z":"1e627333b9eaeb10","name":"debug 220","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":390,"y":180,"wires":[]},{"id":"87fa4b610a70bb5d","type":"function","z":"1e627333b9eaeb10","name":"function 10","func":"let outputMsgs = [];\nlet data = msg.payload;  // Make sure this is the full JSON object\n\n// Loop through each sensor in the JSON data\nfor (let sensor in data) {\n    let status = data[sensor];  // Get \"ON\" or \"OFF\" value\n    outputMsgs.push({ topic: sensor, payload: status });\n}\n\n// Send messages as an array for further processing\nreturn [outputMsgs];\n","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":400,"y":240,"wires":[["b539b6bec44a80a3","76c02e5ac3154875","9c6e1ca3f32c57c7","9371c44db98686f3","a7ad252321c5f954","7a2a13880bc5f480","e4b06d81899e9129","047874242e453432","98efc7adb54faa3e","0311ff9059f47335","f22df3530dc2b7b6","509764561caa2615","0df173eaac41f90c","753e3d993414ecd0","e31e164154cea5f0","e259b9ca73fa308c","1448816280e73603","2307008076a28737","1bfc4d8c7b7ecbf6","6cb9f4e876152f39","e14008c0feb5813d","09ea324475fa3418","51a1dabfab8cd068","498e000055d21c17","e0e61e477f00dd35","b395647f6de13748","e798f81682370eaf","e4cb9c848dfa1864","89c26a9c4a020b53","378a97c506feb4ed","ed6e57d819314130","1eeff999a4849485","a73ac8051e5abf5e","76c12e7f14c0aeb4","6ef9e06ac1e66f8e","dd717bcbcf2ab354","c2090b90d05d7cf7","dc5b4e9de4f1bb4c","ef347589889c8a5e","460ae3f63e2bdaea","b326f54bdbe5f58d","1a67e42d8d8288c9","d4282b334c6a1e7a","ccf362e12ece1ff1","72924de479d5696a","2786d9d0d07e9319","6760395dbd010e62"]]},{"id":"4a590a6f574d2b48","type":"mqtt in","z":"1e627333b9eaeb10","name":"","topic":"sensor/data","qos":"2","datatype":"auto-detect","broker":"498c39ca7003f628","nl":false,"rap":true,"rh":0,"inputs":0,"x":190,"y":100,"wires":[["e1e14b95ed4e5a13"]]},{"id":"b395647f6de13748","type":"ui_template","z":"1e627333b9eaeb10","group":"6f322c5b24dbb1a4","name":"","order":25,"width":0,"height":0,"format":"<div style=\"text-align:center; font-size:20px; font-weight:bold; color: {{msg.payload === 'ON' ? 'green' : 'red'}};\">\n    {{msg.payload}}\n</div>\n","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":310,"y":420,"wires":[[]]},{"id":"b539b6bec44a80a3","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":27,"width":0,"height":0,"name":"","label":"Sensor 31","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":300,"wires":[]},{"id":"76c02e5ac3154875","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":3,"width":0,"height":0,"name":"","label":"Sensor 7","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":540,"y":360,"wires":[]},{"id":"9c6e1ca3f32c57c7","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":4,"width":0,"height":0,"name":"","label":"Sensor 8","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":540,"y":420,"wires":[]},{"id":"9371c44db98686f3","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":5,"width":0,"height":0,"name":"","label":"Sensor 9","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":540,"y":480,"wires":[]},{"id":"a7ad252321c5f954","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":6,"width":0,"height":0,"name":"","label":"Sensor 10","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":550,"y":540,"wires":[]},{"id":"7a2a13880bc5f480","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":7,"width":0,"height":0,"name":"","label":"Sensor 11","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":729.3333129882812,"y":298.6666564941406,"wires":[]},{"id":"e4b06d81899e9129","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":8,"width":0,"height":0,"name":"","label":"Sensor 12","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":730,"y":360,"wires":[]},{"id":"047874242e453432","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":9,"width":0,"height":0,"name":"","label":"Sensor 13","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":730,"y":420,"wires":[]},{"id":"98efc7adb54faa3e","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":10,"width":0,"height":0,"name":"","label":"Sensor 14","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":730,"y":480,"wires":[]},{"id":"0311ff9059f47335","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":11,"width":0,"height":0,"name":"","label":"Sensor 15","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":730,"y":540,"wires":[]},{"id":"f22df3530dc2b7b6","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":12,"width":0,"height":0,"name":"","label":"Sensor 16","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":300,"wires":[]},{"id":"509764561caa2615","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":13,"width":0,"height":0,"name":"","label":"Sensor 17","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":360,"wires":[]},{"id":"0df173eaac41f90c","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":14,"width":0,"height":0,"name":"","label":"Sensor 18","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":420,"wires":[]},{"id":"753e3d993414ecd0","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":15,"width":0,"height":0,"name":"","label":"Sensor 19","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":480,"wires":[]},{"id":"e31e164154cea5f0","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":16,"width":0,"height":0,"name":"","label":"Sensor 20","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":540,"wires":[]},{"id":"e259b9ca73fa308c","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":17,"width":0,"height":0,"name":"","label":"Sensor 21","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":600,"wires":[]},{"id":"1448816280e73603","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":18,"width":0,"height":0,"name":"","label":"Sensor 22","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":660,"wires":[]},{"id":"2307008076a28737","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":19,"width":0,"height":0,"name":"","label":"Sensor 23","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":720,"wires":[]},{"id":"1bfc4d8c7b7ecbf6","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":20,"width":0,"height":0,"name":"","label":"Sensor 24","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":780,"wires":[]},{"id":"6cb9f4e876152f39","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":21,"width":0,"height":0,"name":"","label":"Sensor 25","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":840,"wires":[]},{"id":"e14008c0feb5813d","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":22,"width":0,"height":0,"name":"","label":"Sensor 26","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":900,"wires":[]},{"id":"09ea324475fa3418","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":23,"width":0,"height":0,"name":"","label":"Sensor 27","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":960,"wires":[]},{"id":"51a1dabfab8cd068","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":24,"width":0,"height":0,"name":"","label":"Sensor 28","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":1020,"wires":[]},{"id":"498e000055d21c17","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":25,"width":0,"height":0,"name":"","label":"Sensor 29","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":1080,"wires":[]},{"id":"e0e61e477f00dd35","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":26,"width":0,"height":0,"name":"","label":"Sensor 30","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":910,"y":1140,"wires":[]},{"id":"e798f81682370eaf","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":28,"width":0,"height":0,"name":"","label":"Sensor 32","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":360,"wires":[]},{"id":"e4cb9c848dfa1864","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":29,"width":0,"height":0,"name":"","label":"Sensor 33","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":420,"wires":[]},{"id":"89c26a9c4a020b53","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":30,"width":0,"height":0,"name":"","label":"Sensor 34","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":480,"wires":[]},{"id":"378a97c506feb4ed","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":31,"width":0,"height":0,"name":"","label":"Sensor 35","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":540,"wires":[]},{"id":"ed6e57d819314130","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":32,"width":0,"height":0,"name":"","label":"Sensor 36","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":600,"wires":[]},{"id":"1eeff999a4849485","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":33,"width":0,"height":0,"name":"","label":"Sensor 37","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":660,"wires":[]},{"id":"a73ac8051e5abf5e","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":34,"width":0,"height":0,"name":"","label":"Sensor 38","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":720,"wires":[]},{"id":"76c12e7f14c0aeb4","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":35,"width":0,"height":0,"name":"","label":"Sensor 39","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":780,"wires":[]},{"id":"6ef9e06ac1e66f8e","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":36,"width":0,"height":0,"name":"","label":"Sensor 40","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":840,"wires":[]},{"id":"dd717bcbcf2ab354","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":37,"width":0,"height":0,"name":"","label":"Sensor 41","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":900,"wires":[]},{"id":"c2090b90d05d7cf7","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":38,"width":0,"height":0,"name":"","label":"Sensor 42","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":960,"wires":[]},{"id":"dc5b4e9de4f1bb4c","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":39,"width":0,"height":0,"name":"","label":"Sensor 43","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":1020,"wires":[]},{"id":"ef347589889c8a5e","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":40,"width":0,"height":0,"name":"","label":"Sensor 44","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":1080,"wires":[]},{"id":"460ae3f63e2bdaea","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":41,"width":0,"height":0,"name":"","label":"Sensor 45","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1070,"y":1140,"wires":[]},{"id":"1a67e42d8d8288c9","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":43,"width":0,"height":0,"name":"","label":"Sensor 47","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1290,"y":380,"wires":[]},{"id":"d4282b334c6a1e7a","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":44,"width":0,"height":0,"name":"","label":"Sensor 48","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1290,"y":440,"wires":[]},{"id":"ccf362e12ece1ff1","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":45,"width":0,"height":0,"name":"","label":"Sensor 49","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1290,"y":500,"wires":[]},{"id":"72924de479d5696a","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":46,"width":0,"height":0,"name":"","label":"Sensor 50","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1290,"y":560,"wires":[]},{"id":"b326f54bdbe5f58d","type":"ui_text","z":"1e627333b9eaeb10","g":"9d68df11db0a9ff3","group":"247e57704f496351","order":42,"width":0,"height":0,"name":"","label":"Sensor 46","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1290,"y":320,"wires":[]},{"id":"5f522367661c8618","type":"websocket in","z":"1e627333b9eaeb10","name":"","server":"4e976676.9e1538","client":"","x":190,"y":260,"wires":[["87fa4b610a70bb5d","0119a88fab3f3075"]]},{"id":"0119a88fab3f3075","type":"debug","z":"1e627333b9eaeb10","name":"debug 221","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":700,"y":100,"wires":[]},{"id":"6760395dbd010e62","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":2,"width":0,"height":0,"name":"","label":"Sensor 6","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":540,"y":300,"wires":[]},{"id":"2786d9d0d07e9319","type":"ui_text","z":"1e627333b9eaeb10","group":"247e57704f496351","order":1,"width":0,"height":0,"name":"","label":"Sensor 5","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":600,"y":240,"wires":[]},{"id":"6d65bab3d91fedd6","type":"tab","label":"python 4","disabled":false,"info":"","env":[]},{"id":"c0504a1c0537606d","type":"group","z":"6d65bab3d91fedd6","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["d31bad1f8df5884a"],"x":1234,"y":299,"w":192,"h":82},{"id":"c816c74262750efc","type":"group","z":"6d65bab3d91fedd6","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":[],"x":494,"y":279,"w":40,"h":40},{"id":"cfa65e28ac7f181c","type":"mqtt in JSON","z":"6d65bab3d91fedd6","name":"","topic":"sensor/data","qos":"2","broker":"125f6c81.60151b","ignoreempty":true,"removemqttconfig":false,"x":230,"y":200,"wires":[["56c7bcba94f2d5f6","875acee00528967a"]]},{"id":"56c7bcba94f2d5f6","type":"debug","z":"6d65bab3d91fedd6","name":"debug 223","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":430,"y":200,"wires":[]},{"id":"875acee00528967a","type":"function","z":"6d65bab3d91fedd6","name":"function 12","func":"let outputMsgs = [];\nlet data = msg.payload;  // Make sure this is the full JSON object\n\n// Loop through each sensor in the JSON data\nfor (let sensor in data) {\n    let status = data[sensor];  // Get \"ON\" or \"OFF\" value\n    outputMsgs.push({ topic: sensor, payload: status });\n}\n\n// Send messages as an array for further processing\nreturn [outputMsgs];\n","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":440,"y":260,"wires":[["5f063181cef14a44","87c87106ba401dea","c35c5309c33dd0d1","b166bbdfe528ae28","4ae16e064d8a6232","8f360b1f12bf0156","9109c4efbf28cc5c","a0e19ef256c233f3","0e513b2914d3def2","e0d5832d2280368b","8dc15ccb64362be3","de75b8b876b86843","2f3e9b8b4ab840f7","9c0ffdb75d2c4af2","cd048a9e1edfc362","9263dff6019de717","c48e3bd9db796bae","36cb1c6f7f885806","75d0fbaef6507359","d1e88b46398b62d0","851040f0fd30309a","fbb74b9694030a75","03df50e94b485e49","c9f77af8331cf743","d347b28552aac0b6","49c3e7e4396e8255","47226c69a38b20a1","1abb2f2684ad411e","eefb90eb93040d6a","ca7480d3418ccda0","b38bc6cc6452ca71","1b7008d709285a27","b5a082688c3e0f5b","c75f1d375f19f3cd","20a5d95e64b85b25","ea3b0a86b802e44f","8082830245a2b3b2","f0112c2ce7b4ce38","17f4e0956e1c5c91","fd77fe14618286d2","d31bad1f8df5884a","2720ce2c698dd705","7611f0361b0a590f","3fcc5b8ea00d475a","2bf3238fef986202","516ec15670a9296f","ef41bd9f0fad7bdd","8bd28a1da137bd99","eb870d5a79d275ed","ac60b7464bd7d2af","20ec9206c46feb9c"]]},{"id":"575478c3986071fe","type":"mqtt in","z":"6d65bab3d91fedd6","name":"","topic":"sensor/data","qos":"2","datatype":"auto-detect","broker":"498c39ca7003f628","nl":false,"rap":true,"rh":0,"inputs":0,"x":230,"y":120,"wires":[["56c7bcba94f2d5f6"]]},{"id":"49c3e7e4396e8255","type":"ui_template","z":"6d65bab3d91fedd6","group":"6f322c5b24dbb1a4","name":"","order":24,"width":0,"height":0,"format":"<div style=\"text-align:center; font-size:20px; font-weight:bold; color: {{msg.payload === 'ON' ? 'green' : 'red'}};\">\n    {{msg.payload}}\n</div>\n","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":350,"y":440,"wires":[[]]},{"id":"5f063181cef14a44","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":26,"width":0,"height":0,"name":"","label":"Sensor 25","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1110,"y":320,"wires":[]},{"id":"87c87106ba401dea","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":1,"width":0,"height":0,"name":"","label":"Sensor 1","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":580,"y":380,"wires":[]},{"id":"c35c5309c33dd0d1","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":2,"width":0,"height":0,"name":"","label":"Sensor 2","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":580,"y":440,"wires":[]},{"id":"b166bbdfe528ae28","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":3,"width":0,"height":0,"name":"","label":"Sensor 3","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":580,"y":500,"wires":[]},{"id":"4ae16e064d8a6232","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":4,"width":0,"height":0,"name":"","label":"Sensor 4","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":580,"y":560,"wires":[]},{"id":"8f360b1f12bf0156","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":5,"width":0,"height":0,"name":"","label":"Sensor 5","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":769.3333129882812,"y":318.6666564941406,"wires":[]},{"id":"9109c4efbf28cc5c","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":6,"width":0,"height":0,"name":"","label":"Sensor 6","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":760,"y":380,"wires":[]},{"id":"a0e19ef256c233f3","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":7,"width":0,"height":0,"name":"","label":"Sensor 7","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":760,"y":440,"wires":[]},{"id":"0e513b2914d3def2","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":8,"width":0,"height":0,"name":"","label":"Sensor 8","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":760,"y":500,"wires":[]},{"id":"e0d5832d2280368b","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":9,"width":0,"height":0,"name":"","label":"Sensor 9","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":760,"y":560,"wires":[]},{"id":"8dc15ccb64362be3","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":10,"width":0,"height":0,"name":"","label":"Sensor 10","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":950,"y":320,"wires":[]},{"id":"de75b8b876b86843","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":11,"width":0,"height":0,"name":"","label":"Sensor 11","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":940,"y":380,"wires":[]},{"id":"2f3e9b8b4ab840f7","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":12,"width":0,"height":0,"name":"","label":"Sensor 12","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":950,"y":440,"wires":[]},{"id":"9c0ffdb75d2c4af2","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":13,"width":0,"height":0,"name":"","label":"Sensor 13","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":950,"y":500,"wires":[]},{"id":"cd048a9e1edfc362","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":14,"width":0,"height":0,"name":"","label":"Sensor 14","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":950,"y":560,"wires":[]},{"id":"9263dff6019de717","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":15,"width":0,"height":0,"name":"","label":"Sensor 15","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":950,"y":620,"wires":[]},{"id":"c48e3bd9db796bae","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":16,"width":0,"height":0,"name":"","label":"Sensor 16","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":950,"y":680,"wires":[]},{"id":"36cb1c6f7f885806","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":17,"width":0,"height":0,"name":"","label":"Sensor 17","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":950,"y":740,"wires":[]},{"id":"75d0fbaef6507359","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":18,"width":0,"height":0,"name":"","label":"Sensor 18","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":950,"y":800,"wires":[]},{"id":"d1e88b46398b62d0","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":19,"width":0,"height":0,"name":"","label":"Sensor 19","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":950,"y":860,"wires":[]},{"id":"851040f0fd30309a","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":20,"width":0,"height":0,"name":"","label":"Sensor 20","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":950,"y":920,"wires":[]},{"id":"fbb74b9694030a75","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":21,"width":0,"height":0,"name":"","label":"Sensor 21","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":950,"y":980,"wires":[]},{"id":"03df50e94b485e49","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":22,"width":0,"height":0,"name":"","label":"Sensor 22","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":950,"y":1040,"wires":[]},{"id":"c9f77af8331cf743","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":23,"width":0,"height":0,"name":"","label":"Sensor 23","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":950,"y":1100,"wires":[]},{"id":"d347b28552aac0b6","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":25,"width":0,"height":0,"name":"","label":"Sensor 24","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":950,"y":1160,"wires":[]},{"id":"47226c69a38b20a1","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":27,"width":0,"height":0,"name":"","label":"Sensor 26","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1110,"y":380,"wires":[]},{"id":"1abb2f2684ad411e","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":28,"width":0,"height":0,"name":"","label":"Sensor 27","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1110,"y":440,"wires":[]},{"id":"eefb90eb93040d6a","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":29,"width":0,"height":0,"name":"","label":"Sensor 28","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1110,"y":500,"wires":[]},{"id":"ca7480d3418ccda0","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":30,"width":0,"height":0,"name":"","label":"Sensor 29","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1110,"y":560,"wires":[]},{"id":"b38bc6cc6452ca71","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":31,"width":0,"height":0,"name":"","label":"Sensor 30","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1110,"y":620,"wires":[]},{"id":"1b7008d709285a27","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":32,"width":0,"height":0,"name":"","label":"Sensor 31","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1110,"y":680,"wires":[]},{"id":"b5a082688c3e0f5b","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":33,"width":0,"height":0,"name":"","label":"Sensor 32","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1110,"y":740,"wires":[]},{"id":"c75f1d375f19f3cd","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":34,"width":0,"height":0,"name":"","label":"Sensor 33","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1110,"y":800,"wires":[]},{"id":"20a5d95e64b85b25","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":35,"width":0,"height":0,"name":"","label":"Sensor 34","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1110,"y":860,"wires":[]},{"id":"ea3b0a86b802e44f","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":36,"width":0,"height":0,"name":"","label":"Sensor 35","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1110,"y":920,"wires":[]},{"id":"8082830245a2b3b2","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":37,"width":0,"height":0,"name":"","label":"Sensor 36","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1110,"y":980,"wires":[]},{"id":"f0112c2ce7b4ce38","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":38,"width":0,"height":0,"name":"","label":"Sensor 37","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1110,"y":1040,"wires":[]},{"id":"17f4e0956e1c5c91","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":39,"width":0,"height":0,"name":"","label":"Sensor 38","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1110,"y":1100,"wires":[]},{"id":"fd77fe14618286d2","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":40,"width":0,"height":0,"name":"","label":"Sensor 39","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1110,"y":1160,"wires":[]},{"id":"2720ce2c698dd705","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":43,"width":0,"height":0,"name":"","label":"Sensor 41","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1330,"y":400,"wires":[]},{"id":"7611f0361b0a590f","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":45,"width":0,"height":0,"name":"","label":"Sensor 42","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1330,"y":460,"wires":[]},{"id":"3fcc5b8ea00d475a","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":47,"width":0,"height":0,"name":"","label":"Sensor 43","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1330,"y":520,"wires":[]},{"id":"2bf3238fef986202","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":49,"width":0,"height":0,"name":"","label":"Sensor 44","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1330,"y":580,"wires":[]},{"id":"e6a624eba140c1ac","type":"websocket in","z":"6d65bab3d91fedd6","name":"","server":"4e976676.9e1538","client":"","x":230,"y":280,"wires":[["875acee00528967a","3fdcb70f1a1c7bda"]]},{"id":"3fdcb70f1a1c7bda","type":"debug","z":"6d65bab3d91fedd6","name":"debug 224","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":740,"y":120,"wires":[]},{"id":"d31bad1f8df5884a","type":"ui_text","z":"6d65bab3d91fedd6","g":"c0504a1c0537606d","group":"01cca7960dfdf284","order":41,"width":0,"height":0,"name":"","label":"Sensor 40","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1330,"y":340,"wires":[]},{"id":"ef41bd9f0fad7bdd","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":44,"width":0,"height":0,"name":"","label":"Sensor 46","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1330,"y":700,"wires":[]},{"id":"8bd28a1da137bd99","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":46,"width":0,"height":0,"name":"","label":"Sensor 47","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1330,"y":760,"wires":[]},{"id":"eb870d5a79d275ed","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":48,"width":0,"height":0,"name":"","label":"Sensor 48","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1330,"y":820,"wires":[]},{"id":"ac60b7464bd7d2af","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":50,"width":0,"height":0,"name":"","label":"Sensor 49","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1330,"y":880,"wires":[]},{"id":"516ec15670a9296f","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":42,"width":0,"height":0,"name":"","label":"Sensor 45","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1330,"y":640,"wires":[]},{"id":"20ec9206c46feb9c","type":"ui_text","z":"6d65bab3d91fedd6","group":"01cca7960dfdf284","order":51,"width":0,"height":0,"name":"","label":"Sensor 50","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1330,"y":940,"wires":[]},{"id":"a821534caa3aa9cf","type":"tab","label":"python 5","disabled":false,"info":"","env":[]},{"id":"f4572f7849d29d04","type":"group","z":"a821534caa3aa9cf","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["e9575d4be746a685"],"x":1214,"y":319,"w":192,"h":82},{"id":"990950ffd2427c25","type":"group","z":"a821534caa3aa9cf","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":[],"x":474,"y":299,"w":40,"h":40},{"id":"4308805af0e069c4","type":"group","z":"a821534caa3aa9cf","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["4dc600cfc9871271","3b4e5b9bbe62e004","db053abcf0ab224f","c8ecbe30157e3e61"],"x":474,"y":359,"w":172,"h":162},{"id":"5f7728f163e54ede","type":"mqtt in JSON","z":"a821534caa3aa9cf","name":"","topic":"sensor/data","qos":"2","broker":"125f6c81.60151b","ignoreempty":true,"removemqttconfig":false,"x":210,"y":220,"wires":[["2c084aff3aa4a616","ef6d8c571a755b5a"]]},{"id":"2c084aff3aa4a616","type":"debug","z":"a821534caa3aa9cf","name":"debug 225","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":410,"y":220,"wires":[]},{"id":"ef6d8c571a755b5a","type":"function","z":"a821534caa3aa9cf","name":"function 14","func":"let outputMsgs = [];\nlet data = msg.payload;  // Make sure this is the full JSON object\n\n// Loop through each sensor in the JSON data\nfor (let sensor in data) {\n    let status = data[sensor];  // Get \"ON\" or \"OFF\" value\n    outputMsgs.push({ topic: sensor, payload: status });\n}\n\n// Send messages as an array for further processing\nreturn [outputMsgs];\n","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":280,"wires":[["afc2bb3044be987b","4dc600cfc9871271","3b4e5b9bbe62e004","db053abcf0ab224f","c8ecbe30157e3e61","ef1a673fa8f1fc6b","7007445399762380","a141d6d51da912b5","a2a31e7d83d0306e","1aec1a7599c85974","2487776e48192ee2","d31ab1cbe7e917d6","594e1143ebc834c4","3cf535505b86a0f0","6c1e8b7ac367e0f7","82760fa3e5c23d2f","5f50189bc7a39d1a","eeea047afa441e09","62ad375b7c6a9c20","f825ad2cd5c14432","7b5583df1675348b","0d40b8915775b01b","c08ad1b050a57d3d","0cb9318a0416e459","da76804cdfba15db","8bef09bc72c8df83","d9db79d4b352d8bd","2a376ee2c44c2f5e","ed030685c9ab3e4b","5eabde7de4e7f50a","64acf66286a7d227","f9d4d835e2d6dac2","e3a25d6deb7cad8e","1a49a391bccead65","07ac3a2beeb83629","ce728d96eb55f7a7","921bce55f98f8056","179299cda2232a0a","b2e363b94e89bdf6","9c85ad3dcd15b622","e9575d4be746a685","b14ed68f90b88c13","a4bfdec885bcdc18","b8e62bf6a8cd897f","3b47cc4ae470f36f","baadd403e52e3c2c","80463f9e4ba961c2","b8195bcb886bdc59","10a6667ce8cde770","488f0373d3f2f42b","91535e41ded4e550"]]},{"id":"8b1ae530959e35e3","type":"mqtt in","z":"a821534caa3aa9cf","name":"","topic":"sensor/data","qos":"2","datatype":"auto-detect","broker":"498c39ca7003f628","nl":false,"rap":true,"rh":0,"inputs":0,"x":210,"y":140,"wires":[["2c084aff3aa4a616"]]},{"id":"8bef09bc72c8df83","type":"ui_template","z":"a821534caa3aa9cf","group":"6f322c5b24dbb1a4","name":"","order":24,"width":0,"height":0,"format":"<div style=\"text-align:center; font-size:20px; font-weight:bold; color: {{msg.payload === 'ON' ? 'green' : 'red'}};\">\n    {{msg.payload}}\n</div>\n","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","className":"","x":330,"y":460,"wires":[[]]},{"id":"afc2bb3044be987b","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":26,"width":0,"height":0,"name":"","label":"Sensor 25","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1090,"y":340,"wires":[]},{"id":"4dc600cfc9871271","type":"ui_text","z":"a821534caa3aa9cf","g":"4308805af0e069c4","group":"8369c9bf66ac1066","order":1,"width":0,"height":0,"name":"","label":"Sensor 1","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":560,"y":400,"wires":[]},{"id":"3b4e5b9bbe62e004","type":"ui_text","z":"a821534caa3aa9cf","g":"4308805af0e069c4","group":"8369c9bf66ac1066","order":2,"width":0,"height":0,"name":"","label":"Sensor 2","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":560,"y":440,"wires":[]},{"id":"db053abcf0ab224f","type":"ui_text","z":"a821534caa3aa9cf","g":"4308805af0e069c4","group":"8369c9bf66ac1066","order":3,"width":0,"height":0,"name":"","label":"Sensor 3","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":560,"y":460,"wires":[]},{"id":"c8ecbe30157e3e61","type":"ui_text","z":"a821534caa3aa9cf","g":"4308805af0e069c4","group":"8369c9bf66ac1066","order":4,"width":0,"height":0,"name":"","label":"Sensor 4","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":560,"y":480,"wires":[]},{"id":"ef1a673fa8f1fc6b","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":5,"width":0,"height":0,"name":"","label":"Sensor 5","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":749.3333129882812,"y":338.6666564941406,"wires":[]},{"id":"7007445399762380","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":6,"width":0,"height":0,"name":"","label":"Sensor 6","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":740,"y":400,"wires":[]},{"id":"a141d6d51da912b5","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":7,"width":0,"height":0,"name":"","label":"Sensor 7","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":740,"y":460,"wires":[]},{"id":"a2a31e7d83d0306e","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":8,"width":0,"height":0,"name":"","label":"Sensor 8","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":740,"y":520,"wires":[]},{"id":"1aec1a7599c85974","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":9,"width":0,"height":0,"name":"","label":"Sensor 9","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":740,"y":580,"wires":[]},{"id":"2487776e48192ee2","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":10,"width":0,"height":0,"name":"","label":"Sensor 10","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":930,"y":340,"wires":[]},{"id":"d31ab1cbe7e917d6","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":11,"width":0,"height":0,"name":"","label":"Sensor 11","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":920,"y":400,"wires":[]},{"id":"594e1143ebc834c4","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":12,"width":0,"height":0,"name":"","label":"Sensor 12","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":930,"y":460,"wires":[]},{"id":"3cf535505b86a0f0","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":13,"width":0,"height":0,"name":"","label":"Sensor 13","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":930,"y":520,"wires":[]},{"id":"6c1e8b7ac367e0f7","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":14,"width":0,"height":0,"name":"","label":"Sensor 14","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":930,"y":580,"wires":[]},{"id":"82760fa3e5c23d2f","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":15,"width":0,"height":0,"name":"","label":"Sensor 15","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":930,"y":640,"wires":[]},{"id":"5f50189bc7a39d1a","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":16,"width":0,"height":0,"name":"","label":"Sensor 16","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":930,"y":700,"wires":[]},{"id":"eeea047afa441e09","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":17,"width":0,"height":0,"name":"","label":"Sensor 17","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":930,"y":760,"wires":[]},{"id":"62ad375b7c6a9c20","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":18,"width":0,"height":0,"name":"","label":"Sensor 18","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":930,"y":820,"wires":[]},{"id":"f825ad2cd5c14432","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":19,"width":0,"height":0,"name":"","label":"Sensor 19","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":930,"y":880,"wires":[]},{"id":"7b5583df1675348b","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":20,"width":0,"height":0,"name":"","label":"Sensor 20","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":930,"y":940,"wires":[]},{"id":"0d40b8915775b01b","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":21,"width":0,"height":0,"name":"","label":"Sensor 21","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":930,"y":1000,"wires":[]},{"id":"c08ad1b050a57d3d","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":22,"width":0,"height":0,"name":"","label":"Sensor 22","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":930,"y":1060,"wires":[]},{"id":"0cb9318a0416e459","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":23,"width":0,"height":0,"name":"","label":"Sensor 23","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":930,"y":1120,"wires":[]},{"id":"da76804cdfba15db","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":25,"width":0,"height":0,"name":"","label":"Sensor 24","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":930,"y":1180,"wires":[]},{"id":"d9db79d4b352d8bd","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":27,"width":0,"height":0,"name":"","label":"Sensor 26","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1090,"y":400,"wires":[]},{"id":"2a376ee2c44c2f5e","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":28,"width":0,"height":0,"name":"","label":"Sensor 27","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1090,"y":460,"wires":[]},{"id":"ed030685c9ab3e4b","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":29,"width":0,"height":0,"name":"","label":"Sensor 28","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1090,"y":520,"wires":[]},{"id":"5eabde7de4e7f50a","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":30,"width":0,"height":0,"name":"","label":"Sensor 29","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1090,"y":580,"wires":[]},{"id":"64acf66286a7d227","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":31,"width":0,"height":0,"name":"","label":"Sensor 30","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1090,"y":640,"wires":[]},{"id":"f9d4d835e2d6dac2","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":32,"width":0,"height":0,"name":"","label":"Sensor 31","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1090,"y":700,"wires":[]},{"id":"e3a25d6deb7cad8e","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":33,"width":0,"height":0,"name":"","label":"Sensor 32","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1090,"y":760,"wires":[]},{"id":"1a49a391bccead65","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":34,"width":0,"height":0,"name":"","label":"Sensor 33","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1090,"y":820,"wires":[]},{"id":"07ac3a2beeb83629","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":35,"width":0,"height":0,"name":"","label":"Sensor 34","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1090,"y":880,"wires":[]},{"id":"ce728d96eb55f7a7","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":36,"width":0,"height":0,"name":"","label":"Sensor 35","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1090,"y":940,"wires":[]},{"id":"921bce55f98f8056","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":37,"width":0,"height":0,"name":"","label":"Sensor 36","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1090,"y":1000,"wires":[]},{"id":"179299cda2232a0a","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":38,"width":0,"height":0,"name":"","label":"Sensor 37","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1090,"y":1060,"wires":[]},{"id":"b2e363b94e89bdf6","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":39,"width":0,"height":0,"name":"","label":"Sensor 38","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1090,"y":1120,"wires":[]},{"id":"9c85ad3dcd15b622","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":40,"width":0,"height":0,"name":"","label":"Sensor 39","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1090,"y":1180,"wires":[]},{"id":"b14ed68f90b88c13","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":43,"width":0,"height":0,"name":"","label":"Sensor 41","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1310,"y":420,"wires":[]},{"id":"a4bfdec885bcdc18","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":45,"width":0,"height":0,"name":"","label":"Sensor 42","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1310,"y":480,"wires":[]},{"id":"b8e62bf6a8cd897f","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":47,"width":0,"height":0,"name":"","label":"Sensor 43","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1310,"y":540,"wires":[]},{"id":"3b47cc4ae470f36f","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":49,"width":0,"height":0,"name":"","label":"Sensor 44","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1310,"y":600,"wires":[]},{"id":"dfa80d58298f6d22","type":"websocket in","z":"a821534caa3aa9cf","name":"","server":"4e976676.9e1538","client":"","x":210,"y":300,"wires":[["ef6d8c571a755b5a","4dbab2f920c86ea1"]]},{"id":"4dbab2f920c86ea1","type":"debug","z":"a821534caa3aa9cf","name":"debug 226","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":720,"y":140,"wires":[]},{"id":"80463f9e4ba961c2","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":44,"width":0,"height":0,"name":"","label":"Sensor 46","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1310,"y":720,"wires":[]},{"id":"b8195bcb886bdc59","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":46,"width":0,"height":0,"name":"","label":"Sensor 47","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1310,"y":780,"wires":[]},{"id":"10a6667ce8cde770","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":48,"width":0,"height":0,"name":"","label":"Sensor 48","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1310,"y":840,"wires":[]},{"id":"488f0373d3f2f42b","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":50,"width":0,"height":0,"name":"","label":"Sensor 49","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1310,"y":900,"wires":[]},{"id":"baadd403e52e3c2c","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":42,"width":0,"height":0,"name":"","label":"Sensor 45","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1310,"y":660,"wires":[]},{"id":"91535e41ded4e550","type":"ui_text","z":"a821534caa3aa9cf","group":"8369c9bf66ac1066","order":51,"width":0,"height":0,"name":"","label":"Sensor 50","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1310,"y":960,"wires":[]},{"id":"e9575d4be746a685","type":"ui_text","z":"a821534caa3aa9cf","g":"f4572f7849d29d04","group":"8369c9bf66ac1066","order":41,"width":0,"height":0,"name":"","label":"Sensor 40","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#05d63a","x":1310,"y":360,"wires":[]},{"id":"2167d545401575ce","type":"ui_group","name":"Room 1","tab":"tab_valley_kings","order":3,"disp":false,"width":10,"collapse":false,"className":""},{"id":"45bd6a9b5a81525a","type":"ui_group","name":"Valley of Kings","tab":"3b6f38e55e709689","order":1,"disp":true,"width":"6","collapse":false,"className":""},{"id":"51f4a9454e215443","type":"ui_group","name":"Valley Of Kings","tab":"feb34147672019a5","order":1,"disp":false,"width":"20","collapse":false,"className":""},{"id":"aee1e653a92d1fd1","type":"ui_group","name":"Timer","tab":"08ec602306b78056","order":5,"disp":true,"width":10,"collapse":false,"className":""},{"id":"f01094a877433a7e","type":"ui_group","name":"Last Pharoah Standing","tab":"4c886846241ce189","order":1,"disp":true,"width":"6","collapse":false,"className":""},{"id":"caf9164635a35065","type":"ui_group","name":"Wizard and Dragon","tab":"5e1703461ef69993","order":1,"disp":true,"width":"6","collapse":false,"className":""},{"id":"f01a3882fd199f61","type":"ui_group","name":"Timer","tab":"tab_last_pharaoh","order":4,"disp":true,"width":10,"collapse":false,"className":""},{"id":"87ecd5d4865a70ce","type":"ui_group","name":"Hint System","tab":"a81b99c84f617916","order":3,"disp":true,"width":"6","collapse":false,"className":""},{"id":"0e382e0a91be8365","type":"ui_group","name":"4","tab":"367139990507f292","order":1,"disp":true,"width":"6","collapse":false,"className":""},{"id":"ff5893abbdf5e9c2","type":"ui_group","name":"Timer","tab":"a81b99c84f617916","order":2,"disp":true,"width":"6","collapse":false,"className":""},{"id":"d8c719d4ecb8ea30","type":"ui_group","name":"Hint System","tab":"50568086ae6531e3","order":3,"disp":true,"width":"6","collapse":false,"className":""},{"id":"b726180cdfb28bdc","type":"ui_group","name":"5","tab":"2a424f8066fd87cf","order":1,"disp":true,"width":"6","collapse":false,"className":""},{"id":"9293d956ab8504b4","type":"ui_group","name":"Timer","tab":"50568086ae6531e3","order":2,"disp":true,"width":"6","collapse":false,"className":""},{"id":"31dc3ebf242f4083","type":"ui_group","name":"Valley of the Kings","tab":"tab_valley_kings","order":1,"disp":true,"width":6,"collapse":false,"className":""},{"id":"group_last_pharaoh_sensors","type":"ui_group","name":"Last Pharoah Standing","tab":"tab_last_pharaoh","order":1,"disp":true,"width":"6","collapse":false,"className":""},{"id":"23151d029672a754","type":"ui_group","name":"Wizard and Dragon","tab":"08ec602306b78056","order":1,"disp":true,"width":"6","collapse":false,"className":""},{"id":"125f6c81.60151b","type":"mqtt-broker","name":"MQTT Server","broker":"localhost","port":"1883","tls":"","clientid":"","autoConnect":true,"usetls":false,"protocolVersion":"4","keepalive":"60","cleansession":true,"autoUnsubscribe":true,"birthTopic":"","birthQos":"0","birthPayload":"","birthMsg":{},"closeTopic":"","closeQos":"0","closePayload":"","closeMsg":{},"willTopic":"","willQos":"0","willPayload":"","willMsg":{},"userProps":"","sessionExpiry":""},{"id":"fa18ce1aeaf73f7b","type":"ui_group","name":"Phase 2: Python","tab":"tab_valley_kings","order":2,"disp":true,"width":"6","collapse":false,"className":""},{"id":"498c39ca7003f628","type":"mqtt-broker","name":"","broker":"localhost","port":"1883","clientid":"","autoConnect":true,"usetls":false,"protocolVersion":"4","keepalive":"60","cleansession":true,"autoUnsubscribe":true,"birthTopic":"","birthQos":"0","birthRetain":"false","birthPayload":"","birthMsg":{},"closeTopic":"","closeQos":"0","closeRetain":"false","closePayload":"","closeMsg":{},"willTopic":"","willQos":"0","willRetain":"false","willPayload":"","willMsg":{},"userProps":"","sessionExpiry":""},{"id":"6f322c5b24dbb1a4","type":"ui_group","name":"Sensors","tab":"e3589343610587e6","order":1,"disp":true,"width":"6","collapse":false,"className":""},{"id":"68dd160de6ff4272","type":"ui_group","name":"Phase 2: Python","tab":"tab_last_pharaoh","order":2,"disp":true,"width":"6","collapse":false,"className":""},{"id":"247e57704f496351","type":"ui_group","name":"Phase 2: Python","tab":"08ec602306b78056","order":2,"disp":true,"width":"6","collapse":false,"className":""},{"id":"4e976676.9e1538","type":"websocket-listener","path":"/ws/sensor-data","wholemsg":"false"},{"id":"01cca7960dfdf284","type":"ui_group","name":"Phase 1: Python","tab":"a81b99c84f617916","order":1,"disp":true,"width":"6","collapse":false,"className":""},{"id":"8369c9bf66ac1066","type":"ui_group","name":"Phase 1: Python","tab":"50568086ae6531e3","order":1,"disp":true,"width":"6","collapse":false,"className":""},{"id":"tab_valley_kings","type":"ui_tab","name":"Room 1*","icon":"dashboard","order":2,"disabled":false,"hidden":false},{"id":"3b6f38e55e709689","type":"ui_tab","name":"Room 1","icon":"dashboard","order":10,"disabled":false,"hidden":false},{"id":"feb34147672019a5","type":"ui_tab","name":"UserDisplay1","icon":"dashboard","order":25,"disabled":false,"hidden":false},{"id":"08ec602306b78056","type":"ui_tab","name":"Room 3*","icon":"dashboard","order":19,"disabled":false,"hidden":false},{"id":"4c886846241ce189","type":"ui_tab","name":"UserDisplay2","icon":"dashboard","order":26,"disabled":false,"hidden":false},{"id":"5e1703461ef69993","type":"ui_tab","name":"UserDisplay3","icon":"dashboard","order":27,"disabled":false,"hidden":false},{"id":"tab_last_pharaoh","type":"ui_tab","name":"Room 2*","icon":"dashboard","order":13,"disabled":false,"hidden":false},{"id":"a81b99c84f617916","type":"ui_tab","name":"Room 4*","icon":"dashboard","disabled":false,"hidden":false},{"id":"367139990507f292","type":"ui_tab","name":"UserDisplay4","icon":"dashboard","disabled":false,"hidden":false},{"id":"50568086ae6531e3","type":"ui_tab","name":"Room 5*","icon":"dashboard","disabled":false,"hidden":false},{"id":"2a424f8066fd87cf","type":"ui_tab","name":"UserDisplay5","icon":"dashboard","disabled":false,"hidden":false},{"id":"e3589343610587e6","type":"ui_tab","name":"Python","icon":"dashboard","order":21,"disabled":false,"hidden":false}]